{
  "priority": 1,
  "name": "Update Opportunity - Log to JSON Server via Webhook",
  "request": {
    "method": "PATCH",
    "urlPathPattern": "/services/data/v[0-9]+\\.[0-9]+/sobjects/Opportunity/[A-Za-z0-9]+"
  },
  "response": {
    "status": 204,
    "transformers": ["response-template"]
  },
  "serveEventListeners": [
    {
      "name": "webhook",
      "parameters": {
        "method": "POST",
        "url": "http://salesforce-json-mock/opportunity_updates",
        "headers": {
          "Content-Type": "application/json"
        },
        "body": "{\"_sfId\": \"{{request.pathSegments.[5]}}\", \"_operation\": \"UPDATE\", \"_timestamp\": \"{{now}}\", \"_updatedFields\": {{originalRequest.body}} }"
      }
    }
  ]
}
