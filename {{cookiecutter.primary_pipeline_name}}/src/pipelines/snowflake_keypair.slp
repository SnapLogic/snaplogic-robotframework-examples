{"class_fqid":"com-snaplogic-pipeline_9","snode_id":"692748edfb704216e9dfa41c","instance_id":"937f042c-0744-4888-9131-4da0361b65b1","instance_version":3,"link_map":{"link177":{"dst_id":"7d740d1f-66f9-4dc1-a690-5fac83f17fff","dst_view_id":"input0","src_id":"4c34b383-44e1-41a7-b79b-a3c447e03973","src_view_id":"output0","isGoto":false},"link178":{"dst_id":"4dabce7a-b522-40ab-87e2-ec4d39984a0b","dst_view_id":"input0","src_id":"7d740d1f-66f9-4dc1-a690-5fac83f17fff","src_view_id":"output0","isGoto":false},"link181":{"dst_id":"0a51d39e-db36-44e2-a494-6759719ddb87","dst_view_id":"input0","src_id":"4dabce7a-b522-40ab-87e2-ec4d39984a0b","src_view_id":"output0","isGoto":false},"link183":{"dst_id":"753b852e-37d0-4cf6-bb7b-6e943008627e","dst_view_id":"inputRows","src_id":"0a51d39e-db36-44e2-a494-6759719ddb87","src_view_id":"output0","isGoto":false},"link193":{"dst_id":"4e8856a5-6a97-492d-9688-cc20b8fbeb49","dst_view_id":"input0","src_id":"9eb77f0e-7655-458b-be94-f850053f89b7","src_view_id":"output0","isGoto":false},"link194":{"dst_id":"5fe9f17b-e7dd-431b-a760-ba76483b72e8","dst_view_id":"input1","src_id":"4e8856a5-6a97-492d-9688-cc20b8fbeb49","src_view_id":"output0","isGoto":false},"link195":{"dst_id":"9eb77f0e-7655-458b-be94-f850053f89b7","dst_view_id":"input101","src_id":"26026e45-8aa9-4fcd-a2fd-95f8c71a7faf","src_view_id":"output1","isGoto":false},"link198":{"dst_id":"4c34b383-44e1-41a7-b79b-a3c447e03973","dst_view_id":"input0","src_id":"5fe9f17b-e7dd-431b-a760-ba76483b72e8","src_view_id":"output0","isGoto":false},"link200":{"dst_id":"5fe9f17b-e7dd-431b-a760-ba76483b72e8","dst_view_id":"input0","src_id":"26026e45-8aa9-4fcd-a2fd-95f8c71a7faf","src_view_id":"output0","isGoto":true}},"link_serial":201,"property_map":{"info":{"label":{"value":"snowflake_keypair_20251126183711459164"},"author":{"value":"spothana@snaplogic.com"},"pipeline_doc_uri":{"value":null},"notes":{"value":null},"purpose":{"value":null}},"error":{"error_behavior":{"value":"none"}},"settings":{"error_pipeline":{"value":null,"expression":false},"error_param_table":{"value":[{"key":{"value":"pipe_label"},"value":{"value":"pipe.label","expression":true}},{"key":{"value":"pipe_ruuid"},"value":{"value":"pipe.ruuid","expression":true}},{"key":{"value":"pipe_hostname"},"value":{"value":"pipe.hostname","expression":true}}]},"param_table":{"value":[{"capture":{"value":false},"key":{"value":"destination_hint"},"value":{"value":"BRAZE:Subscription"},"required":{"value":false},"data_type":{"value":"string"},"description":{"value":null}},{"capture":{"value":false},"key":{"value":"schema"},"value":{"value":"DEMO"},"required":{"value":false},"data_type":{"value":"string"},"description":{"value":null}},{"capture":{"value":false},"key":{"value":"table"},"value":{"value":"DEMO.TEST_SNAP4"},"required":{"value":false},"data_type":{"value":"string"},"description":{"value":null}},{"capture":{"value":false},"key":{"value":"isTest"},"value":{"value":"test"},"required":{"value":false},"data_type":{"value":"string"},"description":{"value":null}},{"capture":{"value":false},"key":{"value":"test_input_file"},"value":{"value":"test_input_file.json"},"required":{"value":false},"data_type":{"value":"string"},"description":{"value":null}},{"capture":{"value":false},"key":{"value":"snowflake_acct"},"value":{"value":"../shared/snowflake_keypair_account"},"required":{"value":false},"data_type":{"value":"string"},"description":{"value":null}}]},"imports":{"value":[]},"cache_pipelines":{"value":[]}},"input":{"26026e45-8aa9-4fcd-a2fd-95f8c71a7faf_input0":{"view_type":{"value":"document"},"label":{"value":"Router - input0"}}},"output":{"753b852e-37d0-4cf6-bb7b-6e943008627e_output0":{"view_type":{"value":"document"},"label":{"value":"Snowflake - Snowpipe Streaming - output0"}}}},"render_map":{"scale_ratio":1,"pan_x_num":0,"pan_y_num":0,"default_snaplex":"689a743f56ff4fdd890f2178","detail_map":{"4c34b383-44e1-41a7-b79b-a3c447e03973":{"grid_x_int":5,"grid_y_int":2,"rot_int":0,"recommendation_id":null,"source":"","index":null,"rot_tail_int":0,"input":{},"output":{},"error":{}},"7d740d1f-66f9-4dc1-a690-5fac83f17fff":{"grid_x_int":6,"grid_y_int":2,"rot_int":0,"recommendation_id":null,"source":"","index":null,"rot_tail_int":0,"input":{},"output":{},"error":{}},"4dabce7a-b522-40ab-87e2-ec4d39984a0b":{"grid_x_int":7,"grid_y_int":2,"rot_int":0,"recommendation_id":null,"source":"","index":null,"rot_tail_int":0,"input":{},"output":{},"error":{}},"0a51d39e-db36-44e2-a494-6759719ddb87":{"grid_x_int":8,"grid_y_int":2,"rot_int":0,"recommendation_id":null,"source":"","index":null,"rot_tail_int":0,"output":{},"input":{},"error":{}},"753b852e-37d0-4cf6-bb7b-6e943008627e":{"grid_x_int":9,"grid_y_int":2,"rot_int":0,"recommendation_id":null,"source":"","index":null,"rot_tail_int":0},"26026e45-8aa9-4fcd-a2fd-95f8c71a7faf":{"grid_x_int":1,"grid_y_int":2,"rot_int":0,"recommendation_id":null,"source":"snap catagory","index":null,"rot_tail_int":0,"output":{"output1":{"rot_int":0,"dx_int":0,"dy_int":1}},"input":{},"error":{}},"5fe9f17b-e7dd-431b-a760-ba76483b72e8":{"grid_x_int":4,"grid_y_int":2,"rot_int":0,"recommendation_id":null,"source":"snap catagory","index":null,"rot_tail_int":0,"output":{},"input":{"input1":{"rot_int":0,"dx_int":0,"dy_int":1}},"error":{}},"9eb77f0e-7655-458b-be94-f850053f89b7":{"grid_x_int":2,"grid_y_int":3,"rot_int":0,"recommendation_id":null,"source":"snap catagory","index":null,"rot_tail_int":0,"input":{},"output":{},"error":{}},"4e8856a5-6a97-492d-9688-cc20b8fbeb49":{"grid_x_int":3,"grid_y_int":3,"rot_int":0,"recommendation_id":null,"source":"snap catagory","index":null,"rot_tail_int":0,"output":{},"input":{},"error":{}}}},"snap_map":{"4c34b383-44e1-41a7-b79b-a3c447e03973":{"class_fqid":"com-snaplogic-snaps-flow-filter_2-main31019","class_id":"com-snaplogic-snaps-flow-filter","class_version":2,"instance_fqid":"4c34b383-44e1-41a7-b79b-a3c447e03973_1","instance_id":"4c34b383-44e1-41a7-b79b-a3c447e03973","instance_version":1,"property_map":{"info":{"label":{"value":"Filter"},"notes":{}},"input":{"input0":{"view_type":{"value":"document"},"label":{"value":"input0"}}},"output":{"output0":{"view_type":{"value":"document"},"label":{"value":"output0"}}},"error":{"error0":{"view_type":{"value":"document"},"label":{"value":"error0"}},"error_behavior":{"value":"fail"}},"settings":{"execution_mode":{"value":"Validate & Execute"},"filterExpression":{"expression":true,"value":"$decrypted_data.meta.eventType != \"DELETED\" && $decrypted_data.meta.eventType != \"HARD_DELETED\" && $decrypted_data.ownerType == \"EMAIL\" && $decrypted_data.product == \"TT\" && $decrypted_data.productRegion == \"US\" && $decrypted_data.region == \"US\" && $decrypted_data.preferenceType == \"marketing-preferences\" && ($decrypted_data.category == \"/marketing-notifications/Offer\" ||  $decrypted_data.category == \"/marketing-notifications/Content\" ||  $decrypted_data.category == \"/marketing-notifications/Survey\" ||  $decrypted_data.category == \"/marketing-notifications/Product\" ||  $decrypted_data.category == \"/marketing-notifications/CrossSell\") &&  $decrypted_data.channel == \"EMAIL\""},"nullSafeAccess":{"value":false}},"view_serial":100},"class_build_tag":"main31019"},"7d740d1f-66f9-4dc1-a690-5fac83f17fff":{"class_fqid":"com-snaplogic-snaps-flow-datavalidator_1-main31019","class_id":"com-snaplogic-snaps-flow-datavalidator","class_version":1,"instance_fqid":"7d740d1f-66f9-4dc1-a690-5fac83f17fff_1","instance_id":"7d740d1f-66f9-4dc1-a690-5fac83f17fff","instance_version":1,"property_map":{"info":{"label":{"value":"Data Validator"},"notes":{}},"input":{"input0":{"view_type":{"value":"document"},"label":{"value":"input0"}}},"output":{"output0":{"view_type":{"value":"document"},"label":{"value":"output0"}}},"error":{"error0":{"view_type":{"value":"document"},"label":{"value":"error0"}},"error_behavior":{"value":"fail"}},"settings":{"execution_mode":{"value":"Validate & Execute"},"constraintMappings":{"value":[{"sourcePath":{"value":"$decrypted_data$decrypted_data.preferenceType"},"constraint":{"value":"Required"},"constraintValue":{"value":null}},{"sourcePath":{"value":"$decrypted_data.ownerId"},"constraint":{"value":"Required"},"constraintValue":{"value":null}},{"sourcePath":{"value":"$decrypted_data.isPreferenceOptedIn"},"constraint":{"value":"Required"},"constraintValue":{"value":null}}]},"validateJsonPath":{"value":false},"standardizeErrorOutput":{"value":false}},"view_serial":100},"class_build_tag":"main31019"},"4dabce7a-b522-40ab-87e2-ec4d39984a0b":{"class_fqid":"com-snaplogic-snaps-transform-datatransform_4-main31019","class_id":"com-snaplogic-snaps-transform-datatransform","class_version":4,"instance_fqid":"4dabce7a-b522-40ab-87e2-ec4d39984a0b_1","instance_id":"4dabce7a-b522-40ab-87e2-ec4d39984a0b","instance_version":1,"property_map":{"info":{"label":{"value":"PreferenceAttributesMapper"},"notes":{}},"input":{"input0":{"view_type":{"value":"document"},"label":{"value":"input0"}}},"output":{"output0":{"view_type":{"value":"document"},"label":{"value":"output0"}}},"error":{"error0":{"view_type":{"value":"document"},"label":{"value":"error0"}},"error_behavior":{"value":"fail"}},"settings":{"execution_mode":{"value":"Validate & Execute"},"passThrough":{"value":true},"transformations":{"value":{"mappingRoot":{"value":"$"},"mappingTable":{"value":[{"expression":{"expression":true,"value":"$decrypted_data.ownerType"},"targetPath":{"value":"$content.ownerType"}},{"expression":{"value":"$decrypted_data.preferenceType","expression":true},"targetPath":{"value":"$content.preferenceType"}},{"expression":{"value":"$decrypted_data.product","expression":true},"targetPath":{"value":"$content.product"}},{"expression":{"value":"$decrypted_data.hasPath('preferenceOptInLastUpdatedTime') ? $decrypted_data.preferenceOptInLastUpdatedTime : null","expression":true},"targetPath":{"value":"$content.preferenceOptInLastUpdatedTime"}},{"expression":{"value":"$decrypted_data.ownerId","expression":true},"targetPath":{"value":"$content.ownerId"}},{"expression":{"value":"$decrypted_data.isPreferenceOptedIn","expression":true},"targetPath":{"value":"$content.isPreferenceOptedIn"}},{"expression":{"value":"$decrypted_data.category","expression":true},"targetPath":{"value":"$content.category"}},{"expression":{"value":"$decrypted_data.region","expression":true},"targetPath":{"value":"$content.region"}},{"expression":{"value":"$headers","expression":true},"targetPath":{"value":"$metadata.headers"}},{"expression":{"value":"\"PREFERENCE\"","expression":true},"targetPath":{"value":"$metadata.headers.profile_type"}},{"expression":{"value":"\"WAREHOUSE\"","expression":true},"targetPath":{"value":"$metadata.headers.destination"}},{"expression":{"value":"$headers.eventRecordedTimestamp","expression":true},"targetPath":{"value":"$metadata.headers.event_timestamp"}},{"expression":{"value":"$decrypted_data.ownerId","expression":true},"targetPath":{"value":"$metadata.headers.profile_id"}},{"expression":{"value":"\"PREFERENCE\"","expression":true},"targetPath":{"value":"$metadata.headers.event_source_identifier"}},{"expression":{"value":"$headers.entityId + '_' + $headers.entityVersion","expression":true},"targetPath":{"value":"$metadata.headers.unique_event_id"}},{"expression":{"value":"$metadata.offset","expression":true},"targetPath":{"value":"$metadata.offset"}},{"expression":{"value":"$metadata.partition","expression":true},"targetPath":{"value":"$metadata.partition"}},{"expression":{"value":"$metadata.topic","expression":true},"targetPath":{"value":"$metadata.topic"}},{"expression":{"value":"Date.now().getTime()","expression":true},"targetPath":{"value":"$metadata.SnowflakeConnectorPushTime"}},{"expression":{"value":"$decrypted_data.hasPath('preferenceOptInLastUpdatedBy') ? $decrypted_data.preferenceOptInLastUpdatedBy : \"\"","expression":true},"targetPath":{"value":"$content.preferenceOptInLastUpdatedBy"}},{"expression":{"value":"$decrypted_data.hasPath('preferenceOptInLastUpdatedByOriginatingApplicationId') ? $decrypted_data.preferenceOptInLastUpdatedByOriginatingApplicationId : \"\"","expression":true},"targetPath":{"value":"$content.preferenceOptInLastUpdatedByOriginatingApplicationId"}},{"expression":{"value":"$decrypted_data.channel","expression":true},"targetPath":{"value":"$content.channel"}},{"expression":{"value":"$decrypted_data.hasPath('ownerIdHash') ? $decrypted_data.ownerIdHash : \"\"","expression":true},"targetPath":{"value":"$content.ownerIdHash"}},{"expression":{"value":"$decrypted_data.productRegion","expression":true},"targetPath":{"value":"$content.productRegion"}},{"expression":{"value":"$decrypted_data.hasPath('lastUpdatedTime') ? $decrypted_data.lastUpdatedTime : null","expression":true},"targetPath":{"value":"$content.lastUpdatedTime"}},{"expression":{"value":"$decrypted_data.hasPath('lastUpdatedByOriginatingApplicationId') ? $decrypted_data.lastUpdatedByOriginatingApplicationId : null","expression":true},"targetPath":{"value":"$content.lastUpdatedByOriginatingApplicationId"}},{"expression":{"value":"$decrypted_data.hasPath('lastUpdatedBy') ? $decrypted_data.lastUpdatedBy : \"\"","expression":true},"targetPath":{"value":"$content.lastUpdatedBy"}},{"expression":{"value":"_destination_hint","expression":true},"targetPath":{"value":"$metadata.headers.destination_hint"}},{"expression":{"value":"$decrypted_data.isDefault","expression":true},"targetPath":{"value":"$content.isDefault"}},{"expression":{"value":"$decrypted_data.isActive","expression":true},"targetPath":{"value":"$content.isActive"}},{"expression":{"value":"$decrypted_data.hasPath('secureOwnerIdHash') ? $decrypted_data.secureOwnerIdHash : null","expression":true},"targetPath":{"value":"$content.secureOwnerIdHash"}}]}}},"nullSafeAccess":{"value":false}},"view_serial":100},"class_build_tag":"main31019"},"0a51d39e-db36-44e2-a494-6759719ddb87":{"class_fqid":"com-snaplogic-snaps-transform-datatransform_4-main31019","class_id":"com-snaplogic-snaps-transform-datatransform","class_version":4,"instance_fqid":"0a51d39e-db36-44e2-a494-6759719ddb87_1","instance_id":"0a51d39e-db36-44e2-a494-6759719ddb87","instance_version":1,"property_map":{"info":{"label":{"value":"Create SF Record"},"notes":{}},"input":{"input0":{"view_type":{"value":"document"},"label":{"value":"input0"}}},"output":{"output0":{"view_type":{"value":"document"},"label":{"value":"output0"}}},"error":{"error0":{"view_type":{"value":"document"},"label":{"value":"error0"}},"error_behavior":{"value":"fail"}},"settings":{"execution_mode":{"value":"Validate & Execute"},"passThrough":{"value":false},"transformations":{"value":{"mappingRoot":{"value":"$"},"mappingTable":{"value":[{"expression":{"value":"JSON.stringify($metadata)","expression":true},"targetPath":{"value":"$RECORD_METADATA"}},{"expression":{"value":"JSON.stringify($content)","expression":true},"targetPath":{"value":"$RECORD_CONTENT"}}]}}},"nullSafeAccess":{"value":true}},"view_serial":100},"class_build_tag":"main31019"},"753b852e-37d0-4cf6-bb7b-6e943008627e":{"class_fqid":"com-snaplogic-snaps-snowflake-snowpipestreaming_1-main32088","class_id":"com-snaplogic-snaps-snowflake-snowpipestreaming","class_version":1,"instance_fqid":"753b852e-37d0-4cf6-bb7b-6e943008627e_2","instance_id":"753b852e-37d0-4cf6-bb7b-6e943008627e","instance_version":2,"property_map":{"info":{"label":{"value":"Snowflake - Snowpipe Streaming"},"notes":{}},"input":{"inputRows":{"view_type":{"value":"document"},"label":{"value":"rows"}}},"output":{"output0":{"view_type":{"value":"document"},"label":{"value":"output0"}}},"error":{"error0":{"view_type":{"value":"document"},"label":{"value":"error0"}},"error_behavior":{"value":"fail"}},"settings":{"execution_mode":{"value":"Validate & Execute"},"executable_during_suggest":{"value":false},"createTable":{"value":true},"maxClientLag":{"value":"1000","expression":false},"schemaName":{"value":"_schema","expression":true},"tableName":{"value":"_table","expression":true}},"account":{"account_ref":{"value":"_snowflake_acct","expression":true}},"view_serial":100},"class_build_tag":"main32088"},"26026e45-8aa9-4fcd-a2fd-95f8c71a7faf":{"class_fqid":"com-snaplogic-snaps-flow-router_2-main32088","class_id":"com-snaplogic-snaps-flow-router","class_version":2,"instance_fqid":"26026e45-8aa9-4fcd-a2fd-95f8c71a7faf_1","instance_id":"26026e45-8aa9-4fcd-a2fd-95f8c71a7faf","instance_version":1,"property_map":{"info":{"label":{"value":"Router"},"notes":{}},"input":{"input0":{"view_type":{"value":"document"},"label":{"value":"input0"}}},"output":{"output0":{"view_type":{"value":"document"},"label":{"value":"output0"}},"output1":{"view_type":{"value":"document"},"label":{"value":"output1"}}},"error":{"error0":{"view_type":{"value":"document"},"label":{"value":"error0"}},"error_behavior":{"value":"fail"}},"settings":{"execution_mode":{"value":"Validate & Execute"},"routes":{"value":[{"expression":{"expression":true,"value":"_isTest != \"test\""},"outputViewName":{"value":"output0"}},{"expression":{"expression":true,"value":"_isTest == \"test\""},"outputViewName":{"value":"output1"}}]},"firstMatch":{"value":true}},"view_serial":100},"class_build_tag":"main32088"},"5fe9f17b-e7dd-431b-a760-ba76483b72e8":{"class_fqid":"com-snaplogic-snaps-flow-union_2-main32088","class_id":"com-snaplogic-snaps-flow-union","class_version":2,"instance_fqid":"5fe9f17b-e7dd-431b-a760-ba76483b72e8_1","instance_id":"5fe9f17b-e7dd-431b-a760-ba76483b72e8","instance_version":1,"property_map":{"info":{"label":{"value":"Union"}},"input":{"input0":{"view_type":{"value":"document"},"label":{"value":"input0"}},"input1":{"view_type":{"value":"document"},"label":{"value":"input1"}}},"output":{"output0":{"view_type":{"value":"document"},"label":{"value":"output0"}}},"error":{"error0":{"view_type":{"value":"document"},"label":{"value":"error0"}},"error_behavior":{"value":"fail"}},"settings":{"execution_mode":{"value":"Validate & Execute"}},"view_serial":100},"class_build_tag":"main32088"},"9eb77f0e-7655-458b-be94-f850053f89b7":{"class_fqid":"com-snaplogic-snaps-binary-simpleread_1-main32088","class_id":"com-snaplogic-snaps-binary-simpleread","class_version":1,"instance_fqid":"9eb77f0e-7655-458b-be94-f850053f89b7_1","instance_id":"9eb77f0e-7655-458b-be94-f850053f89b7","instance_version":1,"property_map":{"info":{"label":{"value":"File Reader"},"notes":{}},"output":{"output0":{"view_type":{"value":"binary"},"label":{"value":"output0"}}},"error":{"error0":{"view_type":{"value":"document"},"label":{"value":"error0"}},"error_behavior":{"value":"fail"}},"settings":{"filePath":{"value":"_test_input_file","expression":true},"outputHeaders":{"value":[]},"retries":{"value":0,"expression":false},"execution_mode":{"value":"Validate & Execute"},"preventURLEncoding":{"value":false},"retryInterval":{"value":1,"expression":false},"executeDuringPreview":{"value":true},"advancedProperties":{"value":[]},"enableStaging":{"value":false}},"account":{"account_ref":{"value":{}}},"view_serial":101,"input":{"input101":{"label":{"value":"input0"},"view_type":{"value":"document"}}}},"class_build_tag":"main32088"},"4e8856a5-6a97-492d-9688-cc20b8fbeb49":{"class_fqid":"com-snaplogic-snaps-transform-jsonparser_1-main32088","class_id":"com-snaplogic-snaps-transform-jsonparser","class_version":1,"instance_fqid":"4e8856a5-6a97-492d-9688-cc20b8fbeb49_1","instance_id":"4e8856a5-6a97-492d-9688-cc20b8fbeb49","instance_version":1,"property_map":{"info":{"label":{"value":"JSON Parser"}},"input":{"input0":{"view_type":{"value":"binary"},"label":{"value":"input0"}}},"output":{"output0":{"view_type":{"value":"document"},"label":{"value":"output0"}}},"error":{"error0":{"view_type":{"value":"document"},"label":{"value":"error0"}},"error_behavior":{"value":"fail"}},"settings":{"execution_mode":{"value":"Validate & Execute"},"jsonFilterPath":{"value":""},"allowNonStandardJson":{"value":true},"arrayElementsAsDocuments":{"value":true}},"view_serial":100},"class_build_tag":"main32088"}},"path_id":"/ml-legacy-migration/snowflake2-automation-latest/sl_project","path_snode":"69265f4b6dbf25fe4f4d6237"}