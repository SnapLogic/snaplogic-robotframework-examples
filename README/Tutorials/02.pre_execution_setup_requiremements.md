# SnapLogic Robot Framework Automation - Demo Guide(Cheat sheet)

## 📋 Overview
This guide walks you through the prerequisites and setup needed before starting automation with SnapLogic Robot Framework. We follow a systematic approach to ensure smooth test execution.

---

## 🎯 Variable Naming Convention
**Important:** All variables in **CAPITAL LETTERS** are environment variables loaded from `.env` files.

> **Note:** While Robot Framework is case-insensitive, we use this convention to distinguish between:
> - **Environment Variables**: `${ORG_NAME}`, `${SNOWFLAKE_HOSTNAME}` (uppercase)
> - **User-Defined Variables**: `${pipeline_name}`, `${task_name}` (lowercase)

---

## 🚀 Step 1: Pipeline Preparation

### What You Need to Do:
1. **Build and test your pipeline** in SnapLogic Designer
   - Ensure the pipeline executes successfully
   - **Best Practice:** Use pipeline parameters for:
     - Account names
     - Database connection details
     - File paths
     - Any configurable values
   
2. **Why use pipeline parameters?**
   - Provides flexibility to execute pipelines with different data sets
   - Allows runtime updates through triggered tasks
   - Makes pipelines reusable across environments

3. **Determine deployment locations:**
   - Where should accounts be created? (e.g., `shared`, `accounts`)
   - Where should pipelines be imported? (e.g., project path)

### Expected Outcome:
✅ Valid `.slp` pipeline file ready for import  
✅ Clear understanding of required accounts  
✅ Knowledge of database/service credentials needed  
✅ Defined import locations for pipelines and accounts  

### Action Required:
📁 **Upload your pipeline** to:
```
/snaplogic-robotframework-examples/src/pipelines/
```

---

## ⚙️ Step 2: Groundplex Configuration (Optional)

### Choose Your Groundplex Option:

#### **Option A: Use an Existing Groundplex**

If you plan to use a Groundplex that's already deployed in your SnapLogic environment:

**Required Information:**
- **Groundplex Name**: `${GROUNDPLEX_NAME}` - Name of your existing Groundplex

**Configuration:**
Update this value in your `.env` file:
```bash
# Using existing Groundplex
GROUNDPLEX_NAME=my_existing_groundplex
```

> **Note:** When using an existing Groundplex, you **DO NOT** need:
> - `${GROUNDPLEX_LOCATION_PATH}`
> - `${GROUNDPLEX_ENV}`
> - `${RELEASE_BUILD_VERSION}`

---

#### **Option B: Deploy a New Groundplex via Automation**

If you plan to deploy a new Groundplex as part of your test automation:

**Required Information:**
- **Groundplex Name**: `${GROUNDPLEX_NAME}` - Name for the new Groundplex
- **Environment**: `${GROUNDPLEX_ENV}` - Environment identifier (e.g., `dev`, `qa`, `prod`)
- **Release Build Version**: `${RELEASE_BUILD_VERSION}` - SnapLogic release version (e.g., `main-30028`)
- **Groundplex Location**: `${GROUNDPLEX_LOCATION_PATH}` - Deployment path (e.g., `shared`)

**Configuration:**
Update these values in your `.env` file:
```bash
# Deploying new Groundplex
GROUNDPLEX_NAME=my_test_groundplex
GROUNDPLEX_ENV=qa
RELEASE_BUILD_VERSION=main-30028
GROUNDPLEX_LOCATION_PATH=shared
```

---

### Summary:

| Variable                   | Option A (Existing) | Option B (New Deployment) |
| -------------------------- | ------------------- | ------------------------- |
| `GROUNDPLEX_NAME`          | ✅ Required          | ✅ Required                |
| `GROUNDPLEX_LOCATION_PATH` | ❌ Not needed        | ✅ Required                |
| `GROUNDPLEX_ENV`           | ❌ Not needed        | ✅ Required                |
| `RELEASE_BUILD_VERSION`    | ❌ Not needed        | ✅ Required                |

---

## 🔐 Step 3: Account Configuration

### Pre-Configured Account Support:
Account templates and configurations are available at:
```
/snaplogic-robotframework-examples/env_files/
```

> **Note:** This `env_files` directory is continuously expanding to support additional account types. New account configurations and templates are added regularly to support more SnapLogic snaps and connectors.

### Directory Structure:
```
env_files/
├── database_accounts/
│   ├── .env.oracle
│   ├── .env.mysql
│   ├── .env.postgres
│   └── .env.sqlserver
├── external_accounts/
│   └── .env.snowflake
├── messaging_service_accounts/
│   ├── .env.jms
│   └── .env.kafka
└── mock_service_accounts/
    ├── .env.email
    ├── .env.s3
    └── .env.salesforce
```

### What You Need:

#### 1. **Account Location Path**
Update in `/snaplogic-robotframework-examples/.env`:
```bash
ACCOUNT_LOCATION_PATH=shared
```

#### 2. **Account-Specific Details**
Check the relevant `.env` file for your account type. For example, `.env.snowflake`:
```bash
SNOWFLAKE_ACCOUNT_PAYLOAD_FILE_NAME=acc_snowflake_s3_db.json
SNOWFLAKE_ACCOUNT_NAME=snowflake_acct
SNOWFLAKE_HOSTNAME=your-account.snowflakecomputing.com
SNOWFLAKE_USERNAME=your_username
SNOWFLAKE_PASSWORD=your_password
SNOWFLAKE_DATABASE=YOUR_DB
SNOWFLAKE_WAREHOUSE=YOUR_WH
```

### Key Variables for Account Creation:
- `${ACCOUNT_LOCATION_PATH}`: Where accounts will be created
- `${<ACCOUNT_TYPE>_ACCOUNT_PAYLOAD_FILE_NAME}`: JSON template file name
- `${<ACCOUNT_TYPE>_ACCOUNT_NAME}`: Display name for the account

---

### 🔄 Overriding Account Configuration Values:

**Important:** If you want to override any account configuration values from the `env_files/` directory:

1. **Add the variable to the root `.env` file**
2. **The `.env` file takes HIGHEST PRECEDENCE** and will override the same variable in account-specific files

#### Example Scenario:

**Default configuration in `env_files/external_accounts/.env.snowflake`:**
```bash
SNOWFLAKE_HOSTNAME=production.snowflakecomputing.com
SNOWFLAKE_DATABASE=PROD_DB
SNOWFLAKE_WAREHOUSE=PROD_WH
```

**To use different values for testing, add to root `.env` file:**
```bash
# Override Snowflake configuration for dev/testing
SNOWFLAKE_HOSTNAME=dev.snowflakecomputing.com
SNOWFLAKE_DATABASE=DEV_DB
SNOWFLAKE_WAREHOUSE=DEV_WH
```

**Result:**
- ✅ `SNOWFLAKE_HOSTNAME` uses `dev.snowflakecomputing.com` (from `.env`)
- ✅ `SNOWFLAKE_DATABASE` uses `DEV_DB` (from `.env`)
- ✅ `SNOWFLAKE_WAREHOUSE` uses `DEV_WH` (from `.env`)

> **💡 Pro Tip:** This is useful for:
> - Switching between environments (dev, staging, prod)
> - Temporary testing with different credentials
> - Local development overrides without modifying account-specific files

> **⚠️ Note:** Variables defined in the root `.env` file will **always override** the same variables in `env_files/` subdirectories. The root `.env` file is loaded last and has the highest precedence.

---

## 📝 Step 4: Test Configuration

### Update Your Test Variables:
Each test file (e.g., `snowflake_demo.robot`) has a `*** Variables ***` section:

```robot
*** Variables ***
# Pipeline details
${pipeline_name}            snowflake
${pipeline_file_name}       snowflake.slp
${task_name}                snowflake_Task

# Task parameters (inputs for pipeline execution)
&{task_params_set}
...    snowflake_acct=../${ACCOUNT_LOCATION_PATH}/${SNOWFLAKE_ACCOUNT_NAME}
...    schema_name=${SNOWFLAKE_SCHEMA}
...    table_name=${SNOWFLAKE_SCHEMA}.LIFEEVENTSDATA
```

### What to Configure:
1. **Pipeline names and files** - Match your uploaded pipeline
2. **Task parameters** - Values to pass during execution
3. **Account references** - Path to accounts in SnapLogic
4. **Database objects** - Schemas, tables, etc.

---

## ✅ Step 5: Pre-Execution Checklist

Before running your tests, ensure you have:

### ✓ Environment Setup:
- [ ] Root `.env` file updated with organization details
- [ ] Account-specific `.env` files configured with credentials
- [ ] `${ACCOUNT_LOCATION_PATH}` defined
- [ ] Groundplex details configured (if using custom plex)

### ✓ Pipeline Preparation:
- [ ] Pipeline file (`.slp`) uploaded to `/src/pipelines/`
- [ ] Pipeline uses parameters for flexibility
- [ ] Pipeline tested and working in Designer

### ✓ Test Configuration:
- [ ] Test file variables updated
- [ ] Task parameters match pipeline parameters
- [ ] Account references are correct
- [ ] File paths are relative and valid

### ✓ Account Setup:
- [ ] Required account `.env` files configured
- [ ] Account payload JSON files exist
- [ ] Credentials are valid and tested

---

## 🎬 Step 6: Execute Your Tests

You're now ready to run your automation! Follow our comprehensive execution guide:

📖 **[5-Step Quick Start Guide](https://github.com/SnapLogic/snaplogic-robotframework-examples/blob/main/README/Tutorials/pipelineExecution_5-step%20quick%20start.md)**


## 📊 Test Execution Flow

```
┌─────────────────────────┐
│  Update .env Files      │
└───────────┬─────────────┘
            │
            ▼
┌─────────────────────────┐
│  Configure Test         │
│  Variables              │
└───────────┬─────────────┘
            │
            ▼
┌─────────────────────────┐
│  Upload Pipeline to     │
│  /src/pipelines         │
└───────────┬─────────────┘
            │
            ▼
┌─────────────────────────┐
│  Run Suite Setup        │
└───────────┬─────────────┘
            │
            ▼
┌─────────────────────────┐
│  Create Accounts        │
└───────────┬─────────────┘
            │
            ▼
┌─────────────────────────┐
│  Import Pipelines       │
└───────────┬─────────────┘
            │
            ▼
┌─────────────────────────┐
│  Create Triggered Tasks │
└───────────┬─────────────┘
            │
            ▼
┌─────────────────────────┐
│  Execute Tasks          │
└───────────┬─────────────┘
            │
            ▼
┌─────────────────────────┐
│  Verify Results         │
└─────────────────────────┘
```

---

## 🛠️ Key Files Reference

| File/Directory               | Purpose                | Action Required              |
| ---------------------------- | ---------------------- | ---------------------------- |
| `.env`                       | Main environment file  | ✏️ Update org/project details |
| `env_files/`                 | Account configurations | ✏️ Update credentials         |
| `src/pipelines/`             | Pipeline storage       | 📁 Upload your `.slp` files   |
| `test/suite/pipeline_tests/` | Test suites            | ✏️ Configure test variables   |
| `test/suite/test_data/`      | Test data & files      | 📁 Add input/expected files   |

---

## 💡 Best Practices

### 1. **Parameterize Everything**
Use pipeline parameters for all configurable values - accounts, paths, schemas, etc.

### 2. **Use Meaningful Names**
```robot
# Good ✅
${snowflake_account_ref}    ../${ACCOUNT_LOCATION_PATH}/${SNOWFLAKE_ACCOUNT_NAME}

# Avoid ❌
${acc}    ../shared/acc1
```

### 3. **Organize Test Data**
Keep input, expected, and actual output files separate:
```
test_data/
├── input_data/snowflake/
├── expected_output/snowflake/
└── actual_output/snowflake/
```

### 4. **Version Control**
- ✅ Commit: `.env.example`, test files, pipelines
- ❌ Don't commit: `.env` (contains credentials), `actual_output/`

---

## 🎓 Next Steps

1. **Explore Examples**: Review existing tests in `test/suite/pipeline_tests/`
2. **Understand Keywords**: Check `snaplogic_keywords.resource` for available operations
3. **Customize Tests**: Adapt examples to your specific use cases
4. **Run Tests**: Follow the 5-step execution guide
5. **Review Results**: Check logs and reports in `results/` directory

---

## 🔧 Troubleshooting

### Common Issues:

#### Issue: "Account variables not resolved"
**Solution:** Ensure all required variables are defined in the corresponding `.env` file under `env_files/`

#### Issue: "Pipeline not found"
**Solution:** Verify the `.slp` file exists in `/src/pipelines/` and the filename matches `${pipeline_file_name}`

#### Issue: "Account creation fails"
**Solution:** Check that `${ACCOUNT_LOCATION_PATH}` exists in your SnapLogic org and you have permissions

#### Issue: "Triggered task fails"
**Solution:** Verify task parameters match pipeline parameters and all account references are valid

---

## 📂 Project Structure Overview

```
snaplogic-robotframework-examples/
├── .env                          # Main environment file (YOUR CONFIG)
├── env_files/                    # Account-specific configs (YOUR CREDENTIALS)
│   ├── database_accounts/
│   ├── external_accounts/
│   ├── messaging_service_accounts/
│   └── mock_service_accounts/
├── src/
│   └── pipelines/                # Upload your .slp files here
├── test/
│   └── suite/
│       ├── __init__.robot        # Suite setup (loads env vars)
│       ├── pipeline_tests/       # Your test files
│       └── test_data/            # Input/output test data
└── README/
    └── Tutorials/                # Documentation
```

---

## 📞 Need Help?

- 📚 **Documentation**: [SnapLogic Robot Framework Docs](https://github.com/SnapLogic/snaplogic-robotframework-examples)
- 💬 **Support**: Contact your SnapLogic administrator
- 🐛 **Issues**: Check existing test examples for patterns
- 📖 **Quick Start**: [5-Step Pipeline Execution Guide](./pipelineExecution_5-step%20quick%20start.md)

---

## 🎯 Summary

This guide covered:
1. ✅ Understanding variable conventions
2. ✅ Preparing and uploading pipelines
3. ✅ Configuring Groundplex (optional)
4. ✅ Setting up account configurations
5. ✅ Configuring test variables
6. ✅ Pre-execution checklist
7. ✅ Running your tests

You're now ready to automate your SnapLogic pipeline testing! 🚀

---

**Happy Automating!** 🎉

*Last Updated: 2025*
