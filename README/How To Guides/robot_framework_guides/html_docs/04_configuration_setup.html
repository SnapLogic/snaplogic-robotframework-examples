<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configuration Setup - SnapLogic Robot Framework</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            line-height: 1.6; color: #333; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh; padding: 20px;
        }
        .container { max-width: 1200px; margin: 0 auto; background: white; border-radius: 12px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); padding: 40px; }
        h1 { color: #2c3e50; text-align: center; margin-bottom: 10px; font-size: 2.5em; }
        .subtitle { text-align: center; color: #666; margin-bottom: 30px; font-size: 1.1em; }
        h2 { color: #34495e; border-bottom: 3px solid #27ae60; padding-bottom: 10px; margin-top: 30px; margin-bottom: 20px; }
        h3 { color: #27ae60; margin-top: 25px; margin-bottom: 15px; }
        h4 { color: #7f8c8d; margin-top: 20px; margin-bottom: 10px; }
        p { margin-bottom: 15px; }
        .card { background: #f8f9fa; border-radius: 8px; padding: 25px; margin: 20px 0; border-left: 4px solid #27ae60; }
        .highlight-box { background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%); color: white; padding: 25px; border-radius: 12px; margin: 20px 0; }
        .highlight-box h3 { color: white; margin-top: 0; }
        code { background: #e9ecef; padding: 2px 6px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 0.9em; }
        .code-box { background: #2c3e50; color: #ecf0f1; padding: 15px 20px; border-radius: 5px; font-family: 'Courier New', monospace; margin: 15px 0; overflow-x: auto; font-size: 0.9em; }
        .code-box pre { margin: 0; font-family: 'Courier New', monospace; white-space: pre; color: inherit; }
        .code-box .comment { color: #95a5a6; }
        .code-box .variable { color: #f39c12; }
        .code-box .value { color: #2ecc71; }
        .code-box .section { color: #e74c3c; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
        th { background: #27ae60; color: white; }
        tr:nth-child(even) { background: #f8f9fa; }
        tr:hover { background: #e9ecef; }
        .toc { background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 8px; padding: 20px; margin-bottom: 30px; }
        .toc h3 { margin-top: 0; color: #495057; }
        .toc ul { list-style-type: none; padding-left: 0; }
        .toc li { margin: 8px 0; }
        .toc a { color: #27ae60; text-decoration: none; }
        .toc a:hover { text-decoration: underline; }
        .info { background: #d1ecf1; border: 1px solid #17a2b8; border-left: 4px solid #17a2b8; padding: 15px; border-radius: 0 5px 5px 0; margin: 15px 0; }
        .warning { background: #fff3cd; border: 1px solid #ffc107; border-left: 4px solid #ffc107; padding: 15px; border-radius: 0 5px 5px 0; margin: 15px 0; }
        .danger { background: #f8d7da; border: 1px solid #f5c6cb; border-left: 4px solid #dc3545; padding: 15px; border-radius: 0 5px 5px 0; margin: 15px 0; }
        .success { background: #d4edda; border: 1px solid #28a745; border-left: 4px solid #28a745; padding: 15px; border-radius: 0 5px 5px 0; margin: 15px 0; }
        .directory-tree { background: #263238; color: #aed581; padding: 20px; border-radius: 8px; font-family: 'Courier New', monospace; font-size: 0.9em; line-height: 1.8; overflow-x: auto; }
        .directory-tree pre { margin: 0; font-family: 'Courier New', monospace; white-space: pre; }
        .directory-tree .folder { color: #81d4fa; }
        .directory-tree .file { color: #fff59d; }
        .directory-tree .dt-comment { color: #78909c; }
        .two-column { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0; }
        @media (max-width: 768px) { .two-column { grid-template-columns: 1fr; } }
        .service-card { background: white; border: 1px solid #dee2e6; border-radius: 8px; padding: 20px; margin: 10px 0; }
        .service-card h4 { margin-top: 0; color: #2c3e50; }
        .badge { display: inline-block; padding: 4px 10px; border-radius: 4px; font-size: 0.85em; font-weight: 600; }
        .badge-high { background: #e74c3c; color: white; }
        .badge-medium { background: #f39c12; color: white; }
        .badge-low { background: #3498db; color: white; }
        ul, ol { margin-left: 20px; margin-bottom: 15px; }
        li { margin: 8px 0; }
        .nav-links { display: flex; justify-content: space-between; margin-top: 40px; padding-top: 20px; border-top: 1px solid #ddd; }
        .nav-links a { color: #27ae60; text-decoration: none; font-weight: 600; }
        .nav-links a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <div class="container">
        <h1>04 - Configuration Setup</h1>
        <p class="subtitle">Pipeline Preparation, Groundplex Configuration, Account Setup & Test Configuration</p>

        <div class="toc">
            <h3>Table of Contents</h3>
            <ul>
                <li><a href="#main-env">1. Main Environment File (.env)</a></li>
                <li><a href="#env-files-structure">2. Account-Specific Environment Files</a></li>
                <li><a href="#precedence">3. Variable Precedence System</a></li>
                <li><a href="#naming-conventions">4. Variable Naming Conventions</a></li>
                <li><a href="#docker-vs-external">5. Docker Services vs External Credentials</a></li>
                <li><a href="#groundplex-config">6. Groundplex Configuration</a></li>
                <li><a href="#pipeline-config">7. Pipeline & Account Configuration</a></li>
            </ul>
        </div>

        <!-- Section 1: Main .env -->
        <div id="main-env" class="card">
            <h2>1. Main Environment File (.env)</h2>
            <p>The root <code>.env</code> file is the primary configuration file. Copy from <code>.env.example</code> and fill in your SnapLogic credentials.</p>

            <div class="code-box">
<pre><span class="comment"># ============================================================================</span>
<span class="comment">#                    SNAPLOGIC INSTANCE CONFIGURATION</span>
<span class="comment"># ============================================================================</span>

<span class="comment"># SnapLogic Platform URL (MANUAL - must configure)</span>
<span class="variable">URL</span>=<span class="value">https://elastic.snaplogic.com</span>

<span class="comment"># Organization admin credentials (MANUAL - must configure)</span>
<span class="variable">ORG_ADMIN_USER</span>=<span class="value">your_admin_user@company.com</span>
<span class="variable">ORG_ADMIN_PASSWORD</span>=<span class="value">your_password</span>

<span class="comment"># Organization name (MANUAL - must configure)</span>
<span class="variable">ORG_NAME</span>=<span class="value">your_org_name</span>

<span class="comment"># ============================================================================</span>
<span class="comment">#               PROJECT & GROUNDPLEX (Auto-created by framework)</span>
<span class="comment"># ============================================================================</span>

<span class="comment"># Project space and project name</span>
<span class="variable">PROJECT_SPACE</span>=<span class="value">robot_framework_test_space</span>
<span class="variable">PROJECT_NAME</span>=<span class="value">robot_tests</span>

<span class="comment"># Groundplex configuration</span>
<span class="variable">GROUNDPLEX_NAME</span>=<span class="value">robot_groundplex</span>
<span class="variable">GROUNDPLEX_ENV</span>=<span class="value">UAT</span>
<span class="variable">RELEASE_BUILD_VERSION</span>=<span class="value">latest</span>

<span class="comment"># Path locations (auto-derived from project settings)</span>
<span class="variable">PIPELINES_LOCATION_PATH</span>=<span class="value">/${ORG_NAME}/${PROJECT_SPACE}/${PROJECT_NAME}</span>
<span class="variable">ACCOUNT_LOCATION_PATH</span>=<span class="value">/${ORG_NAME}/${PROJECT_SPACE}/${PROJECT_NAME}/shared</span></pre>
            </div>

            <div class="danger">
                <strong>Security:</strong> The root <code>.env</code> file is listed in <code>.gitignore</code> and must <strong>never</strong> be committed to version control. It contains sensitive credentials.
            </div>
        </div>

        <!-- Section 2: Env Files Structure -->
        <div id="env-files-structure" class="card">
            <h2>2. Account-Specific Environment Files</h2>
            <p>Each database and service has its own configuration file under <code>env_files/</code>:</p>

            <div class="directory-tree">
<pre><span class="folder">env_files/</span>
<span class="folder">├── database_accounts/</span>                         <span class="dt-comment"># Database credentials</span>
<span class="file">│   ├── .env.oracle</span>                            <span class="dt-comment"># ORACLE_HOST, ORACLE_USER, ...</span>
<span class="file">│   ├── .env.postgres</span>                          <span class="dt-comment"># POSTGRES_HOST, POSTGRES_USER, ...</span>
<span class="file">│   ├── .env.mysql</span>                             <span class="dt-comment"># MYSQL_HOST, MYSQL_USERNAME, ...</span>
<span class="file">│   ├── .env.sqlserver</span>                         <span class="dt-comment"># SQLSERVER_HOST, SQLSERVER_USER, ...</span>
<span class="file">│   ├── .env.snowflake</span>                         <span class="dt-comment"># SNOWFLAKE_HOSTNAME, SNOWFLAKE_DATABASE, ...</span>
<span class="file">│   ├── .env.db2</span>                               <span class="dt-comment"># DB2_HOST, DB2_USER, ...</span>
<span class="file">│   └── .env.teradata</span>                          <span class="dt-comment"># TERADATA_HOST, TERADATA_USER, ...</span>
│
<span class="folder">├── external_accounts/</span>                         <span class="dt-comment"># External service credentials</span>
<span class="file">│   └── .env.snowflake</span>                         <span class="dt-comment"># External Snowflake config</span>
│
<span class="folder">├── groundplex/</span>                                <span class="dt-comment"># Groundplex port config</span>
<span class="file">│   └── .env.ports</span>                             <span class="dt-comment"># GROUNDPLEX_API_PORT, GROUNDPLEX_JCC_PORT</span>
│
<span class="folder">├── messaging_service_accounts/</span>                <span class="dt-comment"># Messaging services</span>
<span class="file">│   ├── .env.kafka</span>                             <span class="dt-comment"># KAFKA_BOOTSTRAP_SERVERS, ...</span>
<span class="file">│   └── .env.jms</span>                               <span class="dt-comment"># JMS_HOST, JMS_PORT, ...</span>
│
<span class="folder">└── mock_service_accounts/</span>                     <span class="dt-comment"># Mock/cloud services</span>
    <span class="file">├── .env.s3</span>                                <span class="dt-comment"># S3_ENDPOINT, S3_ACCESS_KEY, ...</span>
    <span class="file">├── .env.salesforce</span>                        <span class="dt-comment"># SALESFORCE_HOST, ...</span>
    <span class="file">└── .env.email</span>                             <span class="dt-comment"># EMAIL_HOST, EMAIL_PORT, ...</span></pre>
            </div>
        </div>

        <!-- Section 3: Precedence -->
        <div id="precedence" class="card">
            <h2>3. Variable Precedence System</h2>
            <p>Variables are loaded in a specific order. Later files override earlier ones:</p>

            <table>
                <thead>
                    <tr>
                        <th>Load Order</th>
                        <th>Source</th>
                        <th>Precedence</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1 (First)</td>
                        <td><code>env_files/*.env*</code></td>
                        <td><span class="badge badge-low">Lowest</span></td>
                        <td>Files in env_files root directory</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td><code>env_files/database_accounts/</code></td>
                        <td><span class="badge badge-low">Low</span></td>
                        <td>Database-specific credentials</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td><code>env_files/groundplex/</code></td>
                        <td><span class="badge badge-medium">Medium</span></td>
                        <td>Groundplex port configurations</td>
                    </tr>
                    <tr>
                        <td>4</td>
                        <td><code>env_files/messaging_service_accounts/</code></td>
                        <td><span class="badge badge-medium">Medium</span></td>
                        <td>Kafka, JMS configurations</td>
                    </tr>
                    <tr>
                        <td>5</td>
                        <td><code>env_files/mock_service_accounts/</code></td>
                        <td><span class="badge badge-medium">Medium</span></td>
                        <td>S3, Salesforce, Email mock configs</td>
                    </tr>
                    <tr>
                        <td>6 (Last)</td>
                        <td><code>.env</code> (root)</td>
                        <td><span class="badge badge-high">Highest</span></td>
                        <td>Root .env file - overrides everything</td>
                    </tr>
                </tbody>
            </table>

            <div class="highlight-box">
                <h3>Why This Matters</h3>
                <p>The precedence system lets you:</p>
                <ul style="margin-left: 20px;">
                    <li><strong>Use defaults</strong> from <code>env_files/</code> for Docker-based local testing (pre-configured, safe to commit)</li>
                    <li><strong>Override with real credentials</strong> in the root <code>.env</code> when testing against external systems</li>
                    <li><strong>Switch environments</strong> by changing only the root <code>.env</code> file</li>
                </ul>
            </div>
        </div>

        <!-- Section 4: Naming Conventions -->
        <div id="naming-conventions" class="card">
            <h2>4. Variable Naming Conventions</h2>

            <table>
                <thead>
                    <tr><th>Convention</th><th>Scope</th><th>Examples</th></tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>UPPERCASE</strong></td>
                        <td>Environment variables from <code>.env</code> files</td>
                        <td><code>${ORG_NAME}</code>, <code>${POSTGRES_HOST}</code>, <code>${SNOWFLAKE_DATABASE}</code></td>
                    </tr>
                    <tr>
                        <td><strong>lowercase</strong></td>
                        <td>User-defined test variables in .robot files</td>
                        <td><code>${pipeline_name}</code>, <code>${task_name}</code>, <code>${input_file}</code></td>
                    </tr>
                    <tr>
                        <td><strong>PREFIX_*</strong></td>
                        <td>Variables grouped by system type</td>
                        <td><code>ORACLE_*</code>, <code>POSTGRES_*</code>, <code>SNOWFLAKE_KEYPAIR_*</code></td>
                    </tr>
                    <tr>
                        <td><strong>*_PAYLOAD_FILE_NAME</strong></td>
                        <td>References to JSON payload template files</td>
                        <td><code>POSTGRES_ACCOUNT_PAYLOAD_FILE_NAME</code></td>
                    </tr>
                    <tr>
                        <td><strong>*_ACCOUNT_NAME</strong></td>
                        <td>Account label as it appears in SnapLogic</td>
                        <td><code>POSTGRES_ACCOUNT_NAME=postgres_acc</code></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Section 5: Docker vs External -->
        <div id="docker-vs-external" class="card">
            <h2>5. Docker Services vs External Credentials</h2>

            <div class="two-column">
                <div class="service-card" style="border: 2px solid #0db7ed;">
                    <h4 style="color: #0db7ed;">Docker Services (Default)</h4>
                    <ul>
                        <li>Credentials in <code>env_files/</code> are pre-configured for Docker containers</li>
                        <li>Values are <strong>NOT sensitive</strong> (local containers only)</li>
                        <li>Safe to commit to version control</li>
                        <li>No changes needed for local testing</li>
                    </ul>
                    <div class="success" style="margin-top: 15px;">
                        <strong>Use when:</strong> Local development, CI/CD pipelines, demos
                    </div>
                </div>

                <div class="service-card" style="border: 2px solid #e74c3c;">
                    <h4 style="color: #e74c3c;">External Systems (Your Credentials)</h4>
                    <ul>
                        <li>Copy variables from <code>env_files/.env.*</code> to root <code>.env</code></li>
                        <li>Update with your actual credentials</li>
                        <li>Root <code>.env</code> is <strong>NOT committed</strong> (.gitignore)</li>
                        <li>Overrides Docker defaults automatically</li>
                    </ul>
                    <div class="danger" style="margin-top: 15px;">
                        <strong>Use when:</strong> Testing against real databases or cloud services
                    </div>
                </div>
            </div>

            <h3>Example: Switching to External Snowflake</h3>
            <div class="code-box">
<pre><span class="comment"># Add these to your root .env file (overrides Docker defaults):</span>

<span class="variable">SNOWFLAKE_KEYPAIR_ACCOUNT_NAME</span>=<span class="value">my_production_snowflake</span>
<span class="variable">SNOWFLAKE_KEYPAIR_HOSTNAME</span>=<span class="value">mycompany.snowflakecomputing.com</span>
<span class="variable">SNOWFLAKE_KEYPAIR_USERNAME</span>=<span class="value">my_username</span>
<span class="variable">SNOWFLAKE_KEYPAIR_DATABASE</span>=<span class="value">PRODUCTION_DB</span>
<span class="variable">SNOWFLAKE_KEYPAIR_WAREHOUSE</span>=<span class="value">COMPUTE_WH</span>
<span class="variable">SNOWFLAKE_KEYPAIR_ROLE</span>=<span class="value">SYSADMIN</span></pre>
            </div>

            <div class="info">
                <strong>Tip:</strong> You don't need to copy the <code>*_PAYLOAD_FILE_NAME</code> variable. The JSON template structure is the same regardless of credentials - only the values inside change.
            </div>
        </div>

        <!-- Section 6: Groundplex Config -->
        <div id="groundplex-config" class="card">
            <h2>6. Groundplex Configuration</h2>
            <p>The Groundplex is the SnapLogic on-premises execution runtime. The framework can automatically provision and manage it.</p>

            <table>
                <thead>
                    <tr><th>Variable</th><th>Description</th><th>Example</th></tr>
                </thead>
                <tbody>
                    <tr><td><code>GROUNDPLEX_NAME</code></td><td>Name of the Snaplex in SnapLogic</td><td><code>robot_groundplex</code></td></tr>
                    <tr><td><code>GROUNDPLEX_ENV</code></td><td>Environment label (UAT, PROD, etc.)</td><td><code>UAT</code></td></tr>
                    <tr><td><code>RELEASE_BUILD_VERSION</code></td><td>SnapLogic Groundplex version</td><td><code>latest</code></td></tr>
                    <tr><td><code>GROUNDPLEX_API_PORT</code></td><td>API port for Groundplex communication</td><td><code>8089</code></td></tr>
                    <tr><td><code>GROUNDPLEX_JCC_PORT</code></td><td>JCC port for job control</td><td><code>8090</code></td></tr>
                </tbody>
            </table>

            <div class="warning">
                <strong>Note:</strong> If you're using an existing Groundplex (already running), use <code>make robot-run-tests-no-gp</code> instead of <code>make robot-run-all-tests</code>. See the <a href="robot_framework_make_targets_documentation.html">Make Targets Documentation</a> for details.
            </div>
        </div>

        <!-- Section 7: Pipeline & Account Config -->
        <div id="pipeline-config" class="card">
            <h2>7. Pipeline & Account Configuration</h2>

            <h3>Pipeline Files</h3>
            <p>Place your exported <code>.slp</code> pipeline files in:</p>
            <div class="code-box">
<pre>src/pipelines/
├── my_oracle_pipeline.slp
├── postgres_to_s3.slp
└── snowflake_etl.slp</pre>
            </div>

            <h3>Account Payload Templates</h3>
            <p>JSON templates with Jinja variables for automated account creation:</p>
            <div class="code-box">
<pre>test/suite/test_data/accounts_payload/
├── acc_postgres.json
├── acc_oracle.json
├── acc_mysql.json
├── acc_snowflake_s3_db.json
├── acc_snowflake_s3_keypair.json
├── acc_kafka.json
├── acc_s3.json
└── acc_email.json</pre>
            </div>

            <h3>Test Variables in Robot Files</h3>
            <p>Reference environment variables in your test files using <code>${VARIABLE}</code> syntax:</p>
            <div class="code-box">
<pre><span class="section">*** Variables ***</span>
<span class="comment"># These come from .env files (UPPERCASE)</span>
<span class="comment"># ${ACCOUNT_LOCATION_PATH}    - from .env</span>
<span class="comment"># ${PIPELINES_LOCATION_PATH}  - from .env</span>
<span class="comment"># ${GROUNDPLEX_NAME}          - from .env</span>

<span class="comment"># These are test-specific (lowercase)</span>
<span class="variable">${pipeline_name}</span>           my_pipeline
<span class="variable">${pipeline_file_name}</span>      my_pipeline.slp
<span class="variable">${task_name}</span>               My_Task</pre>
            </div>

            <div class="success">
                <strong>Configuration Complete!</strong> With your <code>.env</code> configured and pipeline files in place, proceed to <a href="05_pipeline_execution_quickstart.html">Pipeline Execution Quick Start</a> to run your first tests.
            </div>
        </div>

        <!-- Navigation -->
        <div class="nav-links">
            <a href="03_vscode_setup_guide.html">&larr; Previous: VS Code Setup</a>
            <a href="05_pipeline_execution_quickstart.html">Next: Pipeline Execution Quick Start &rarr;</a>
        </div>

        <footer style="text-align: center; margin-top: 40px; padding: 20px; color: #666; border-top: 1px solid #ddd;">
            <p>Generated for SnapLogic Robot Framework Examples Project</p>
            <p style="font-size: 0.9em;">Last Updated: February 2026</p>
        </footer>
    </div>
</body>
</html>
