<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Testing Phases - SnapLogic Robot Framework</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            line-height: 1.6; color: #333; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh; padding: 20px;
        }
        .container { max-width: 1200px; margin: 0 auto; background: white; border-radius: 12px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); padding: 40px; }
        h1 { color: #2c3e50; text-align: center; margin-bottom: 10px; font-size: 2.5em; }
        .subtitle { text-align: center; color: #666; margin-bottom: 30px; font-size: 1.1em; }
        h2 { color: #34495e; border-bottom: 3px solid #3498db; padding-bottom: 10px; margin-top: 30px; margin-bottom: 20px; }
        h3 { color: #2980b9; margin-top: 25px; margin-bottom: 15px; }
        h4 { color: #7f8c8d; margin-top: 20px; margin-bottom: 10px; }
        p { margin-bottom: 15px; }
        .card { background: #f8f9fa; border-radius: 8px; padding: 25px; margin: 20px 0; border-left: 4px solid #3498db; }
        .highlight-box { background: linear-gradient(135deg, #3498db 0%, #2980b9 100%); color: white; padding: 25px; border-radius: 12px; margin: 20px 0; }
        .highlight-box h3 { color: white; margin-top: 0; }
        code { background: #e9ecef; padding: 2px 6px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 0.9em; }
        .code-box { background: #2c3e50; color: #ecf0f1; padding: 15px 20px; border-radius: 5px; font-family: 'Courier New', monospace; margin: 15px 0; overflow-x: auto; font-size: 0.9em; }
        .code-box pre { margin: 0; font-family: 'Courier New', monospace; white-space: pre; color: inherit; }
        .code-box .comment { color: #95a5a6; }
        .code-box .string { color: #2ecc71; }
        .code-box .variable { color: #f39c12; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
        th { background: #3498db; color: white; }
        tr:nth-child(even) { background: #f8f9fa; }
        tr:hover { background: #e9ecef; }
        .toc { background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 8px; padding: 20px; margin-bottom: 30px; }
        .toc h3 { margin-top: 0; color: #495057; }
        .toc ul { list-style-type: none; padding-left: 0; }
        .toc li { margin: 8px 0; }
        .toc a { color: #3498db; text-decoration: none; }
        .toc a:hover { text-decoration: underline; }
        .info { background: #d1ecf1; border: 1px solid #17a2b8; border-left: 4px solid #17a2b8; padding: 15px; border-radius: 0 5px 5px 0; margin: 15px 0; }
        .warning { background: #fff3cd; border: 1px solid #ffc107; border-left: 4px solid #ffc107; padding: 15px; border-radius: 0 5px 5px 0; margin: 15px 0; }
        .success { background: #d4edda; border: 1px solid #28a745; border-left: 4px solid #28a745; padding: 15px; border-radius: 0 5px 5px 0; margin: 15px 0; }
        .flow-diagram { background: #1a252f; color: #ecf0f1; padding: 25px; border-radius: 8px; font-family: 'Courier New', monospace; font-size: 0.85em; overflow-x: auto; margin: 20px 0; }
        .flow-diagram pre { margin: 0; white-space: pre; }
        .phase-box { background: white; border-radius: 12px; padding: 25px; margin: 20px 0; border: 2px solid; position: relative; }
        .phase-box.phase1 { border-color: #e74c3c; }
        .phase-box.phase2 { border-color: #f39c12; }
        .phase-box.phase3 { border-color: #27ae60; }
        .phase-label { display: inline-block; padding: 5px 15px; border-radius: 20px; color: white; font-weight: bold; font-size: 0.9em; margin-bottom: 15px; }
        .phase-label.p1 { background: #e74c3c; }
        .phase-label.p2 { background: #f39c12; }
        .phase-label.p3 { background: #27ae60; }
        .two-column { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0; }
        @media (max-width: 768px) { .two-column { grid-template-columns: 1fr; } }
        .service-card { background: white; border: 1px solid #dee2e6; border-radius: 8px; padding: 20px; margin: 10px 0; }
        .service-card h4 { margin-top: 0; color: #2c3e50; }
        ul, ol { margin-left: 20px; margin-bottom: 15px; }
        li { margin: 8px 0; }
        .nav-links { display: flex; justify-content: space-between; margin-top: 40px; padding-top: 20px; border-top: 1px solid #ddd; }
        .nav-links a { color: #3498db; text-decoration: none; font-weight: 600; }
        .nav-links a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <div class="container">
        <h1>06 - Testing Phases</h1>
        <p class="subtitle">Complete Testing Lifecycle from Development Through Production Deployment</p>

        <div class="toc">
            <h3>Table of Contents</h3>
            <ul>
                <li><a href="#overview">1. Testing Lifecycle Overview</a></li>
                <li><a href="#phase1">2. Phase 1: Infrastructure Setup</a></li>
                <li><a href="#phase2">3. Phase 2: Service Initialization</a></li>
                <li><a href="#phase3">4. Phase 3: Integration Testing</a></li>
                <li><a href="#execution-modes">5. Setup Mode vs Verify Mode</a></li>
                <li><a href="#cicd">6. CI/CD Integration</a></li>
                <li><a href="#reporting">7. Test Reporting</a></li>
                <li><a href="#best-practices">8. Best Practices</a></li>
            </ul>
        </div>

        <!-- Section 1: Overview -->
        <div id="overview" class="card">
            <h2>1. Testing Lifecycle Overview</h2>
            <p>The testing lifecycle consists of three major phases that prepare the infrastructure, initialize services, and execute tests:</p>

            <div class="flow-diagram">
<pre>
    ┌─────────────────────────────────────────────────────────────────────┐
    │                     COMPLETE TESTING LIFECYCLE                        │
    ├─────────────────────────────────────────────────────────────────────┤
    │                                                                     │
    │   ┌───────────────┐    ┌───────────────┐    ┌───────────────┐     │
    │   │   PHASE 1     │    │   PHASE 2     │    │   PHASE 3     │     │
    │   │ Infrastructure│ -> │   Service     │ -> │ Integration   │     │
    │   │    Setup      │    │ Initialization│    │   Testing     │     │
    │   │  (createplex) │    │(start-services│    │  (run-tests)  │     │
    │   │               │    │  + groundplex)│    │               │     │
    │   │  ~3-5 min     │    │  ~2-5 min     │    │  Varies       │     │
    │   └───────────────┘    └───────────────┘    └───────────────┘     │
    │                                                                     │
    │   Creates project      Starts Docker         Executes Robot        │
    │   space, Snaplex,      containers,           Framework tests,      │
    │   downloads config     waits for health,     verifies results,     │
    │                        sets permissions       generates reports     │
    └─────────────────────────────────────────────────────────────────────┘
</pre>
            </div>
        </div>

        <!-- Section 2: Phase 1 -->
        <div id="phase1">
            <div class="phase-box phase1">
                <span class="phase-label p1">PHASE 1</span>
                <h2 style="border: none; margin-top: 0;">Infrastructure Setup (createplex)</h2>
                <p>This phase prepares the SnapLogic platform infrastructure. Only runs when <code>PROJECT_SPACE_SETUP=True</code>.</p>

                <h3>What Happens</h3>
                <ol>
                    <li><strong>Initialize Robot Framework</strong> - Load configuration, validate environment</li>
                    <li><strong>Delete existing project space</strong> (if it exists) - Clean slate</li>
                    <li><strong>Create new project space</strong> - Fresh workspace in SnapLogic</li>
                    <li><strong>Create project</strong> within the space</li>
                    <li><strong>Create Snaplex configuration</strong> - Runtime execution environment</li>
                    <li><strong>Download Snaplex config files</strong> - For Groundplex container</li>
                </ol>

                <h3>Error Recovery</h3>
                <div class="warning">
                    <strong>Active Nodes Error:</strong> If project space deletion fails due to active Snaplex nodes, the framework automatically:
                    <ol style="margin-top: 10px;">
                        <li>Stops the Groundplex container</li>
                        <li>Kills the JCC process</li>
                        <li>Waits 60 seconds for nodes to deregister</li>
                        <li>Retries the createplex operation</li>
                        <li>Exits with error if retry also fails</li>
                    </ol>
                </div>

                <div class="code-box">
<pre><span class="comment"># This phase is triggered by:</span>
make robot-run-all-tests TAGS="oracle" PROJECT_SPACE_SETUP=True

<span class="comment"># Internally runs:</span>
make robot-run-tests TAGS="createplex" PROJECT_SPACE_SETUP=True</pre>
                </div>
            </div>
        </div>

        <!-- Section 3: Phase 2 -->
        <div id="phase2">
            <div class="phase-box phase2">
                <span class="phase-label p2">PHASE 2</span>
                <h2 style="border: none; margin-top: 0;">Service Initialization</h2>
                <p>This phase starts all required Docker containers and waits for them to be healthy.</p>

                <h3>What Happens</h3>
                <ol>
                    <li><strong>Pull latest Docker images</strong> (if needed)</li>
                    <li><strong>Start all required services</strong> - Databases, messaging, mock services</li>
                    <li><strong>Wait for service readiness</strong> - Health checks pass</li>
                    <li><strong>Launch Groundplex container</strong> (if using <code>robot-run-all-tests</code>)</li>
                    <li><strong>Poll JCC status</strong> - 20 attempts, 10-second intervals until registered</li>
                    <li><strong>Set file permissions</strong> (Travis CI only) - <code>chmod 777</code> on test data directories</li>
                </ol>

                <h3>Phase 2.1: Travis CI Permissions</h3>
                <p>On Travis CI, Docker containers run as a different user. This step sets <code>chmod 777</code> on test data directories so containers can read/write test files.</p>

                <div class="info">
                    <strong>Note:</strong> If using <code>robot-run-tests-no-gp</code>, the Groundplex launch is <strong>skipped entirely</strong>. The framework assumes your Groundplex is already running.
                </div>
            </div>
        </div>

        <!-- Section 4: Phase 3 -->
        <div id="phase3">
            <div class="phase-box phase3">
                <span class="phase-label p3">PHASE 3</span>
                <h2 style="border: none; margin-top: 0;">Integration Testing</h2>
                <p>The main test execution phase where Robot Framework tests run against the SnapLogic platform.</p>

                <h3>Test Execution Sequence</h3>
                <div class="flow-diagram">
<pre>
    __init__.robot (Suite Setup)
    │
    ├── Load environment variables from .env files
    ├── Validate required variables (URL, credentials, etc.)
    ├── Set up global variables (paths, settings)
    └── Authenticate with SnapLogic API
        │
        ▼
    Test Suite Execution (filtered by TAGS)
    │
    ├── Create Accounts
    │   └── Create Account From Template (JSON payload + Jinja substitution)
    │
    ├── Upload Test Data Files
    │   └── Upload files to SLDB (CSV, JSON, expression libraries)
    │
    ├── Import Pipelines
    │   └── Import Pipelines From Template (.slp files from src/pipelines/)
    │
    ├── Create Triggered Tasks
    │   └── Create Triggered Task From Template (with parameters, notifications)
    │
    ├── Execute Tasks
    │   └── Run Triggered Task With Parameters (pipeline runs on Groundplex)
    │
    └── Verify Results
        ├── Query database tables (record counts, data integrity)
        ├── Export data to CSV
        ├── Compare actual vs expected CSV files
        └── Validate file contents (JSON, CSV)
            │
            ▼
    Generate Reports
    ├── report-{timestamp}.html  (summary)
    ├── log-{timestamp}.html     (detailed steps)
    └── output-{timestamp}.xml   (machine-readable)
</pre>
                </div>
            </div>
        </div>

        <!-- Section 5: Execution Modes -->
        <div id="execution-modes" class="card">
            <h2>5. Setup Mode vs Verify Mode</h2>

            <div class="two-column">
                <div class="service-card" style="border: 2px solid #e74c3c;">
                    <h4 style="color: #e74c3c;">Setup Mode (PROJECT_SPACE_SETUP=True)</h4>
                    <ul>
                        <li>Creates/recreates entire infrastructure</li>
                        <li>Deletes and rebuilds project space</li>
                        <li>Error resilience with auto-retry</li>
                        <li>Execution time: 3-5 minutes setup + test time</li>
                    </ul>
                    <div class="info" style="margin-top: 15px;">
                        <strong>Use for:</strong> First-time setup, CI/CD pipelines, clean environment testing
                    </div>
                </div>

                <div class="service-card" style="border: 2px solid #27ae60;">
                    <h4 style="color: #27ae60;">Verify Mode (PROJECT_SPACE_SETUP=False)</h4>
                    <ul>
                        <li>Verifies existing infrastructure</li>
                        <li>Fails fast if project space missing</li>
                        <li>No infrastructure teardown/rebuild</li>
                        <li>Execution time: 1-2 minutes setup + test time</li>
                    </ul>
                    <div class="info" style="margin-top: 15px;">
                        <strong>Use for:</strong> Development, debugging, quick iteration, stable environments
                    </div>
                </div>
            </div>
        </div>

        <!-- Section 6: CI/CD -->
        <div id="cicd" class="card">
            <h2>6. CI/CD Integration</h2>
            <p>The framework includes built-in Travis CI integration via <code>.travis.yml</code>:</p>

            <h3>CI/CD Pipeline Flow</h3>
            <div class="flow-diagram">
<pre>
    Travis CI Pipeline
    │
    ├── Environment Setup
    │   ├── Language: Python 3.12
    │   ├── Distribution: Ubuntu Jammy
    │   ├── Services: Docker
    │   └── Set permissions, configure environment
    │
    ├── Test Execution
    │   ├── make start-services
    │   ├── make robot-run-all-tests TAGS="..." PROJECT_SPACE_SETUP=True
    │   └── Capture exit code
    │
    ├── Post-Test Actions
    │   ├── make upload-test-results  (upload to S3)
    │   └── make slack-notify         (send results to Slack)
    │
    └── Notifications
        └── Slack webhook for pass/failure alerts
</pre>
            </div>

            <div class="info">
                <strong>Adapting to Other CI Systems:</strong> The Makefile-based approach means you can easily adapt to Jenkins, GitHub Actions, GitLab CI, or any CI system that can run <code>make</code> commands.
            </div>
        </div>

        <!-- Section 7: Reporting -->
        <div id="reporting" class="card">
            <h2>7. Test Reporting</h2>

            <table>
                <thead>
                    <tr><th>Report Type</th><th>File Pattern</th><th>Contents</th><th>Best For</th></tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Summary Report</strong></td>
                        <td><code>report-{timestamp}.html</code></td>
                        <td>Pass/fail statistics, test suite overview, tag statistics</td>
                        <td>Quick status check, stakeholder updates</td>
                    </tr>
                    <tr>
                        <td><strong>Execution Log</strong></td>
                        <td><code>log-{timestamp}.html</code></td>
                        <td>Detailed step-by-step execution, keyword outputs, screenshots</td>
                        <td>Debugging failures, understanding test flow</td>
                    </tr>
                    <tr>
                        <td><strong>XML Output</strong></td>
                        <td><code>output-{timestamp}.xml</code></td>
                        <td>Machine-readable test results, timing data</td>
                        <td>CI/CD integration, trend analysis, dashboards</td>
                    </tr>
                </tbody>
            </table>

            <p>All reports are timestamped with the <code>-G $(DATE)</code> flag, ensuring previous results are preserved and not overwritten.</p>
        </div>

        <!-- Section 8: Best Practices -->
        <div id="best-practices" class="card">
            <h2>8. Best Practices</h2>

            <div class="highlight-box">
                <h3>Quality-as-Code Philosophy</h3>
                <p>This framework embeds testing directly into the development workflow. Quality isn't a separate phase -- it's part of every step.</p>
            </div>

            <div class="two-column">
                <div class="service-card">
                    <h4>Test Design</h4>
                    <ul>
                        <li><strong>Tag tests appropriately</strong> - Enables selective execution</li>
                        <li><strong>Use templates</strong> for data-driven tests - Reduce duplication</li>
                        <li><strong>Parameterize pipelines</strong> - Use pipeline parameters for flexibility</li>
                        <li><strong>Create ephemeral data</strong> - Tests create and clean up their own data</li>
                    </ul>
                </div>
                <div class="service-card">
                    <h4>Execution Strategy</h4>
                    <ul>
                        <li><strong>Check status first</strong> - Run <code>make status</code> before tests</li>
                        <li><strong>Use Make commands</strong> - They handle Docker complexity for you</li>
                        <li><strong>Start small</strong> - Run <code>smoke</code> tests first, then full <code>regression</code></li>
                        <li><strong>Fail fast</strong> - Stop on critical failures to save time</li>
                    </ul>
                </div>
                <div class="service-card">
                    <h4>Environment Management</h4>
                    <ul>
                        <li><strong>Never commit .env</strong> - Keep secrets out of version control</li>
                        <li><strong>Use env_files/ defaults</strong> for Docker testing</li>
                        <li><strong>Override in root .env</strong> for external systems</li>
                        <li><strong>Use meaningful variable names</strong> - Follow PREFIX_* convention</li>
                    </ul>
                </div>
                <div class="service-card">
                    <h4>CI/CD Integration</h4>
                    <ul>
                        <li><strong>Always use PROJECT_SPACE_SETUP=True</strong> in CI/CD</li>
                        <li><strong>Upload test results</strong> for historical tracking</li>
                        <li><strong>Set up Slack notifications</strong> for immediate feedback</li>
                        <li><strong>Keep Docker images updated</strong> for security</li>
                    </ul>
                </div>
            </div>

            <h3>Test-Driven Development Flow</h3>
            <div class="flow-diagram">
<pre>
    ┌──────────────┐     ┌──────────────┐     ┌──────────────┐     ┌──────────────┐
    │  Write Test  │ --> │   Create     │ --> │  Validate &  │ --> │  Refactor &  │
    │  First       │     │   Pipeline   │     │  Debug       │     │  Optimize    │
    │              │     │              │     │              │     │              │
    │  Define what │     │  Build the   │     │  Run tests,  │     │  Clean up,   │
    │  success     │     │  pipeline in │     │  fix issues, │     │  add edge    │
    │  looks like  │     │  SnapLogic   │     │  iterate     │     │  cases       │
    └──────────────┘     └──────────────┘     └──────────────┘     └──────────────┘
</pre>
            </div>

            <div class="success">
                <strong>Congratulations!</strong> You've completed the full tutorial series. You now understand the prerequisites, architecture, configuration, execution, and testing phases of the SnapLogic Robot Framework. Start building your test automation!
            </div>
        </div>

        <!-- Navigation -->
        <div class="nav-links">
            <a href="05_pipeline_execution_quickstart.html">&larr; Previous: Pipeline Execution Quick Start</a>
            <a href="robotframework_end_to_end_workflow_steps.html">Back to Home &rarr;</a>
        </div>

        <footer style="text-align: center; margin-top: 40px; padding: 20px; color: #666; border-top: 1px solid #ddd;">
            <p>Generated for SnapLogic Robot Framework Examples Project</p>
            <p style="font-size: 0.9em;">Last Updated: February 2026</p>
        </footer>
    </div>
</body>
</html>
