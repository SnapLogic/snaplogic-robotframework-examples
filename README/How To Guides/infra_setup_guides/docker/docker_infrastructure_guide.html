<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Docker Infrastructure Guide - SnapLogic Robot Framework</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 40px;
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5em;
        }
        h2 {
            color: #34495e;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            margin-top: 30px;
            margin-bottom: 20px;
        }
        h3 {
            color: #2980b9;
            margin-top: 25px;
            margin-bottom: 15px;
        }
        h4 {
            color: #7f8c8d;
            margin-top: 20px;
            margin-bottom: 10px;
        }
        p {
            margin-bottom: 15px;
        }
        .card {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 25px;
            margin: 20px 0;
            border-left: 4px solid #3498db;
        }
        .highlight-box {
            background: linear-gradient(135deg, #e8f4f8 0%, #d1ecf1 100%);
            border: 1px solid #bee5eb;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .highlight-box h3 {
            color: #0c5460;
            margin-top: 0;
        }
        code {
            background: #e9ecef;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
        .code-box {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px 20px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
            overflow-x: auto;
            font-size: 0.9em;
            white-space: pre-wrap;
        }
        .code-box pre {
            margin: 0;
            font-family: 'Courier New', monospace;
            white-space: pre;
            color: inherit;
        }
        .code-box .keyword {
            color: #e74c3c;
        }
        .code-box .string {
            color: #2ecc71;
        }
        .code-box .comment {
            color: #95a5a6;
        }
        .code-box .variable {
            color: #f39c12;
        }
        .code-box .value {
            color: #3498db;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        th {
            background: #3498db;
            color: white;
        }
        tr:nth-child(even) {
            background: #f8f9fa;
        }
        tr:hover {
            background: #e9ecef;
        }
        .toc {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 30px;
        }
        .toc h3 {
            margin-top: 0;
            color: #495057;
        }
        .toc ul {
            list-style-type: none;
            padding-left: 0;
        }
        .toc li {
            margin: 8px 0;
        }
        .toc a {
            color: #3498db;
            text-decoration: none;
        }
        .toc a:hover {
            text-decoration: underline;
        }
        .warning {
            background: #fff3cd;
            border: 1px solid #ffc107;
            border-left: 4px solid #ffc107;
            padding: 15px;
            border-radius: 0 5px 5px 0;
            margin: 15px 0;
        }
        .success {
            background: #d4edda;
            border: 1px solid #28a745;
            border-left: 4px solid #28a745;
            padding: 15px;
            border-radius: 0 5px 5px 0;
            margin: 15px 0;
        }
        .info {
            background: #d1ecf1;
            border: 1px solid #17a2b8;
            border-left: 4px solid #17a2b8;
            padding: 15px;
            border-radius: 0 5px 5px 0;
            margin: 15px 0;
        }
        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: bold;
            margin-right: 5px;
        }
        .badge-required {
            background: #e74c3c;
            color: white;
        }
        .badge-optional {
            background: #3498db;
            color: white;
        }
        .badge-profile {
            background: #9b59b6;
            color: white;
        }
        .flow-diagram {
            background: #1a252f;
            color: #ecf0f1;
            padding: 25px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.85em;
            overflow-x: auto;
            margin: 20px 0;
        }
        .flow-diagram pre {
            margin: 0;
            white-space: pre;
        }
        .directory-tree {
            background: #263238;
            color: #aed581;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            line-height: 1.8;
            overflow-x: auto;
        }
        .directory-tree pre {
            margin: 0;
            font-family: 'Courier New', monospace;
            white-space: pre;
        }
        .directory-tree .folder {
            color: #81d4fa;
        }
        .directory-tree .file {
            color: #fff59d;
        }
        .directory-tree .comment {
            color: #78909c;
        }
        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        @media (max-width: 768px) {
            .two-column {
                grid-template-columns: 1fr;
            }
        }
        .service-card {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin: 10px 0;
        }
        .service-card h4 {
            margin-top: 0;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .container-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 12px;
            margin: 20px 0;
            text-align: center;
        }
        .container-box h3 {
            color: white;
            margin-top: 0;
        }
        .tools-highlight {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
            padding: 25px;
            border-radius: 12px;
            margin: 20px 0;
        }
        .tools-highlight h3 {
            color: white;
            margin-top: 0;
        }
        .step-number {
            display: inline-block;
            width: 30px;
            height: 30px;
            background: #3498db;
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            font-weight: bold;
            margin-right: 10px;
        }
        ul, ol {
            margin-left: 20px;
            margin-bottom: 15px;
        }
        li {
            margin: 8px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Docker Infrastructure Guide</h1>
        <p style="text-align: center; color: #666; margin-bottom: 30px;">
            SnapLogic Robot Framework Testing Environment
        </p>

        <!-- Table of Contents -->
        <div class="toc">
            <h3>Table of Contents</h3>
            <ul>
                <li><a href="#overview">1. Overview</a></li>
                <li><a href="#architecture">2. Architecture Diagram</a></li>
                <li><a href="#tools-container">3. The Tools Container (Required)</a></li>
                <li><a href="#dockerfile">4. Robot Dockerfile Explained</a></li>
                <li><a href="#requirements">5. Requirements &amp; snaplogic-common-robot</a></li>
                <li><a href="#compose-profiles">6. Docker Compose Profiles</a></li>
                <li><a href="#available-services">7. Available Services</a></li>
                <li><a href="#startup-flow">8. Container Startup Flow</a></li>
                <li><a href="#make-commands">9. Make Commands Reference</a></li>
                <li><a href="#scenarios">10. Usage Scenarios</a></li>
            </ul>
        </div>

        <!-- Section 1: Overview -->
        <div id="overview" class="card">
            <h2>1. Overview</h2>
            <p>This framework uses Docker to provide a consistent, isolated testing environment. The architecture is designed around <strong>one required container</strong> (tools) and <strong>multiple optional service containers</strong> that can be spun up based on your testing needs.</p>

            <div class="highlight-box">
                <h3>Key Principles</h3>
                <ul>
                    <li><strong>Tools Container is Required:</strong> All Robot Framework tests run inside the tools container</li>
                    <li><strong>Services are Optional:</strong> Database/messaging containers can be started based on COMPOSE_PROFILES</li>
                    <li><strong>Flexibility:</strong> Use Docker services OR your own external instances (databases, APIs, etc.)</li>
                    <li><strong>No Local Installation:</strong> Running <code>make start-services</code> handles all library installations</li>
                </ul>
            </div>
        </div>

        <!-- Section 2: Architecture Diagram -->
        <div id="architecture" class="card">
            <h2>2. Architecture Diagram</h2>
            <div class="flow-diagram">
<pre>
                              ┌─────────────────────────────────────────────────────────────────┐
                              │                    DOCKER NETWORK (snaplogicnet)                │
                              │                                                                 │
    ┌─────────────────────────┼─────────────────────────────────────────────────────────────────┼───┐
    │                         │                                                                 │   │
    │  ┌──────────────────────┴──────────────────────┐                                         │   │
    │  │         TOOLS CONTAINER (REQUIRED)          │                                         │   │
    │  │         snaplogic-test-example-tools        │                                         │   │
    │  │  ┌────────────────────────────────────────┐ │                                         │   │
    │  │  │  Python 3.12 + Robot Framework         │ │                                         │   │
    │  │  │  snaplogic-common-robot                │ │                                         │   │
    │  │  │  Database Drivers (Oracle, Postgres..) │ │                                         │   │
    │  │  │  Messaging Clients (Kafka, STOMP)      │ │                                         │   │
    │  │  └────────────────────────────────────────┘ │                                         │   │
    │  │                                             │                                         │   │
    │  │  Volumes:                                   │                                         │   │
    │  │  - ./src:/app/src                           │                                         │   │
    │  │  - ./test:/app/test                         │                                         │   │
    │  │  - ./.env:/app/.env                         │                                         │   │
    │  │  - ./env_files:/app/env_files               │                                         │   │
    │  └─────────────────────────────────────────────┘                                         │   │
    │                         │                                                                 │   │
    │                         │  Connects to services via Docker network                        │   │
    │                         ▼                                                                 │   │
    │  ┌──────────────────────────────────────────────────────────────────────────────────────┐│   │
    │  │                           OPTIONAL SERVICE CONTAINERS                                 ││   │
    │  │                           (Based on COMPOSE_PROFILES)                                 ││   │
    │  │                                                                                       ││   │
    │  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐ ││   │
    │  │  │  PostgreSQL │  │   Oracle    │  │    MySQL    │  │  SQL Server │  │     DB2     │ ││   │
    │  │  │ postgres-dev│  │ oracle-dev  │  │  mysql-dev  │  │sqlserver-dev│  │   db2-dev   │ ││   │
    │  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘ ││   │
    │  │                                                                                       ││   │
    │  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐ ││   │
    │  │  │    MinIO    │  │    Kafka    │  │  ActiveMQ   │  │  Salesforce │  │   MailDev   │ ││   │
    │  │  │    minio    │  │    kafka    │  │   activemq  │  │  sf-mock    │  │  email-mock │ ││   │
    │  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘ ││   │
    │  └──────────────────────────────────────────────────────────────────────────────────────┘│   │
    │                                                                                           │   │
    │                                        OR                                                 │   │
    │                                                                                           │   │
    │  ┌──────────────────────────────────────────────────────────────────────────────────────┐│   │
    │  │                          YOUR EXTERNAL INSTANCES                                      ││   │
    │  │                          (Configure via root .env file)                               ││   │
    │  │                                                                                       ││   │
    │  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐                       ││   │
    │  │  │ AWS RDS Database│  │ Snowflake Cloud │  │ External Kafka  │  ...                  ││   │
    │  │  │                 │  │                 │  │                 │                       ││   │
    │  │  └─────────────────┘  └─────────────────┘  └─────────────────┘                       ││   │
    │  └──────────────────────────────────────────────────────────────────────────────────────┘│   │
    │                                                                                           │   │
    └───────────────────────────────────────────────────────────────────────────────────────────┘   │
                                                                                                    │
                              └─────────────────────────────────────────────────────────────────────┘
</pre>
            </div>
        </div>

        <!-- Section 3: Tools Container -->
        <div id="tools-container" class="card">
            <h2>3. The Tools Container (Required)</h2>

            <div class="tools-highlight">
                <h3>Why Tools Container is Essential</h3>
                <p>The <strong>tools container</strong> is the heart of this testing framework. All Robot Framework tests execute inside this container, ensuring a consistent environment regardless of your local machine setup.</p>
            </div>

            <h3>What's Inside the Tools Container</h3>
            <table>
                <thead>
                    <tr>
                        <th>Component</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Python 3.12</strong></td>
                        <td>Base Python runtime environment</td>
                    </tr>
                    <tr>
                        <td><strong>Robot Framework</strong></td>
                        <td>Test automation framework (installed via snaplogic-common-robot)</td>
                    </tr>
                    <tr>
                        <td><strong>snaplogic-common-robot</strong></td>
                        <td>Pre-built SnapLogic API keywords and Robot libraries</td>
                    </tr>
                    <tr>
                        <td><strong>Database Drivers</strong></td>
                        <td>Oracle, PostgreSQL, MySQL, SQL Server, DB2, Teradata, Snowflake</td>
                    </tr>
                    <tr>
                        <td><strong>Messaging Clients</strong></td>
                        <td>Kafka, STOMP (for ActiveMQ/Artemis)</td>
                    </tr>
                    <tr>
                        <td><strong>Cloud Clients</strong></td>
                        <td>MinIO/S3 client, boto3</td>
                    </tr>
                </tbody>
            </table>

            <h3>Volume Mounts</h3>
            <p>The tools container mounts your local files, allowing real-time code changes:</p>
            <div class="code-box">
<pre><span class="variable">volumes:</span>
  - <span class="string">./src:/app/src</span>              <span class="comment"># Source code</span>
  - <span class="string">./test:/app/test</span>            <span class="comment"># Test files and resources</span>
  - <span class="string">./.env:/app/.env</span>            <span class="comment"># Root environment file</span>
  - <span class="string">./env_files:/app/env_files</span>  <span class="comment"># Environment configurations</span>
  - <span class="string">./test/suite/test_data:/opt/snaplogic/test_data</span>  <span class="comment"># Test data for Groundplex</span></pre>
            </div>

            <div class="info">
                <strong>Benefits:</strong> Changes to test files or environment variables are immediately available inside the container without rebuilding.
            </div>
        </div>

        <!-- Section 4: Dockerfile -->
        <div id="dockerfile" class="card">
            <h2>4. Robot Dockerfile Explained</h2>
            <p>The <code>robot.Dockerfile</code> builds the tools container image. Here's what happens during the build:</p>

            <h3>Build Steps</h3>
            <ol>
                <li>
                    <strong><span class="step-number">1</span>Base Image</strong>
                    <p>Starts from <code>python:3.12.7-slim-bookworm</code> - a minimal Debian-based Python image</p>
                </li>
                <li>
                    <strong><span class="step-number">2</span>System Dependencies</strong>
                    <p>Installs wget, git, libxml2, unixodbc-dev, curl for various database drivers</p>
                </li>
                <li>
                    <strong><span class="step-number">3</span>Compiler Tools</strong>
                    <p>Installs gcc/g++ (required for compiling some Python packages)</p>
                </li>
                <li>
                    <strong><span class="step-number">4</span>IBM DB2 Driver</strong>
                    <p>Downloads and installs IBM DB2 CLI driver (only for x86_64 architecture)</p>
                </li>
                <li>
                    <strong><span class="step-number">5</span>Python Packages</strong>
                    <p>Installs all packages from <code>requirements.txt</code></p>
                </li>
            </ol>

            <h3>Dockerfile Content</h3>
            <div class="code-box">
<pre><span class="keyword">FROM</span> python:3.12.7-slim-bookworm

<span class="comment"># Set the working directory</span>
<span class="keyword">WORKDIR</span> /app

<span class="comment"># Install system dependencies for database drivers</span>
<span class="keyword">RUN</span> apt-get update && \
    apt-get install -y --no-install-recommends \
    wget git libxml2 unixodbc-dev curl && \
    rm -rf /var/lib/apt/lists/*

<span class="comment"># Install IBM DB2 CLI driver (x86_64 only)</span>
<span class="keyword">RUN</span> if [ "$(uname -m)" != "aarch64" ]; then \
    mkdir -p /opt/ibm && \
    cd /opt/ibm && \
    wget https://public.dhe.ibm.com/.../linuxx64_odbc_cli.tar.gz && \
    tar -xzf linuxx64_odbc_cli.tar.gz && \
    rm linuxx64_odbc_cli.tar.gz; \
    fi

<span class="comment"># Copy and install Python requirements</span>
<span class="keyword">COPY</span> requirements.txt .
<span class="keyword">RUN</span> pip install --no-cache-dir -r requirements.txt</pre>
            </div>
        </div>

        <!-- Section 5: Requirements -->
        <div id="requirements" class="card">
            <h2>5. Requirements &amp; snaplogic-common-robot</h2>

            <div class="container-box">
                <h3>snaplogic-common-robot</h3>
                <p>A pre-built Python package containing SnapLogic API keywords and all Robot Framework libraries needed for testing.</p>
            </div>

            <h3>What snaplogic-common-robot Includes</h3>
            <div class="two-column">
                <div class="service-card">
                    <h4>Robot Framework Libraries</h4>
                    <ul>
                        <li>robotframework</li>
                        <li>robotframework-requests</li>
                        <li>robotframework-databaselibrary</li>
                        <li>robotframework-pabot</li>
                        <li>robotframework-jsonlibrary</li>
                        <li>robotframework-csvlibrary</li>
                    </ul>
                </div>
                <div class="service-card">
                    <h4>SnapLogic Keywords</h4>
                    <ul>
                        <li>Pipeline execution keywords</li>
                        <li>Account creation keywords</li>
                        <li>File upload/download keywords</li>
                        <li>Task management keywords</li>
                        <li>API interaction utilities</li>
                    </ul>
                </div>
            </div>

            <h3>Additional Dependencies (requirements.txt)</h3>
            <p>The <code>requirements.txt</code> file adds database drivers and clients not included in snaplogic-common-robot:</p>
            <div class="code-box">
<pre><span class="comment"># Core package (includes Robot Framework and SnapLogic keywords)</span>
<span class="variable">snaplogic-common-robot</span>

<span class="comment"># Database drivers</span>
<span class="variable">oracledb</span>              <span class="comment"># Oracle database driver</span>
<span class="variable">psycopg2-binary</span>       <span class="comment"># PostgreSQL database driver</span>
<span class="variable">pymssql</span>               <span class="comment"># Microsoft SQL Server driver</span>
<span class="variable">pymysql</span>               <span class="comment"># MySQL database driver</span>
<span class="variable">ibm_db</span>                <span class="comment"># IBM DB2 database driver</span>
<span class="variable">teradatasql</span>           <span class="comment"># Teradata database driver</span>
<span class="variable">snowflake-connector-python</span>  <span class="comment"># Snowflake driver</span>
<span class="variable">cryptography>=3.0.0</span>   <span class="comment"># For Snowflake key pair auth</span>

<span class="comment"># Additional clients</span>
<span class="variable">minio</span>                 <span class="comment"># MinIO/S3 client</span>
<span class="variable">kafka-python>=2.0.2</span>   <span class="comment"># Kafka client</span>
<span class="variable">stomp-py>=8.0.0</span>       <span class="comment"># STOMP protocol client</span></pre>
            </div>

            <div class="success">
                <strong>No Local Installation Needed:</strong> When you run <code>make start-services</code>, all these packages are installed inside the Docker container. You don't need Python or any libraries installed locally!
            </div>
        </div>

        <!-- Section 6: Compose Profiles -->
        <div id="compose-profiles" class="card">
            <h2>6. Docker Compose Profiles</h2>
            <p>Docker Compose profiles allow you to selectively start services based on your testing needs.</p>

            <h3>Configuration Location</h3>
            <div class="info">
                <strong>File Location:</strong> <code>makefiles/common_services/Makefile.common</code>
                <p style="margin: 10px 0 0 0;">The <code>COMPOSE_PROFILES</code> variable is defined in this file and controls which Docker services are started.</p>
            </div>

            <h3>How Profiles Work</h3>
            <div class="code-box">
<pre><span class="comment"># Location: makefiles/common_services/Makefile.common</span>
<span class="comment"># Default profiles definition</span>
<span class="variable">COMPOSE_PROFILES</span> ?= tools,oracle-dev,minio,postgres-dev,mysql-dev,sqlserver-dev,salesforce-mock-start,email-mock

<span class="comment"># Override with specific profiles at runtime</span>
make start-services COMPOSE_PROFILES=tools,postgres-dev,kafka</pre>
            </div>

            <h3>Profile Types</h3>
            <table>
                <thead>
                    <tr>
                        <th>Profile</th>
                        <th>Services Started</th>
                        <th>Use Case</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>tools</code></td>
                        <td>Tools container only</td>
                        <td><span class="badge badge-required">REQUIRED</span> Always needed for tests</td>
                    </tr>
                    <tr>
                        <td><code>postgres-dev</code></td>
                        <td>PostgreSQL 15</td>
                        <td>PostgreSQL database testing</td>
                    </tr>
                    <tr>
                        <td><code>oracle-dev</code></td>
                        <td>Oracle 23c Free + schema init</td>
                        <td>Oracle database testing</td>
                    </tr>
                    <tr>
                        <td><code>mysql-dev</code></td>
                        <td>MySQL 8</td>
                        <td>MySQL database testing</td>
                    </tr>
                    <tr>
                        <td><code>sqlserver-dev</code></td>
                        <td>SQL Server 2022</td>
                        <td>SQL Server testing</td>
                    </tr>
                    <tr>
                        <td><code>db2-dev</code></td>
                        <td>IBM DB2</td>
                        <td>DB2 database testing</td>
                    </tr>
                    <tr>
                        <td><code>minio</code></td>
                        <td>MinIO + setup + console</td>
                        <td>S3-compatible storage testing</td>
                    </tr>
                    <tr>
                        <td><code>kafka</code></td>
                        <td>Kafka + UI + setup</td>
                        <td>Kafka messaging testing</td>
                    </tr>
                    <tr>
                        <td><code>gp</code></td>
                        <td>Groundplex container</td>
                        <td>SnapLogic Groundplex for pipeline execution</td>
                    </tr>
                    <tr>
                        <td><code>salesforce-mock-start</code></td>
                        <td>Salesforce mock server</td>
                        <td>Salesforce API testing</td>
                    </tr>
                    <tr>
                        <td><code>email-mock</code></td>
                        <td>MailDev email server</td>
                        <td>Email functionality testing</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Section 7: Available Services -->
        <div id="available-services" class="card">
            <h2>7. Available Services</h2>

            <h3>Directory Structure</h3>
            <div class="directory-tree">
<pre><span class="folder">docker/</span>
<span class="folder">├── activemq/</span>
<span class="file">│   └── docker-compose.activemq.yml</span>     <span class="comment"># ActiveMQ message broker</span>
<span class="folder">├── db2/</span>
<span class="file">│   └── docker-compose.db2.yml</span>          <span class="comment"># IBM DB2 database</span>
<span class="folder">├── email/</span>
<span class="file">│   └── docker-compose.email-mock.yml</span>   <span class="comment"># MailDev email mock</span>
<span class="folder">├── groundplex/</span>
<span class="file">│   └── docker-compose.groundplex.yml</span>   <span class="comment"># SnapLogic Groundplex</span>
<span class="folder">├── kafka/</span>
<span class="file">│   └── docker-compose.kafka.yml</span>        <span class="comment"># Kafka + UI</span>
<span class="folder">├── minio/</span>
<span class="file">│   └── docker-compose.s3emulator.yml</span>   <span class="comment"># MinIO S3 emulator</span>
<span class="folder">├── mysql/</span>
<span class="file">│   └── docker-compose.mysql.yml</span>        <span class="comment"># MySQL database</span>
<span class="folder">├── oracle/</span>
<span class="file">│   └── docker-compose.oracle.yml</span>       <span class="comment"># Oracle database</span>
<span class="folder">├── postgres/</span>
<span class="file">│   └── docker-compose.postgres.yml</span>     <span class="comment"># PostgreSQL database</span>
<span class="folder">├── salesforce/</span>
<span class="file">│   └── docker-compose.salesforce-mock.yml</span>  <span class="comment"># Salesforce mock</span>
<span class="folder">└── sqlserver/</span>
<span class="file">    └── docker-compose.sqlserver.yml</span>    <span class="comment"># SQL Server database</span></pre>
            </div>

            <h3>Service Details</h3>
            <div class="two-column">
                <div class="service-card">
                    <h4><span class="badge badge-profile">postgres-dev</span> PostgreSQL</h4>
                    <ul>
                        <li><strong>Image:</strong> postgres:15</li>
                        <li><strong>Port:</strong> 5435:5432</li>
                        <li><strong>Default User:</strong> snaplogic</li>
                        <li><strong>Default DB:</strong> snaplogic</li>
                    </ul>
                </div>
                <div class="service-card">
                    <h4><span class="badge badge-profile">oracle-dev</span> Oracle</h4>
                    <ul>
                        <li><strong>Image:</strong> oracle/free:23.7.0.0-lite</li>
                        <li><strong>Port:</strong> 1521:1521</li>
                        <li><strong>Password:</strong> Oracle123</li>
                        <li><strong>Includes:</strong> Schema init container</li>
                    </ul>
                </div>
                <div class="service-card">
                    <h4><span class="badge badge-profile">minio</span> MinIO (S3)</h4>
                    <ul>
                        <li><strong>Image:</strong> minio/minio:latest</li>
                        <li><strong>API Port:</strong> 9010:9000</li>
                        <li><strong>Console:</strong> 9011:9001</li>
                        <li><strong>User:</strong> minioadmin</li>
                    </ul>
                </div>
                <div class="service-card">
                    <h4><span class="badge badge-profile">kafka</span> Kafka</h4>
                    <ul>
                        <li><strong>Image:</strong> bitnami/kafka:3.7</li>
                        <li><strong>Port:</strong> 9092:9092</li>
                        <li><strong>UI:</strong> Port 8082</li>
                        <li><strong>Includes:</strong> Setup container</li>
                    </ul>
                </div>
                <div class="service-card">
                    <h4><span class="badge badge-profile">gp</span> Groundplex</h4>
                    <ul>
                        <li><strong>Image:</strong> snaplogic/snaplex</li>
                        <li><strong>API Port:</strong> 8090:8090</li>
                        <li><strong>JCC Port:</strong> 8081:8081</li>
                        <li><strong>Requires:</strong> .slpropz file</li>
                    </ul>
                </div>
                <div class="service-card">
                    <h4><span class="badge badge-profile">email-mock</span> MailDev</h4>
                    <ul>
                        <li><strong>Image:</strong> maildev/maildev</li>
                        <li><strong>SMTP Port:</strong> 1025</li>
                        <li><strong>Web UI:</strong> 1080</li>
                        <li><strong>Use:</strong> Email testing</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Section 8: Startup Flow -->
        <div id="startup-flow" class="card">
            <h2>8. Container Startup Flow</h2>
            <p>When you run <code>make start-services</code>, here's what happens:</p>

            <div class="flow-diagram">
<pre>
    ┌─────────────────────────────────────────────────────────────────────────────────────┐
    │                           make start-services                                        │
    └────────────────────────────────────┬────────────────────────────────────────────────┘
                                         │
                                         ▼
    ┌─────────────────────────────────────────────────────────────────────────────────────┐
    │  Step 1: Docker Compose reads docker-compose.yml                                     │
    │          - Includes all service compose files from docker/ directory                 │
    │          - Loads environment variables from .env and env_files/                      │
    └────────────────────────────────────┬────────────────────────────────────────────────┘
                                         │
                                         ▼
    ┌─────────────────────────────────────────────────────────────────────────────────────┐
    │  Step 2: Build tools container (if not exists)                                       │
    │          - Uses robot.Dockerfile                                                     │
    │          - Installs system dependencies (wget, git, unixodbc, etc.)                  │
    │          - Downloads IBM DB2 CLI driver                                              │
    │          - Runs: pip install -r requirements.txt                                     │
    │            ├── Installs snaplogic-common-robot (includes Robot Framework)            │
    │            ├── Installs database drivers (oracledb, psycopg2, pymssql, etc.)         │
    │            └── Installs messaging clients (kafka-python, stomp-py, minio)            │
    └────────────────────────────────────┬────────────────────────────────────────────────┘
                                         │
                                         ▼
    ┌─────────────────────────────────────────────────────────────────────────────────────┐
    │  Step 3: Start containers based on COMPOSE_PROFILES                                  │
    │          - tools container starts and mounts local volumes                           │
    │          - Optional services (databases, messaging) start based on profiles          │
    │          - Containers join snaplogicnet network                                      │
    └────────────────────────────────────┬────────────────────────────────────────────────┘
                                         │
                                         ▼
    ┌─────────────────────────────────────────────────────────────────────────────────────┐
    │  Step 4: Wait for services to stabilize (30 seconds)                                 │
    │          - Database containers run health checks                                     │
    │          - Init containers run setup scripts                                         │
    └────────────────────────────────────┬────────────────────────────────────────────────┘
                                         │
                                         ▼
    ┌─────────────────────────────────────────────────────────────────────────────────────┐
    │  Ready to run tests!                                                                 │
    │  make robot-run-tests TAGS="your_tags"                                               │
    └─────────────────────────────────────────────────────────────────────────────────────┘
</pre>
            </div>

            <div class="success">
                <strong>Key Benefit:</strong> All Python packages, Robot Framework, and database drivers are installed inside the container. You don't need any local installations - just Docker!
            </div>
        </div>

        <!-- Section 9: Make Commands -->
        <div id="make-commands" class="card">
            <h2>9. Make Commands Reference</h2>

            <h3>Essential Commands</h3>
            <table>
                <thead>
                    <tr>
                        <th>Command</th>
                        <th>Description</th>
                        <th>Duration</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>make start-services</code></td>
                        <td>Start all services based on COMPOSE_PROFILES</td>
                        <td>~30 seconds</td>
                    </tr>
                    <tr>
                        <td><code>make stop-services</code></td>
                        <td>Stop all running containers and clean up</td>
                        <td>~10 seconds</td>
                    </tr>
                    <tr>
                        <td><code>make start-tools-service-only</code></td>
                        <td>Start only the tools container</td>
                        <td>~5 seconds</td>
                    </tr>
                    <tr>
                        <td><code>make reload-env-files</code></td>
                        <td>Recreate tools container with updated .env files</td>
                        <td>~5 seconds</td>
                    </tr>
                </tbody>
            </table>

            <h3>Rebuild Commands</h3>
            <table>
                <thead>
                    <tr>
                        <th>Command</th>
                        <th>Description</th>
                        <th>Duration</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>make clean-start</code></td>
                        <td>Complete rebuild of ALL services from scratch (no cache)</td>
                        <td>10-15+ minutes</td>
                    </tr>
                    <tr>
                        <td><code>make clean-start-tools</code></td>
                        <td>Rebuild only tools container from scratch</td>
                        <td>5-10 minutes</td>
                    </tr>
                    <tr>
                        <td><code>make reinstall-requirements</code></td>
                        <td>Reinstall all Python packages in running container</td>
                        <td>2-3 minutes</td>
                    </tr>
                    <tr>
                        <td><code>make reinstall-snaplogic-common-robot</code></td>
                        <td>Update only snaplogic-common-robot package</td>
                        <td>~30 seconds</td>
                    </tr>
                </tbody>
            </table>

            <h3>Info Commands</h3>
            <table>
                <thead>
                    <tr>
                        <th>Command</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>make show-env-files</code></td>
                        <td>Display which .env files are being loaded</td>
                    </tr>
                    <tr>
                        <td><code>make show-snaplogic-common-robot-version</code></td>
                        <td>Show installed snaplogic-common-robot version</td>
                    </tr>
                    <tr>
                        <td><code>make check-env</code></td>
                        <td>Validate environment file configuration</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Section 10: Usage Scenarios -->
        <div id="scenarios" class="card">
            <h2>10. Usage Scenarios</h2>

            <div class="two-column">
                <div class="service-card">
                    <h4>Scenario 1: Use Docker Services</h4>
                    <p>Use local Docker containers for testing (default setup)</p>
                    <div class="code-box">
<pre><span class="comment"># Start all configured services</span>
make start-services

<span class="comment"># Or start specific services</span>
make start-services COMPOSE_PROFILES=tools,postgres-dev

<span class="comment"># Run tests</span>
make robot-run-tests TAGS="postgres"</pre>
                    </div>
                    <div class="info">
                        <strong>Best for:</strong> Local development, CI/CD pipelines, isolated testing
                    </div>
                </div>
                <div class="service-card">
                    <h4>Scenario 2: Use External Instances</h4>
                    <p>Connect to your own databases/services</p>
                    <div class="code-box">
<pre><span class="comment"># Only start tools container</span>
make start-tools-service-only

<span class="comment"># Configure credentials in root .env</span>
<span class="comment"># (Overrides env_files/ settings)</span>
POSTGRES_HOST=your-rds-instance.amazonaws.com
POSTGRES_USER=your_username
POSTGRES_PASSWORD=your_password

<span class="comment"># Run tests against external DB</span>
make robot-run-tests TAGS="postgres"</pre>
                    </div>
                    <div class="warning">
                        <strong>Security:</strong> Keep credentials in root .env file (not committed to git)
                    </div>
                </div>
            </div>

            <h3>Scenario 3: First Time Setup</h3>
            <div class="code-box">
<pre><span class="comment"># 1. Clone repository and navigate to project</span>
git clone &lt;repository-url&gt;
cd project-name

<span class="comment"># 2. Copy example environment file</span>
cp .env.example .env

<span class="comment"># 3. Start all services (builds containers on first run)</span>
make start-services

<span class="comment"># 4. Verify setup</span>
make show-snaplogic-common-robot-version

<span class="comment"># 5. Run tests</span>
make robot-run-all-tests TAGS="smoke" PROJECT_SPACE_SETUP=True</pre>
            </div>

            <h3>Scenario 4: Update After Code Changes</h3>
            <div class="code-box">
<pre><span class="comment"># If you changed .env files:</span>
make reload-env-files

<span class="comment"># If you changed requirements.txt:</span>
make reinstall-requirements

<span class="comment"># If you changed Dockerfile:</span>
make clean-start-tools

<span class="comment"># If snaplogic-common-robot has a new version:</span>
make reinstall-snaplogic-common-robot</pre>
            </div>

            <div class="tip" style="background: #e0e0e0; border-left: 4px solid #616161; padding: 15px 20px; margin: 20px 0; border-radius: 0 8px 8px 0; color: #212121;">
                <strong style="color: #212121;">Pro Tip: Minimal Local Requirements</strong>
                <p style="margin: 10px 0 0 0; color: #212121;">To run tests with this framework, you only need:</p>
                <ul style="color: #212121; margin-top: 10px;">
                    <li><strong>Docker</strong> installed and running</li>
                    <li><strong>Make</strong> (usually pre-installed on Mac/Linux)</li>
                    <li>That's it! No Python, no Robot Framework, no database drivers locally!</li>
                </ul>
            </div>
        </div>

        <footer style="text-align: center; margin-top: 40px; padding: 20px; color: #666; border-top: 1px solid #ddd;">
            <p>Generated for SnapLogic Robot Framework Examples Project</p>
            <p style="font-size: 0.9em;">Last Updated: January 2026</p>
        </footer>
    </div>
</body>
</html>
