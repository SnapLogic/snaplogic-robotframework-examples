<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Salesforce Mock Service - Complete End-to-End Guide</title>
    <style>
        :root {
            --primary: #0059b3;
            --primary-dark: #004494;
            --primary-light: #cce0ff;
            --success: #1b6e20;
            --success-light: #c8f7c5;
            --danger: #b71c1c;
            --danger-light: #ffcdd2;
            --warning: #e65100;
            --warning-light: #ffe0b2;
            --purple: #6a1b9a;
            --purple-light: #e1bee7;
            --gray-50: #fafafa;
            --gray-100: #f5f5f5;
            --gray-200: #eeeeee;
            --gray-300: #e0e0e0;
            --gray-400: #bdbdbd;
            --gray-600: #757575;
            --gray-700: #616161;
            --gray-800: #424242;
            --gray-900: #212121;
            --font-mono: 'SF Mono', 'Fira Code', 'Cascadia Code', 'Consolas', monospace;
            --font-sans: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            --shadow-sm: 0 1px 3px rgba(0,0,0,0.08);
            --shadow-md: 0 4px 12px rgba(0,0,0,0.1);
            --shadow-lg: 0 8px 24px rgba(0,0,0,0.12);
            --radius: 10px;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: var(--font-sans);
            background: var(--gray-100);
            color: var(--gray-900);
            line-height: 1.7;
            font-size: 15px;
        }

        /* ‚îÄ‚îÄ Section cards ‚îÄ‚îÄ */
        .section-card {
            background: #ffffff;
            border: 2px solid #d0d7e2;
            border-radius: 10px;
            padding: 28px;
            margin-bottom: 24px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
        }
        .section-card h3 {
            font-size: 1.3em;
            font-weight: 700;
            margin-bottom: 16px;
        }

        /* ‚îÄ‚îÄ Header ‚îÄ‚îÄ */
        .hero {
            background: linear-gradient(135deg, #0052cc 0%, #002966 100%);
            color: white;
            padding: 50px 40px 40px;
            text-align: center;
        }
        .hero h1 { font-size: 2.4em; font-weight: 700; margin-bottom: 10px; letter-spacing: -0.5px; }
        .hero p { font-size: 1.15em; opacity: 0.85; max-width: 700px; margin: 0 auto; }
        .hero-badges { margin-top: 20px; display: flex; gap: 12px; justify-content: center; flex-wrap: wrap; }
        .hero-badge {
            background: rgba(255,255,255,0.15);
            border: 1px solid rgba(255,255,255,0.25);
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.85em;
            backdrop-filter: blur(4px);
        }

        /* ‚îÄ‚îÄ Layout ‚îÄ‚îÄ */
        .container { max-width: 1300px; margin: 0 auto; padding: 0 24px; }

        /* ‚îÄ‚îÄ Main Tabs ‚îÄ‚îÄ */
        .main-tabs {
            display: flex;
            gap: 4px;
            background: white;
            padding: 8px 8px 0;
            border-radius: var(--radius) var(--radius) 0 0;
            box-shadow: var(--shadow-sm);
            margin-top: -20px;
            overflow-x: auto;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        .main-tab {
            padding: 12px 20px;
            border: none;
            background: transparent;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: 600;
            color: var(--gray-600);
            border-bottom: 3px solid transparent;
            transition: all 0.2s;
            white-space: nowrap;
            font-family: var(--font-sans);
        }
        .main-tab:hover { color: var(--primary); background: var(--primary-light); border-radius: 6px 6px 0 0; }
        .main-tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
            background: var(--primary-light);
            border-radius: 6px 6px 0 0;
        }
        .tab-panel {
            display: none;
            background: white;
            padding: 36px 40px;
            border-radius: 0 0 var(--radius) var(--radius);
            box-shadow: var(--shadow-md);
            margin-bottom: 30px;
            animation: fadeIn 0.3s ease;
        }
        .tab-panel.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }

        /* ‚îÄ‚îÄ Typography ‚îÄ‚îÄ */
        h2 { font-size: 1.8em; color: var(--gray-900); margin: 0 0 8px; font-weight: 700; letter-spacing: -0.3px; }
        h3 { font-size: 1.3em; color: var(--gray-800); margin: 30px 0 12px; font-weight: 600; }
        h4 { font-size: 1.05em; color: var(--primary-dark); margin: 24px 0 8px; font-weight: 600; }
        .section-subtitle { color: var(--gray-600); font-size: 1.05em; margin-bottom: 28px; }
        p { margin-bottom: 14px; }
        strong { font-weight: 600; }

        /* ‚îÄ‚îÄ Code blocks ‚îÄ‚îÄ */
        pre {
            background: #1e1e2e;
            color: #cdd6f4;
            padding: 20px 24px;
            border-radius: 8px;
            overflow-x: auto;
            font-family: var(--font-mono);
            font-size: 0.88em;
            line-height: 1.6;
            margin: 14px 0 20px;
            border: 1px solid #313244;
        }
        code {
            font-family: var(--font-mono);
            background: var(--gray-100);
            padding: 2px 7px;
            border-radius: 4px;
            font-size: 0.9em;
            color: var(--primary-dark);
        }
        pre code { background: transparent; padding: 0; color: inherit; font-size: inherit; }
        .code-label {
            display: inline-block;
            background: #313244;
            color: #a6adc8;
            padding: 3px 12px;
            border-radius: 6px 6px 0 0;
            font-size: 0.78em;
            font-family: var(--font-mono);
            margin-bottom: -1px;
            position: relative;
            z-index: 1;
        }

        /* ‚îÄ‚îÄ Syntax highlighting ‚îÄ‚îÄ */
        .hl-keyword { color: #cba6f7; }
        .hl-string { color: #a6e3a1; }
        .hl-number { color: #fab387; }
        .hl-comment { color: #6c7086; font-style: italic; }
        .hl-property { color: #89b4fa; }
        .hl-value { color: #f9e2af; }
        .hl-url { color: #89dceb; }
        .hl-method { color: #f38ba8; font-weight: 600; }
        .hl-success { color: #a6e3a1; }
        .hl-error { color: #f38ba8; }
        .hl-arrow { color: #fab387; }

        /* ‚îÄ‚îÄ Tables ‚îÄ‚îÄ */
        table { width: 100%; border-collapse: collapse; margin: 16px 0 24px; }
        th {
            background: #e3e8f0;
            padding: 12px 16px;
            text-align: left;
            font-weight: 700;
            font-size: 0.88em;
            color: #1a1a2e;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-bottom: 3px solid #9aa5b4;
        }
        td { padding: 12px 16px; border-bottom: 1px solid var(--gray-200); font-size: 0.95em; }
        tr:hover td { background: var(--gray-50); }
        td code { font-size: 0.88em; }

        /* ‚îÄ‚îÄ Info boxes ‚îÄ‚îÄ */
        .info-box {
            padding: 18px 22px;
            border-radius: 8px;
            margin: 18px 0;
            border-left: 6px solid;
        }
        .info-box.blue    { background: var(--primary-light); border-color: var(--primary); color: #002952; }
        .info-box.green   { background: var(--success-light); border-color: var(--success); color: #0a3d0c; }
        .info-box.red     { background: var(--danger-light); border-color: var(--danger); color: #5d0000; }
        .info-box.yellow  { background: var(--warning-light); border-color: var(--warning); color: #4e2600; }
        .info-box.purple  { background: var(--purple-light); border-color: var(--purple); color: #38006b; }
        .info-box-title { font-weight: 700; margin-bottom: 6px; display: flex; align-items: center; gap: 8px; font-size: 1.05em; }

        /* ‚îÄ‚îÄ Cards grid ‚îÄ‚îÄ */
        .card-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin: 20px 0; }
        .card {
            background: white;
            border: 1px solid var(--gray-200);
            border-radius: var(--radius);
            padding: 24px;
            transition: all 0.2s;
        }
        .card:hover { box-shadow: var(--shadow-md); border-color: var(--primary); transform: translateY(-2px); }
        .card-icon { font-size: 2em; margin-bottom: 12px; }
        .card h4 { margin: 0 0 8px; color: var(--gray-900); font-size: 1.1em; }
        .card p { color: var(--gray-600); font-size: 0.92em; margin: 0; }

        /* ‚îÄ‚îÄ Flow diagram ‚îÄ‚îÄ */
        .flow-diagram {
            background: var(--gray-50);
            border: 1px solid var(--gray-200);
            border-radius: var(--radius);
            padding: 30px;
            margin: 20px 0;
            overflow-x: auto;
        }

        /* ‚îÄ‚îÄ Step indicator ‚îÄ‚îÄ */
        .steps { counter-reset: step-counter; }
        .step {
            position: relative;
            padding: 20px 20px 20px 70px;
            margin: 16px 0;
            background: var(--gray-50);
            border-radius: 8px;
            border: 1px solid var(--gray-200);
            counter-increment: step-counter;
        }
        .step::before {
            content: counter(step-counter);
            position: absolute;
            left: 20px;
            top: 20px;
            width: 34px;
            height: 34px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.9em;
        }
        .step h4 { margin: 0 0 8px; font-size: 1.05em; }
        .step p { margin: 0; color: var(--gray-700); }

        /* ‚îÄ‚îÄ Mapping cards ‚îÄ‚îÄ */
        .mapping-card {
            border: 1px solid var(--gray-200);
            border-radius: var(--radius);
            margin: 16px 0;
            overflow: hidden;
        }
        .mapping-header {
            padding: 14px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: background 0.2s;
        }
        .mapping-header:hover { background: var(--gray-50); }
        .mapping-header h4 { margin: 0; font-size: 1em; display: flex; align-items: center; gap: 10px; }
        .mapping-body { padding: 0 20px 20px; border-top: 1px solid var(--gray-200); }
        .mapping-badge {
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 0.78em;
            font-weight: 600;
        }
        .badge-post { background: #e3f2fd; color: #1565c0; }
        .badge-get { background: #e8f5e9; color: #2e7d32; }
        .badge-disabled { background: var(--gray-200); color: var(--gray-600); }
        .priority-badge {
            background: var(--warning-light);
            color: var(--warning);
            padding: 2px 10px;
            border-radius: 10px;
            font-size: 0.78em;
            font-weight: 700;
        }

        /* ‚îÄ‚îÄ Comparison columns ‚îÄ‚îÄ */
        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin: 20px 0;
        }
        .comparison-col {
            border-radius: var(--radius);
            padding: 24px;
            border-top: 4px solid;
        }
        .comparison-col.stateless { background: var(--danger-light); border-color: var(--danger); }
        .comparison-col.stateful { background: var(--success-light); border-color: var(--success); }

        /* ‚îÄ‚îÄ Architecture SVG ‚îÄ‚îÄ */
        .arch-diagram {
            background: white;
            border: 1px solid var(--gray-200);
            border-radius: var(--radius);
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            overflow-x: auto;
        }
        .arch-diagram svg { max-width: 100%; height: auto; }

        /* ‚îÄ‚îÄ Directory tree ‚îÄ‚îÄ */
        .dir-tree {
            font-family: var(--font-mono);
            font-size: 0.88em;
            background: #1e1e2e;
            color: #cdd6f4;
            padding: 24px;
            border-radius: 8px;
            line-height: 1.8;
            overflow-x: auto;
        }
        .dir-tree .dir { color: #89b4fa; font-weight: 600; }
        .dir-tree .file { color: #a6e3a1; }
        .dir-tree .comment { color: #6c7086; }

        /* ‚îÄ‚îÄ Sub-tabs (nested) ‚îÄ‚îÄ */
        .sub-tabs { display: flex; gap: 4px; margin: 20px 0 0; border-bottom: 2px solid var(--gray-200); }
        .sub-tab {
            padding: 10px 18px;
            border: none;
            background: transparent;
            cursor: pointer;
            font-size: 0.88em;
            font-weight: 600;
            color: var(--gray-600);
            border-bottom: 2px solid transparent;
            margin-bottom: -2px;
            transition: all 0.2s;
            font-family: var(--font-sans);
        }
        .sub-tab:hover { color: var(--primary); }
        .sub-tab.active { color: var(--primary); border-bottom-color: var(--primary); }
        .sub-panel { display: none; padding: 24px 0; }
        .sub-panel.active { display: block; animation: fadeIn 0.2s ease; }

        /* ‚îÄ‚îÄ Cheat sheet grid ‚îÄ‚îÄ */
        .cheat-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 20px; margin: 20px 0; }
        .cheat-card {
            background: var(--gray-50);
            border: 1px solid var(--gray-200);
            border-radius: var(--radius);
            padding: 20px;
        }
        .cheat-card h4 { margin: 0 0 12px; font-size: 1em; display: flex; align-items: center; gap: 8px; }

        /* ‚îÄ‚îÄ Responsive ‚îÄ‚îÄ */
        @media (max-width: 768px) {
            .hero { padding: 30px 20px; }
            .hero h1 { font-size: 1.6em; }
            .tab-panel { padding: 20px; }
            .comparison { grid-template-columns: 1fr; }
            .main-tab { padding: 10px 14px; font-size: 0.82em; }
        }

        /* ‚îÄ‚îÄ Scrollbar ‚îÄ‚îÄ */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: var(--gray-100); }
        ::-webkit-scrollbar-thumb { background: var(--gray-400); border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--gray-600); }

        /* ‚îÄ‚îÄ Lists ‚îÄ‚îÄ */
        ul, ol { margin: 10px 0 16px 24px; }
        li { margin: 6px 0; }
        li::marker { color: var(--primary); }
    </style>
</head>
<body>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê HERO ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="hero">
    <h1>Salesforce Mock Service</h1>
    <p>Complete End-to-End Architecture, Configuration, and Operations Guide</p>
    <div class="hero-badges">
        <span class="hero-badge">WireMock 3.3.1</span>
        <span class="hero-badge">JSON Server</span>
        <span class="hero-badge">Docker Compose</span>
        <span class="hero-badge">HTTPS / TLS</span>
        <span class="hero-badge">Robot Framework</span>
    </div>
</div>

<div class="container">

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê TAB BAR ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="main-tabs" id="mainTabs">
    <button class="main-tab active" data-tab="overview">Overview</button>
    <button class="main-tab" data-tab="architecture">Architecture</button>
    <button class="main-tab" data-tab="components">Components</button>
    <button class="main-tab" data-tab="e2e-flow">E2E Flow</button>
    <button class="main-tab" data-tab="wiremock">WireMock Mappings</button>
    <button class="main-tab" data-tab="stateless-stateful">Stateless vs Stateful</button>
    <button class="main-tab" data-tab="https">HTTPS &amp; Certs</button>
    <button class="main-tab" data-tab="config">Configuration</button>
    <button class="main-tab" data-tab="operations">Operations</button>
    <button class="main-tab" data-tab="troubleshooting">Troubleshooting</button>
    <button class="main-tab" data-tab="mock-scope">Mock Testing Scope</button>
    <button class="main-tab" data-tab="cheatsheet">Cheat Sheet</button>
    <button class="main-tab" data-tab="custom-api-proposal" style="background:#9c27b0; color:white; font-weight:700; border-radius:6px 6px 0 0;">Custom API Server</button>
</div>

<!-- ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
     ‚ïë  TAB 1: OVERVIEW                                                ‚ïë
     ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù -->
<div class="tab-panel active" id="tab-overview">
    <h2>Why Does This Exist?</h2>
    <p class="section-subtitle">Test SnapLogic Salesforce pipelines without connecting to a real Salesforce org.</p>

    <div class="card-grid">
        <div class="card">
            <div class="card-icon">üí∏</div>
            <h4>API Rate Limits &amp; Costs</h4>
            <p>Every real API call counts against your quota and costs money. Mocks are free and unlimited.</p>
        </div>
        <div class="card">
            <div class="card-icon">üåê</div>
            <h4>No Internet Required</h4>
            <p>Everything runs locally in Docker. Develop and test offline, on a plane, anywhere.</p>
        </div>
        <div class="card">
            <div class="card-icon">‚ö°</div>
            <h4>Instant Responses</h4>
            <p>No network latency. Sub-millisecond responses from WireMock for rapid iteration.</p>
        </div>
        <div class="card">
            <div class="card-icon">üîí</div>
            <h4>No Real Credentials</h4>
            <p>No production secrets in CI/CD. The mock accepts any username and password.</p>
        </div>
        <div class="card">
            <div class="card-icon">üßπ</div>
            <h4>No Data Pollution</h4>
            <p>Tests don't leave garbage in a real org. Reset to clean state with <code>git checkout</code>.</p>
        </div>
        <div class="card">
            <div class="card-icon">üîÅ</div>
            <h4>Deterministic Tests</h4>
            <p>Same input always produces same output. No flaky failures from external dependencies.</p>
        </div>
    </div>

    <div class="info-box blue">
        <div class="info-box-title">üí° The Core Idea</div>
        <p>You built a <strong>local, Dockerized fake Salesforce</strong> that your SnapLogic Groundplex talks to as if it were the real thing. From SnapLogic's perspective, it cannot tell the difference.</p>
    </div>

    <h3>What's Included</h3>
    <table>
        <thead><tr><th>Component</th><th>Purpose</th><th>Why It Exists</th></tr></thead>
        <tbody>
            <tr><td><strong>WireMock</strong></td><td>API mock server</td><td>Intercepts all Salesforce API calls and returns fake responses</td></tr>
            <tr><td><strong>JSON Server</strong></td><td>Persistent data store</td><td>Provides real CRUD persistence when needed for workflow testing</td></tr>
            <tr><td><strong>Custom SSL Certificate</strong></td><td>HTTPS trust bridge</td><td>Lets Java/Groundplex trust WireMock's self-signed certificate</td></tr>
            <tr><td><strong>Static Mappings</strong></td><td>Predefined API responses</td><td>OAuth tokens, validation queries, describe metadata, CRUD responses</td></tr>
            <tr><td><strong>Environment Config</strong></td><td>Credentials &amp; ports</td><td>Configures SnapLogic to point at the mock instead of real Salesforce</td></tr>
            <tr><td><strong>Makefile Targets</strong></td><td>Operations automation</td><td>One-command start, stop, status, test, and certificate management</td></tr>
        </tbody>
    </table>

    <h3 style="margin-top: 36px;">Why Mock Services in the Automation World</h3>
    <p>Mock services are <strong>not just prechecks</strong> ‚Äî they are a core practice in modern automation. Here are the 7 real reasons:</p>

    <div class="card-grid">
        <div class="card" style="border-left: 4px solid var(--primary);">
            <h4>&#x2460; CI/CD Speed ‚Äî The #1 Reason</h4>
            <p>Every code push triggers tests. Real APIs = <strong>5-15 min/run</strong>. Mocks = <strong>30 seconds/run</strong>. With 50 devs √ó 10 pushes/day, that's the difference between 7,500 minutes and 250 minutes of wait time daily.</p>
        </div>
        <div class="card" style="border-left: 4px solid var(--primary);">
            <h4>&#x2461; Parallel Development</h4>
            <p>Don't wait for the Salesforce admin, security team, or DevOps to provision sandboxes. <strong>Your team keeps building</strong> while others catch up. No blocking, no waiting.</p>
        </div>
        <div class="card" style="border-left: 4px solid var(--primary);">
            <h4>&#x2462; Test Isolation</h4>
            <p>Shared sandboxes are a nightmare ‚Äî one dev's test breaks another's. With mocks, <strong>each developer/CI run gets its own WireMock</strong>. No conflicts, no data pollution.</p>
        </div>
        <div class="card" style="border-left: 4px solid var(--primary);">
            <h4>&#x2463; Cost Savings</h4>
            <p>Salesforce API limits cost real money. Exceeding them = blocked access or extra charges. <strong>Mocks are $0</strong>, unlimited, spin up 100 instances ‚Äî nobody cares.</p>
        </div>
        <div class="card" style="border-left: 4px solid var(--primary);">
            <h4>&#x2464; Error &amp; Edge Case Testing</h4>
            <p>How do you test a 500 error or a 30-second timeout from real Salesforce? <strong>You can't.</strong> With mocks, add a mapping that returns errors, delays, or malformed JSON. Test the unhappy path!</p>
        </div>
        <div class="card" style="border-left: 4px solid var(--primary);">
            <h4>&#x2465; Offline Development</h4>
            <p>Airplane, VPN down, SF maintenance, weekend? <strong>Mocks work everywhere</strong>, no internet needed. New developer day 1? No credentials needed ‚Äî just <code>make salesforce-mock-start</code>.</p>
        </div>
        <div class="card" style="border-left: 4px solid var(--primary);">
            <h4>&#x2466; Contract Testing</h4>
            <p>Your WireMock mapping <strong>IS the contract</strong> ‚Äî it documents what your pipeline expects. When Salesforce changes their API, update the mock first, see if your pipeline breaks, fix it, then switch.</p>
        </div>
    </div>

    <h4 style="margin-top: 24px;">The Full Picture</h4>
    <pre><code>&#x250C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2510;
&#x2502;                 WHY TEAMS USE MOCKS                            &#x2502;
&#x251C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2524;
&#x2502;                                                                &#x2502;
&#x2502;  <span class="hl-number">&#x2460;</span> CI/CD Speed         <span class="hl-string">"Tests run in seconds, not minutes"</span>    &#x2502;
&#x2502;  <span class="hl-number">&#x2461;</span> Parallel Dev        <span class="hl-string">"Don't wait for other teams"</span>           &#x2502;
&#x2502;  <span class="hl-number">&#x2462;</span> Test Isolation      <span class="hl-string">"No shared sandbox conflicts"</span>          &#x2502;
&#x2502;  <span class="hl-number">&#x2463;</span> Cost Savings        <span class="hl-string">"No API call charges"</span>                  &#x2502;
&#x2502;  <span class="hl-number">&#x2464;</span> Error Testing       <span class="hl-string">"Simulate failures you can't in prod"</span> &#x2502;
&#x2502;  <span class="hl-number">&#x2465;</span> Offline Dev         <span class="hl-string">"Work anywhere, anytime"</span>               &#x2502;
&#x2502;  <span class="hl-number">&#x2466;</span> Contract Testing    <span class="hl-string">"Document what your code expects"</span>      &#x2502;
&#x2502;                                                                &#x2502;
&#x2502;  And yes, also:                                                &#x2502;
&#x2502;  <span class="hl-number">&#x2467;</span> Prechecks           <span class="hl-string">"Verify plumbing before real APIs"</span>     &#x2502;
&#x2502;                                                                &#x2502;
&#x2514;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2518;</code></pre>

    <div class="info-box purple" style="margin-top: 16px;">
        <div class="info-box-title">&#x1F4A1; Prechecks are just one benefit</div>
        <p>The real value is <strong>speed</strong> (seconds vs minutes in CI/CD), <strong>isolation</strong> (no shared sandbox conflicts), <strong>cost</strong> ($0 vs API limits), and the ability to <strong>test failure scenarios</strong> that are impossible to reproduce with real APIs.</p>
    </div>

    <h3 style="margin-top: 24px;">How This Project Uses Mocks</h3>
    <table>
        <thead><tr><th>Reason</th><th>How Your Setup Uses It</th></tr></thead>
        <tbody>
            <tr><td><strong>CI/CD Speed</strong></td><td><code>make salesforce-mock-start</code> &#x2192; <code>make robot-run-tests</code> runs in seconds in any CI environment</td></tr>
            <tr><td><strong>Parallel Dev</strong></td><td>Developers build/test Salesforce pipelines without a real sandbox</td></tr>
            <tr><td><strong>Test Isolation</strong></td><td>Each developer/CI run gets its own Docker WireMock ‚Äî no conflicts</td></tr>
            <tr><td><strong>Cost</strong></td><td>Zero API calls to Salesforce ‚Äî free and unlimited</td></tr>
            <tr><td><strong>Prechecks</strong></td><td>Validates OAuth flow, account config, URL format, SSL trust chain</td></tr>
        </tbody>
    </table>

    <div class="info-box green" style="margin-top: 16px;">
        <div class="info-box-title">&#x1F680; Next Level</div>
        <p>You could add WireMock mappings that return <code>500 errors</code>, <code>rate limit responses</code>, or <code>timeout delays</code> to test how your pipelines handle failures. That would be the next level of mock testing maturity.</p>
    </div>
</div>

<!-- ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
     ‚ïë  TAB 2: ARCHITECTURE                                           ‚ïë
     ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù -->
<div class="tab-panel" id="tab-architecture">
    <h2>Architecture Overview</h2>
    <p class="section-subtitle">How all the pieces fit together in Docker</p>

    <h3>System Architecture Diagram</h3>
    <div class="arch-diagram">
        <svg width="900" height="620" viewBox="0 0 900 620" xmlns="http://www.w3.org/2000/svg" style="font-family: -apple-system, sans-serif;">
            <!-- Background -->
            <rect x="10" y="10" width="880" height="600" rx="12" fill="#f8f9fa" stroke="#dee2e6" stroke-width="2"/>
            <text x="450" y="38" text-anchor="middle" font-size="14" fill="#6c757d" font-weight="600">YOUR MACHINE (Docker Host)</text>

            <!-- Docker Network -->
            <rect x="30" y="200" width="840" height="390" rx="10" fill="#e3f2fd" stroke="#1976d2" stroke-width="2" stroke-dasharray="8,4"/>
            <text x="450" y="224" text-anchor="middle" font-size="13" fill="#1565c0" font-weight="600">Docker Network: snaplogicnet (bridge)</text>

            <!-- Robot Framework -->
            <rect x="50" y="60" width="200" height="70" rx="8" fill="#fff" stroke="#7b1fa2" stroke-width="2"/>
            <text x="150" y="88" text-anchor="middle" font-size="13" font-weight="600" fill="#7b1fa2">ü§ñ Robot Framework</text>
            <text x="150" y="108" text-anchor="middle" font-size="11" fill="#666">Test Orchestrator</text>

            <!-- SnapLogic Cloud -->
            <rect x="350" y="60" width="200" height="70" rx="8" fill="#fff" stroke="#0070d2" stroke-width="2"/>
            <text x="450" y="88" text-anchor="middle" font-size="13" font-weight="600" fill="#0070d2">‚òÅÔ∏è SnapLogic Cloud</text>
            <text x="450" y="108" text-anchor="middle" font-size="11" fill="#666">Control Plane</text>

            <!-- Arrow: Robot ‚Üí Cloud -->
            <line x1="250" y1="95" x2="350" y2="95" stroke="#999" stroke-width="2" marker-end="url(#arrowhead)"/>
            <text x="300" y="87" text-anchor="middle" font-size="10" fill="#999">1. Trigger</text>

            <!-- Groundplex -->
            <rect x="60" y="250" width="350" height="120" rx="8" fill="#fff" stroke="#2e7d32" stroke-width="2"/>
            <text x="235" y="278" text-anchor="middle" font-size="13" font-weight="600" fill="#2e7d32">üü¢ Groundplex Container</text>
            <text x="235" y="296" text-anchor="middle" font-size="11" fill="#666">snaplogic-groundplex</text>
            <!-- JCC -->
            <rect x="80" y="310" width="130" height="44" rx="6" fill="#e8f5e9" stroke="#2e7d32" stroke-width="1"/>
            <text x="145" y="328" text-anchor="middle" font-size="11" font-weight="600" fill="#2e7d32">JCC Runtime</text>
            <text x="145" y="343" text-anchor="middle" font-size="10" fill="#666">SnapLogic Node</text>
            <!-- Truststore -->
            <rect x="230" y="310" width="160" height="44" rx="6" fill="#e8f5e9" stroke="#2e7d32" stroke-width="1"/>
            <text x="310" y="328" text-anchor="middle" font-size="11" font-weight="600" fill="#2e7d32">Java Truststore</text>
            <text x="310" y="343" text-anchor="middle" font-size="10" fill="#666">cacerts + WireMock cert</text>

            <!-- Arrow: Cloud ‚Üí Groundplex -->
            <line x1="450" y1="130" x2="235" y2="250" stroke="#999" stroke-width="2" marker-end="url(#arrowhead)"/>
            <text x="370" y="185" text-anchor="middle" font-size="10" fill="#999">2. Execute</text>

            <!-- WireMock -->
            <rect x="480" y="250" width="370" height="120" rx="8" fill="#fff" stroke="#1565c0" stroke-width="2"/>
            <text x="665" y="278" text-anchor="middle" font-size="13" font-weight="600" fill="#1565c0">üîµ WireMock Container</text>
            <text x="665" y="296" text-anchor="middle" font-size="11" fill="#666">salesforce-api-mock  :8080 / :8443</text>
            <!-- Static -->
            <rect x="500" y="310" width="140" height="44" rx="6" fill="#e3f2fd" stroke="#1565c0" stroke-width="1"/>
            <text x="570" y="328" text-anchor="middle" font-size="11" font-weight="600" fill="#1565c0">Static Mappings</text>
            <text x="570" y="343" text-anchor="middle" font-size="10" fill="#666">01-05.json files</text>
            <!-- Proxy -->
            <rect x="660" y="310" width="170" height="44" rx="6" fill="#fff3e0" stroke="#e65100" stroke-width="1" stroke-dasharray="4,2"/>
            <text x="745" y="328" text-anchor="middle" font-size="11" font-weight="600" fill="#e65100">Proxy Mappings</text>
            <text x="745" y="343" text-anchor="middle" font-size="10" fill="#999">disabled currently</text>

            <!-- Arrow: Groundplex ‚Üí WireMock -->
            <line x1="410" y1="310" x2="480" y2="310" stroke="#1565c0" stroke-width="2.5" marker-end="url(#arrowhead-blue)"/>
            <text x="445" y="302" text-anchor="middle" font-size="10" fill="#1565c0" font-weight="600">3. HTTPS</text>

            <!-- JSON Server -->
            <rect x="530" y="430" width="310" height="120" rx="8" fill="#fff" stroke="#f57c00" stroke-width="2"/>
            <text x="685" y="458" text-anchor="middle" font-size="13" font-weight="600" fill="#f57c00">üü† JSON Server Container</text>
            <text x="685" y="476" text-anchor="middle" font-size="11" fill="#666">salesforce-json-mock  :80 / :8082</text>
            <!-- DB -->
            <rect x="580" y="490" width="210" height="44" rx="6" fill="#fff8e1" stroke="#f57c00" stroke-width="1"/>
            <text x="685" y="508" text-anchor="middle" font-size="11" font-weight="600" fill="#f57c00">salesforce-db.json</text>
            <text x="685" y="523" text-anchor="middle" font-size="10" fill="#666">accounts, contacts, opportunities</text>

            <!-- Arrow: WireMock ‚Üí JSON Server (dashed) -->
            <line x1="745" y1="370" x2="685" y2="430" stroke="#f57c00" stroke-width="1.5" stroke-dasharray="6,3" marker-end="url(#arrowhead-orange)"/>
            <text x="740" y="400" text-anchor="middle" font-size="10" fill="#f57c00">4. If proxy</text>

            <!-- Robot ‚Üí verify arrow -->
            <line x1="100" y1="130" x2="100" y2="250" stroke="#7b1fa2" stroke-width="1.5" stroke-dasharray="6,3" marker-end="url(#arrowhead)"/>
            <text x="108" y="190" font-size="10" fill="#7b1fa2">5. Verify</text>

            <!-- Arrow defs -->
            <defs>
                <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto"><polygon points="0 0, 10 3.5, 0 7" fill="#999"/></marker>
                <marker id="arrowhead-blue" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto"><polygon points="0 0, 10 3.5, 0 7" fill="#1565c0"/></marker>
                <marker id="arrowhead-orange" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto"><polygon points="0 0, 10 3.5, 0 7" fill="#f57c00"/></marker>
            </defs>
        </svg>
    </div>

    <h3>Component Table</h3>
    <table>
        <thead><tr><th>Component</th><th>Container Name</th><th>Ports (Host:Container)</th><th>Image</th><th>Role</th></tr></thead>
        <tbody>
            <tr><td><strong>WireMock</strong></td><td><code>salesforce-api-mock</code></td><td><code>8089:8080</code> (HTTP)<br><code>8443:8443</code> (HTTPS)</td><td><code>wiremock/wiremock:3.3.1</code></td><td>Pretends to be Salesforce REST API</td></tr>
            <tr><td><strong>JSON Server</strong></td><td><code>salesforce-json-mock</code></td><td><code>8082:80</code></td><td><code>clue/json-server</code></td><td>Persistent CRUD data store</td></tr>
            <tr><td><strong>Groundplex</strong></td><td><code>snaplogic-groundplex</code></td><td>Various</td><td>SnapLogic image</td><td>SnapLogic execution runtime (JCC)</td></tr>
            <tr><td><strong>Tools</strong></td><td><code>snaplogic-test-example-tools-container</code></td><td>None</td><td>Custom build</td><td>Robot Framework test runner</td></tr>
        </tbody>
    </table>

    <h3>Docker Network Topology</h3>
    <div class="info-box blue">
        <div class="info-box-title">üåê All containers share one network: <code>snaplogicnet</code></div>
        <p>Containers communicate using <strong>container names as hostnames</strong>. For example, Groundplex connects to <code>https://salesforce-api-mock:8443</code>. This is why the SSL certificate must include <code>salesforce-api-mock</code> as a Subject Alternative Name.</p>
    </div>
    <pre><code><span class="hl-property">snaplogicnet</span> (bridge)
‚îú‚îÄ‚îÄ <span class="hl-url">salesforce-api-mock</span>      ‚Üê WireMock  (internal: 8080, 8443)
‚îú‚îÄ‚îÄ <span class="hl-url">salesforce-json-mock</span>     ‚Üê JSON Server (internal: 80)
‚îú‚îÄ‚îÄ <span class="hl-url">snaplogic-groundplex</span>     ‚Üê Groundplex (connects via container names)
‚îî‚îÄ‚îÄ <span class="hl-url">snaplogic-test-example-tools-container</span> ‚Üê Robot Framework</code></pre>
</div>

<!-- ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
     ‚ïë  TAB 3: COMPONENTS                                             ‚ïë
     ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù -->
<div class="tab-panel" id="tab-components">
    <h2>Every Component Explained</h2>
    <p class="section-subtitle">What each piece is, why it exists, and how it works</p>

    <div class="sub-tabs" data-group="components">
        <button class="sub-tab active" data-subtab="comp-wiremock">WireMock</button>
        <button class="sub-tab" data-subtab="comp-jsonserver">JSON Server</button>
        <button class="sub-tab" data-subtab="comp-groundplex">Groundplex</button>
        <button class="sub-tab" data-subtab="comp-robot">Robot Framework</button>
        <button class="sub-tab" data-subtab="comp-cert">HTTPS Certificate</button>
    </div>

    <!-- WireMock -->
    <div class="sub-panel active" id="subtab-comp-wiremock">
        <h3>üîµ WireMock &mdash; The Fake Salesforce</h3>
        <p><strong>What:</strong> An open-source API mock server that impersonates the Salesforce REST API.</p>
        <p><strong>Why:</strong> SnapLogic's Salesforce Snap is hardcoded to talk to Salesforce endpoints (<code>/services/oauth2/token</code>, <code>/services/data/vXX.0/...</code>). You cannot change these paths. So you need something that responds at those exact paths.</p>

        <h4>How It Works</h4>
        <ol>
            <li>Loads JSON mapping files from <code>wiremock/mappings/</code> at startup</li>
            <li>When a request arrives, matches it against mappings using method + URL pattern + query params</li>
            <li>Returns the corresponding predefined JSON response</li>
            <li>Supports response templating (dynamic tokens, timestamps, random values)</li>
        </ol>

        <h4>Configuration Flags</h4>
        <pre><code><span class="hl-property">--port</span>=8080                    <span class="hl-comment"># HTTP listener</span>
<span class="hl-property">--https-port</span>=8443              <span class="hl-comment"># HTTPS listener</span>
<span class="hl-property">--https-keystore</span>=...p12        <span class="hl-comment"># Custom SSL certificate</span>
<span class="hl-property">--keystore-password</span>=password   <span class="hl-comment"># Keystore password</span>
<span class="hl-property">--global-response-templating</span>   <span class="hl-comment"># Enable Handlebars templating</span>
<span class="hl-property">--verbose</span>                      <span class="hl-comment"># Detailed logging</span>
<span class="hl-property">--enable-stub-cors</span>             <span class="hl-comment"># Allow cross-origin requests</span>
<span class="hl-property">--preserve-host-header</span>         <span class="hl-comment"># Keep original Host header</span></code></pre>

        <h4>Admin Endpoints (for debugging)</h4>
        <table>
            <thead><tr><th>Endpoint</th><th>Purpose</th></tr></thead>
            <tbody>
                <tr><td><code>http://localhost:8089/__admin/health</code></td><td>Health check</td></tr>
                <tr><td><code>http://localhost:8089/__admin/mappings</code></td><td>View all loaded mappings</td></tr>
                <tr><td><code>http://localhost:8089/__admin/requests</code></td><td>View request journal</td></tr>
                <tr><td><code>http://localhost:8089/__admin/requests/unmatched</code></td><td>View requests that didn't match any mapping</td></tr>
            </tbody>
        </table>
    </div>

    <!-- JSON Server -->
    <div class="sub-panel" id="subtab-comp-jsonserver">
        <h3>üü† JSON Server &mdash; The Persistent Database</h3>
        <p><strong>What:</strong> A lightweight Node.js application that creates a full REST API from a JSON file.</p>
        <p><strong>Why:</strong> WireMock is stateless &mdash; it cannot remember data between requests. If your pipeline does <code>Create Account &rarr; Query Account</code>, the query will not find what was just created. JSON Server solves this by providing real data persistence.</p>

        <h4>How It Works</h4>
        <div class="steps">
            <div class="step"><h4>Read Data File</h4><p>Reads <code>salesforce-db.json</code> at startup and parses the JSON structure</p></div>
            <div class="step"><h4>Create REST Endpoints</h4><p>Creates endpoints from top-level keys: <code>accounts</code> &rarr; <code>GET/POST/PUT/PATCH/DELETE /accounts</code></p></div>
            <div class="step"><h4>Handle Write Operations</h4><p>Every POST, PUT, PATCH, DELETE updates the JSON file on disk in real time</p></div>
            <div class="step"><h4>Watch for Changes</h4><p>The <code>--watch</code> flag monitors for external file changes and reloads automatically</p></div>
        </div>

        <div class="info-box green">
            <div class="info-box-title">üìÅ Volume Mount</div>
            <p><code>./json-db:/data</code> &mdash; the JSON file on your host is the same file the container reads/writes. Changes survive container restarts. Reset with <code>git checkout docker/salesforce/json-db/salesforce-db.json</code>.</p>
        </div>

        <p><strong>Image:</strong> <code>clue/json-server</code> with <code>platform: linux/amd64</code> for Apple Silicon compatibility.</p>
    </div>

    <!-- Groundplex -->
    <div class="sub-panel" id="subtab-comp-groundplex">
        <h3>üü¢ Groundplex &mdash; The SnapLogic Runtime</h3>
        <p><strong>What:</strong> A SnapLogic execution node (JCC &mdash; Java Component Container) running as a Docker container that actually executes your Salesforce Snap pipelines.</p>

        <div class="info-box yellow">
            <div class="info-box-title">‚ö†Ô∏è Why Groundplex Matters for This Setup</div>
            <ul>
                <li>Groundplex runs <strong>Java</strong> internally</li>
                <li>Java has a <strong>truststore</strong> (<code>cacerts</code>) with all trusted SSL certificates</li>
                <li>By default, Java trusts only well-known CAs (DigiCert, Let's Encrypt, etc.)</li>
                <li>WireMock's <strong>self-signed certificate is NOT in that list</strong></li>
                <li>So you must <strong>manually import</strong> WireMock's certificate into the truststore</li>
            </ul>
        </div>

        <h4>Key Paths Inside the Container</h4>
        <pre><code><span class="hl-url">/opt/snaplogic/pkgs/jdk-11.0.24+8-jre/bin/keytool</span>         <span class="hl-comment"># Certificate import tool</span>
<span class="hl-url">/opt/snaplogic/pkgs/jdk-11.0.24+8-jre/lib/security/cacerts</span>  <span class="hl-comment"># Java truststore</span>
<span class="hl-url">/opt/snaplogic/bin/jcc.sh</span>                                    <span class="hl-comment"># JCC service control</span>
<span class="hl-url">/opt/snaplogic/run/log/jcc.log</span>                               <span class="hl-comment"># JCC logs</span></code></pre>
    </div>

    <!-- Robot Framework -->
    <div class="sub-panel" id="subtab-comp-robot">
        <h3>ü§ñ Robot Framework &mdash; The Test Orchestrator</h3>
        <p><strong>What:</strong> A Python-based test automation framework that orchestrates the entire test lifecycle.</p>

        <h4>What It Does</h4>
        <ol>
            <li>Waits for Groundplex to be ready (<code>Wait Until Plex Status Is Up</code>)</li>
            <li>Creates a Salesforce account in SnapLogic using the mock credentials</li>
            <li>Imports pipelines and creates triggered tasks</li>
            <li>Executes pipelines and verifies results</li>
        </ol>

        <h4>Test File: <code>sfdc.robot</code></h4>
        <pre><code><span class="hl-keyword">*** Test Cases ***</span>
Create Account
    [Tags]    sfdc    regression
    [Template]    Create Account From Template
    <span class="hl-value">${ACCOUNT_LOCATION_PATH}</span>    <span class="hl-value">${SALESFORCE_ACCOUNT_PAYLOAD_FILE_NAME}</span>    <span class="hl-value">${SALESFORCE_ACCOUNT_NAME}</span></code></pre>
        <p>This creates a Salesforce account in SnapLogic Designer that points to <code>https://salesforce-api-mock:8443</code> instead of real Salesforce.</p>
    </div>

    <!-- Certificate -->
    <div class="sub-panel" id="subtab-comp-cert">
        <h3>üîê Custom HTTPS Certificate &mdash; The Trust Bridge</h3>
        <p><strong>What:</strong> A self-signed SSL certificate stored as <code>custom-keystore.p12</code> (PKCS12 format).</p>

        <h4>Two Problems It Solves</h4>
        <div class="comparison">
            <div class="comparison-col stateless" style="border-color: var(--danger);">
                <h4 style="color: var(--danger);">Problem 1: Unknown Certificate</h4>
                <p>Java refuses HTTPS connections to servers with certificates it doesn't recognize. WireMock's cert is self-signed, not issued by a trusted CA.</p>
            </div>
            <div class="comparison-col stateless" style="border-color: var(--danger);">
                <h4 style="color: var(--danger);">Problem 2: Hostname Mismatch</h4>
                <p>WireMock's default cert says <code>CN=localhost</code>, but Groundplex connects using <code>salesforce-api-mock</code>. Java checks hostname &rarr; mismatch &rarr; rejected.</p>
            </div>
        </div>

        <h4>The Solution: Custom Certificate with SANs</h4>
        <pre><code><span class="hl-property">Subject Alternative Names (SANs):</span>
  <span class="hl-url">DNS:salesforce-api-mock</span>   <span class="hl-comment"># Docker container name (primary)</span>
  <span class="hl-url">DNS:localhost</span>              <span class="hl-comment"># Local testing access</span>
  <span class="hl-url">DNS:salesforce-mock</span>        <span class="hl-comment"># Alternative service name</span>
  <span class="hl-url">IP:127.0.0.1</span>              <span class="hl-comment"># IP-based access</span></code></pre>

        <p>This certificate is <strong>used by WireMock</strong> to serve HTTPS and <strong>imported into Groundplex's Java truststore</strong> so Java trusts it.</p>
    </div>
</div>

<!-- ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
     ‚ïë  TAB 4: E2E FLOW                                               ‚ïë
     ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù -->
<div class="tab-panel" id="tab-e2e-flow">
    <h2>End-to-End Flow: How a Test Actually Runs</h2>
    <p class="section-subtitle">Six phases from startup to verification</p>

    <div class="sub-tabs" data-group="e2e">
        <button class="sub-tab active" data-subtab="e2e-phase1">Phase 1: Startup</button>
        <button class="sub-tab" data-subtab="e2e-phase2">Phase 2: Account Creation</button>
        <button class="sub-tab" data-subtab="e2e-phase3">Phase 3: OAuth</button>
        <button class="sub-tab" data-subtab="e2e-phase4">Phase 4: Validation</button>
        <button class="sub-tab" data-subtab="e2e-phase5">Phase 5: Pipeline Ops</button>
        <button class="sub-tab" data-subtab="e2e-phase6">Phase 6: Verification</button>
    </div>

    <div class="sub-panel active" id="subtab-e2e-phase1">
        <h3>Phase 1: Infrastructure Startup</h3>
        <div class="info-box blue"><div class="info-box-title">Command: <code>make salesforce-mock-start</code></div></div>
        <pre><code><span class="hl-keyword">make salesforce-mock-start</span>
    ‚îÇ
    ‚îú‚îÄ‚îÄ <span class="hl-method">docker compose --profile salesforce-dev up -d</span>
    ‚îÇ       ‚îÇ
    ‚îÇ       ‚îú‚îÄ‚îÄ Starts <span class="hl-url">salesforce-api-mock</span> (WireMock)
    ‚îÇ       ‚îÇ     ‚îú‚îÄ‚îÄ Loads wiremock/mappings/*.json (<span class="hl-number">5</span> mapping files)
    ‚îÇ       ‚îÇ     ‚îú‚îÄ‚îÄ Mounts wiremock/certs/custom-keystore.p12
    ‚îÇ       ‚îÇ     ‚îú‚îÄ‚îÄ Starts HTTP on <span class="hl-number">:8080</span> and HTTPS on <span class="hl-number">:8443</span>
    ‚îÇ       ‚îÇ     ‚îî‚îÄ‚îÄ Health check: curl http://localhost:8080/__admin/health
    ‚îÇ       ‚îÇ
    ‚îÇ       ‚îî‚îÄ‚îÄ Starts <span class="hl-url">salesforce-json-mock</span> (JSON Server)
    ‚îÇ             ‚îú‚îÄ‚îÄ Mounts json-db/ directory
    ‚îÇ             ‚îú‚îÄ‚îÄ Reads salesforce-db.json
    ‚îÇ             ‚îú‚îÄ‚îÄ Creates REST endpoints: /accounts, /contacts, /opportunities
    ‚îÇ             ‚îî‚îÄ‚îÄ Starts watching for file changes
    ‚îÇ
    ‚îî‚îÄ‚îÄ <span class="hl-comment">sleep 5</span> (wait for initialization)</code></pre>
        <p>The <code>DOCKER_COMPOSE</code> variable from <code>Makefile.common</code> expands to include all <code>--env-file</code> flags, injecting port numbers from <code>.env.salesforce</code> into the Docker Compose service definitions.</p>
    </div>

    <div class="sub-panel" id="subtab-e2e-phase2">
        <h3>Phase 2: SnapLogic Account Creation</h3>
        <p><strong>Triggered by:</strong> Robot Framework test case <code>Create Account</code> in <code>sfdc.robot</code></p>
        <pre><code><span class="hl-keyword">Robot Framework</span>
    ‚îÇ
    ‚îú‚îÄ‚îÄ Reads account payload template: <span class="hl-url">acc_salesforce.json</span>
    ‚îÇ
    ‚îú‚îÄ‚îÄ Substitutes environment variables:
    ‚îÇ     <span class="hl-property">SALESFORCE_LOGIN_URL</span>    <span class="hl-arrow">‚Üí</span> <span class="hl-string">https://salesforce-api-mock:8443</span>
    ‚îÇ     <span class="hl-property">SALESFORCE_USERNAME</span>     <span class="hl-arrow">‚Üí</span> <span class="hl-string">slim@snaplogic.com</span>
    ‚îÇ     <span class="hl-property">SALESFORCE_PASSWORD</span>     <span class="hl-arrow">‚Üí</span> <span class="hl-string">test</span>
    ‚îÇ     <span class="hl-property">SALESFORCE_ACCOUNT_NAME</span> <span class="hl-arrow">‚Üí</span> <span class="hl-string">sfdc_acct</span>
    ‚îÇ
    ‚îî‚îÄ‚îÄ Calls SnapLogic API: <span class="hl-method">POST</span> /api/1/rest/public/account/...
          ‚îî‚îÄ‚îÄ Creates a Salesforce account named <span class="hl-string">"sfdc_acct"</span>
              pointing to <span class="hl-url">https://salesforce-api-mock:8443</span></code></pre>
    </div>

    <div class="sub-panel" id="subtab-e2e-phase3">
        <h3>Phase 3: OAuth Authentication</h3>
        <p><strong>Triggered by:</strong> SnapLogic when a pipeline uses the Salesforce account. This is hardcoded &mdash; you cannot skip it.</p>
        <pre><code><span class="hl-keyword">Groundplex (JCC)</span>
    ‚îÇ
    ‚îú‚îÄ‚îÄ Pipeline starts, Salesforce Snap initializes
    ‚îú‚îÄ‚îÄ Reads account config: loginUrl = <span class="hl-url">https://salesforce-api-mock:8443</span>
    ‚îÇ
    ‚îú‚îÄ‚îÄ Java checks SSL certificate:
    ‚îÇ     ‚îú‚îÄ‚îÄ Connects to salesforce-api-mock:8443
    ‚îÇ     ‚îú‚îÄ‚îÄ Receives self-signed certificate
    ‚îÇ     ‚îú‚îÄ‚îÄ Checks truststore ‚Üí finds <span class="hl-string">"wiremock-salesforce"</span> alias <span class="hl-success">‚úÖ</span>
    ‚îÇ     ‚îú‚îÄ‚îÄ Checks hostname ‚Üí SANs include <span class="hl-string">"salesforce-api-mock"</span> <span class="hl-success">‚úÖ</span>
    ‚îÇ     ‚îî‚îÄ‚îÄ SSL handshake succeeds
    ‚îÇ
    ‚îî‚îÄ‚îÄ Sends OAuth request:
          <span class="hl-method">POST</span> https://salesforce-api-mock:8443/services/oauth2/token
          Body: grant_type=password&amp;username=slim@snaplogic.com&amp;password=test

<span class="hl-keyword">WireMock</span>
    ‚îÇ
    ‚îú‚îÄ‚îÄ Matches: <span class="hl-url">01-oauth-token.json</span> (priority 1)
    ‚îî‚îÄ‚îÄ Returns:
          {
            <span class="hl-property">"access_token"</span>: <span class="hl-string">"00D000000000000!mock.token.aB3kF9xR2mN7..."</span>,
            <span class="hl-property">"instance_url"</span>: <span class="hl-string">"https://salesforce-api-mock:8443"</span>,
            <span class="hl-property">"token_type"</span>:    <span class="hl-string">"Bearer"</span>,
            <span class="hl-property">"issued_at"</span>:     <span class="hl-string">"1738100000"</span>
          }</code></pre>
        <div class="info-box green">
            <div class="info-box-title">‚úÖ Result</div>
            <p>SnapLogic now has a Bearer token and stores the <code>instance_url</code> for all subsequent API calls. It believes it is talking to a real Salesforce org.</p>
        </div>
    </div>

    <div class="sub-panel" id="subtab-e2e-phase4">
        <h3>Phase 4: Account Validation</h3>
        <p><strong>Triggered by:</strong> SnapLogic when you click "Validate" on the account, or during pipeline initialization.</p>
        <pre><code><span class="hl-keyword">Groundplex</span> <span class="hl-arrow">‚Üí</span> <span class="hl-method">GET</span> /services/data/v52.0/query?q=<span class="hl-string">SELECT+Name+FROM+Account+LIMIT+1</span>

<span class="hl-keyword">WireMock</span>
    ‚îú‚îÄ‚îÄ Matches: <span class="hl-url">02-validation-query.json</span> (priority 5, exact query match)
    ‚îî‚îÄ‚îÄ Returns:
          {
            <span class="hl-property">"totalSize"</span>: <span class="hl-number">1</span>,
            <span class="hl-property">"done"</span>: <span class="hl-number">true</span>,
            <span class="hl-property">"records"</span>: [{
              <span class="hl-property">"Id"</span>: <span class="hl-string">"001000000000TEST01"</span>,
              <span class="hl-property">"Name"</span>: <span class="hl-string">"Validation Test Account"</span>
            }]
          }</code></pre>
        <div class="info-box purple">
            <div class="info-box-title">üîë Key Insight</div>
            <p>These two mappings (<strong>01-oauth-token</strong> + <strong>02-validation-query</strong>) are the <strong>absolute minimum</strong> needed for SnapLogic to believe it is connected to Salesforce. Everything else is for actual pipeline operations.</p>
        </div>
    </div>

    <div class="sub-panel" id="subtab-e2e-phase5">
        <h3>Phase 5: Pipeline Operations</h3>
        <p>Depending on what the pipeline does, different WireMock mappings are hit:</p>
        <table>
            <thead><tr><th>Operation</th><th>Request</th><th>Mapping</th><th>Response</th></tr></thead>
            <tbody>
                <tr>
                    <td><strong>Describe</strong></td>
                    <td><code>GET .../sobjects/Account/describe</code></td>
                    <td><code>03-describe-account.json</code></td>
                    <td>Account schema with 8 fields and picklist values</td>
                </tr>
                <tr>
                    <td><strong>Create</strong></td>
                    <td><code>POST .../sobjects/Account</code></td>
                    <td><code>04-create-account.json</code></td>
                    <td><code>{"id":"001000000000TEST01","success":true}</code></td>
                </tr>
                <tr>
                    <td><strong>Query</strong></td>
                    <td><code>GET .../query?q=...Account...</code></td>
                    <td><code>05-read-account-query.json</code></td>
                    <td>Static test account record</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="sub-panel" id="subtab-e2e-phase6">
        <h3>Phase 6: Test Verification</h3>
        <pre><code><span class="hl-keyword">Robot Framework</span>
    ‚îÇ
    ‚îú‚îÄ‚îÄ Checks pipeline execution status (<span class="hl-success">Completed</span> / <span class="hl-error">Failed</span>)
    ‚îú‚îÄ‚îÄ Verifies output documents match expected format
    ‚îú‚îÄ‚îÄ Optionally compares CSV output against expected files
    ‚îî‚îÄ‚îÄ Reports pass/fail</code></pre>
    </div>
</div>

<!-- ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
     ‚ïë  TAB 5: WIREMOCK MAPPINGS                                      ‚ïë
     ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù -->
<div class="tab-panel" id="tab-wiremock">
    <h2>WireMock: How Request Matching Works</h2>
    <p class="section-subtitle">The matching algorithm and every mapping file explained</p>

    <h3>The Matching Algorithm</h3>
    <pre><code>Request arrives (e.g., <span class="hl-method">POST</span> /services/oauth2/token)
    ‚îÇ
    ‚îú‚îÄ‚îÄ <span class="hl-number">1.</span> Load ALL mapping files from /home/wiremock/mappings/
    ‚îÇ
    ‚îú‚îÄ‚îÄ <span class="hl-number">2.</span> Sort mappings by <span class="hl-keyword">PRIORITY</span> (lower number = higher priority, default = 5)
    ‚îÇ
    ‚îú‚îÄ‚îÄ <span class="hl-number">3.</span> For EACH mapping (in priority order):
    ‚îÇ       ‚îú‚îÄ‚îÄ Does <span class="hl-property">HTTP METHOD</span> match?        <span class="hl-comment"># POST == POST?</span>
    ‚îÇ       ‚îú‚îÄ‚îÄ Does <span class="hl-property">URL PATTERN</span> match?       <span class="hl-comment"># urlPath / urlPathPattern / url</span>
    ‚îÇ       ‚îú‚îÄ‚îÄ Do <span class="hl-property">QUERY PARAMETERS</span> match?   <span class="hl-comment"># equalTo / contains / matches</span>
    ‚îÇ       ‚îú‚îÄ‚îÄ Do <span class="hl-property">HEADERS</span> match?            <span class="hl-comment"># only if specified</span>
    ‚îÇ       ‚îî‚îÄ‚îÄ Does <span class="hl-property">BODY</span> match?             <span class="hl-comment"># only if specified</span>
    ‚îÇ
    ‚îú‚îÄ‚îÄ <span class="hl-number">4.</span> FIRST full match <span class="hl-arrow">‚Üí</span> return that mapping's response
    ‚îÇ
    ‚îî‚îÄ‚îÄ <span class="hl-number">5.</span> NO match found <span class="hl-arrow">‚Üí</span> return <span class="hl-error">404 Not Found</span></code></pre>

    <h3>All Mapping Files</h3>

    <!-- Mapping 01 -->
    <div class="mapping-card">
        <div class="mapping-header" onclick="this.nextElementSibling.style.display = this.nextElementSibling.style.display === 'none' ? 'block' : 'none'">
            <h4><span class="mapping-badge badge-post">POST</span> 01-oauth-token.json &mdash; OAuth Authentication</h4>
            <span class="priority-badge">Priority 1</span>
        </div>
        <div class="mapping-body">
            <table>
                <tr><td><strong>URL Pattern</strong></td><td><code>/services/oauth2/token</code></td></tr>
                <tr><td><strong>Query Params</strong></td><td>None required</td></tr>
                <tr><td><strong>Response Status</strong></td><td>200</td></tr>
                <tr><td><strong>Why It Exists</strong></td><td>Every Salesforce Snap must authenticate. Accepts ANY credentials and returns a valid-looking token.</td></tr>
            </table>
            <span class="code-label">Response (with Handlebars templating)</span>
            <pre><code>{
  <span class="hl-property">"access_token"</span>: <span class="hl-string">"00D000000000000!mock.token.{{randomValue type='ALPHANUMERIC' length=32}}"</span>,
  <span class="hl-property">"instance_url"</span>: <span class="hl-string">"https://salesforce-api-mock:8443"</span>,
  <span class="hl-property">"issued_at"</span>: <span class="hl-string">"{{now epoch}}"</span>,
  <span class="hl-property">"token_type"</span>: <span class="hl-string">"Bearer"</span>
}</code></pre>
        </div>
    </div>

    <!-- Mapping 02 -->
    <div class="mapping-card">
        <div class="mapping-header" onclick="this.nextElementSibling.style.display = this.nextElementSibling.style.display === 'none' ? 'block' : 'none'">
            <h4><span class="mapping-badge badge-get">GET</span> 02-validation-query.json &mdash; Account Validation</h4>
            <span class="priority-badge">Priority 5</span>
        </div>
        <div class="mapping-body">
            <table>
                <tr><td><strong>URL Path</strong></td><td><code>/services/data/v52.0/query/</code> (exact match)</td></tr>
                <tr><td><strong>Query Params</strong></td><td><code>q</code> equalTo <code>SELECT Name FROM Account LIMIT 1</code></td></tr>
                <tr><td><strong>Response Status</strong></td><td>200</td></tr>
                <tr><td><strong>Why It Exists</strong></td><td>When you click "Validate" in SnapLogic Designer, it sends this exact query.</td></tr>
            </table>
        </div>
    </div>

    <!-- Mapping 03 -->
    <div class="mapping-card">
        <div class="mapping-header" onclick="this.nextElementSibling.style.display = this.nextElementSibling.style.display === 'none' ? 'block' : 'none'">
            <h4><span class="mapping-badge badge-get">GET</span> 03-describe-account.json &mdash; Account Metadata</h4>
            <span class="priority-badge">Priority 2</span>
        </div>
        <div class="mapping-body">
            <table>
                <tr><td><strong>URL Pattern</strong></td><td><code>/services/data/v[0-9]+\.[0-9]+/sobjects/Account/describe</code> (regex)</td></tr>
                <tr><td><strong>Why It Exists</strong></td><td>Salesforce Snap calls this to discover the Account object's field schema for the UI.</td></tr>
            </table>
            <h4>Fields Defined in Response</h4>
            <table>
                <thead><tr><th>Field</th><th>Type</th><th>Createable</th><th>Updateable</th></tr></thead>
                <tbody>
                    <tr><td>Id</td><td>id</td><td>No</td><td>No</td></tr>
                    <tr><td>Name</td><td>string (255)</td><td>Yes</td><td>Yes</td></tr>
                    <tr><td>Type</td><td>picklist (Customer, Partner, Prospect)</td><td>Yes</td><td>Yes</td></tr>
                    <tr><td>Industry</td><td>picklist (Technology, Manufacturing, Finance, Healthcare)</td><td>Yes</td><td>Yes</td></tr>
                    <tr><td>Phone</td><td>phone (40)</td><td>Yes</td><td>Yes</td></tr>
                    <tr><td>Website</td><td>url (255)</td><td>Yes</td><td>Yes</td></tr>
                    <tr><td>AnnualRevenue</td><td>currency</td><td>Yes</td><td>Yes</td></tr>
                    <tr><td>NumberOfEmployees</td><td>int</td><td>Yes</td><td>Yes</td></tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Mapping 04 -->
    <div class="mapping-card">
        <div class="mapping-header" onclick="this.nextElementSibling.style.display = this.nextElementSibling.style.display === 'none' ? 'block' : 'none'">
            <h4><span class="mapping-badge badge-post">POST</span> 04-create-account.json &mdash; Create Account</h4>
            <span class="priority-badge">Priority 1</span>
        </div>
        <div class="mapping-body">
            <table>
                <tr><td><strong>URL Pattern</strong></td><td><code>/services/data/v[0-9]+\.[0-9]+/sobjects/Account</code> (regex)</td></tr>
                <tr><td><strong>Response Status</strong></td><td>201 (Created)</td></tr>
                <tr><td><strong>Why It Exists</strong></td><td>When a Salesforce Create Snap runs, it POSTs to this endpoint.</td></tr>
            </table>
            <div class="info-box yellow">
                <div class="info-box-title">‚ö†Ô∏è Static Response</div>
                <p>The <code>id</code> is always <code>001000000000TEST01</code> regardless of input. Data is NOT actually stored. See the Stateless vs Stateful tab.</p>
            </div>
        </div>
    </div>

    <!-- Mapping 05 -->
    <div class="mapping-card">
        <div class="mapping-header" onclick="this.nextElementSibling.style.display = this.nextElementSibling.style.display === 'none' ? 'block' : 'none'">
            <h4><span class="mapping-badge badge-get">GET</span> 05-read-account-query.json &mdash; Query Accounts</h4>
            <span class="priority-badge">Priority 1</span>
        </div>
        <div class="mapping-body">
            <table>
                <tr><td><strong>URL Pattern</strong></td><td><code>/services/data/v[0-9]+\.[0-9]+/query.*</code> (regex)</td></tr>
                <tr><td><strong>Query Params</strong></td><td><code>q</code> contains <code>Account</code></td></tr>
                <tr><td><strong>Why It Exists</strong></td><td>Broad catch-all: any SOQL query containing "Account" matches and returns the same test record.</td></tr>
            </table>
        </div>
    </div>

    <!-- Mapping proxy -->
    <div class="mapping-card" style="opacity: 0.7;">
        <div class="mapping-header" onclick="this.nextElementSibling.style.display = this.nextElementSibling.style.display === 'none' ? 'block' : 'none'">
            <h4><span class="mapping-badge badge-disabled">DISABLED</span> create-account-proxy.disabled &mdash; Proxy to JSON Server</h4>
            <span class="priority-badge">Priority 0</span>
        </div>
        <div class="mapping-body">
            <table>
                <tr><td><strong>URL Path</strong></td><td><code>/services/data/v52.0/sobjects/Account/</code> (exact)</td></tr>
                <tr><td><strong>Response</strong></td><td>Proxy to <code>http://salesforce-json-mock</code></td></tr>
                <tr><td><strong>Why Disabled</strong></td><td>Fundamental incompatibilities between Salesforce paths and JSON Server paths. See Stateless vs Stateful tab.</td></tr>
            </table>
        </div>
    </div>

    <h3>Priority Map</h3>
    <pre><code><span class="hl-number">Priority 0:</span> create-account-proxy.disabled  ‚Üê Would override everything (<span class="hl-error">disabled</span>)
<span class="hl-number">Priority 1:</span> 01-oauth-token.json            ‚Üê OAuth must always work
<span class="hl-number">Priority 1:</span> 04-create-account.json         ‚Üê Account creation
<span class="hl-number">Priority 1:</span> 05-read-account-query.json     ‚Üê Broad query catch-all
<span class="hl-number">Priority 2:</span> 03-describe-account.json       ‚Üê Metadata
<span class="hl-number">Priority 5:</span> 02-validation-query.json       ‚Üê Very specific validation query</code></pre>

    <h3>Mapping Anatomy: How a Single Mapping Works</h3>
    <p>Every mapping has just <strong>two parts</strong>:</p>
    <div class="comparison">
        <div class="comparison-col" style="flex: 1; background: var(--primary-light); padding: 20px; border-radius: var(--radius);">
            <h4 style="color: var(--primary); margin-top: 0;">REQUEST (The "IF" part)</h4>
            <p>"If someone sends a request that looks like THIS..."</p>
            <table>
                <tr><td><strong>method</strong></td><td><code>POST</code> ‚Äî Only match POST requests</td></tr>
                <tr><td><strong>urlPathPattern</strong></td><td>Regex pattern the URL must match</td></tr>
            </table>
        </div>
        <div class="comparison-col" style="flex: 1; background: var(--success-light); padding: 20px; border-radius: var(--radius);">
            <h4 style="color: var(--success); margin-top: 0;">RESPONSE (The "THEN" part)</h4>
            <p>"...then send back THIS answer"</p>
            <table>
                <tr><td><strong>status</strong></td><td><code>201</code> ‚Äî HTTP Created</td></tr>
                <tr><td><strong>jsonBody</strong></td><td>The JSON payload to return</td></tr>
            </table>
        </div>
    </div>

    <h4 style="margin-top: 24px;">URL Pattern Regex ‚Äî Character by Character</h4>
    <pre><code>/services/data/v<span class="hl-keyword">[0-9]+</span><span class="hl-value">\.</span><span class="hl-keyword">[0-9]+</span>/sobjects/Account
‚îÇ              ‚îÇ‚îÇ       ‚îÇ ‚îÇ       ‚îÇ‚îÇ               ‚îÇ
‚îÇ              ‚îÇ‚îÇ       ‚îÇ ‚îÇ       ‚îÇ‚îÇ               ‚îî‚îÄ‚îÄ Literal <span class="hl-string">"Account"</span>
‚îÇ              ‚îÇ‚îÇ       ‚îÇ ‚îÇ       ‚îÇ‚îî‚îÄ‚îÄ Literal <span class="hl-string">"/sobjects/"</span>
‚îÇ              ‚îÇ‚îÇ       ‚îÇ ‚îÇ       ‚îî‚îÄ‚îÄ One or more digits (e.g., "0")
‚îÇ              ‚îÇ‚îÇ       ‚îÇ ‚îî‚îÄ‚îÄ Literal dot <span class="hl-string">"."</span> (the \. means actual period)
‚îÇ              ‚îÇ‚îÇ       ‚îî‚îÄ‚îÄ One or more digits (e.g., "59")
‚îÇ              ‚îÇ‚îî‚îÄ‚îÄ Literal <span class="hl-string">"v"</span>
‚îÇ              ‚îî‚îÄ‚îÄ Literal <span class="hl-string">"/services/data/"</span>
‚îî‚îÄ‚îÄ Start of path</code></pre>

    <div class="card-grid" style="margin-top: 16px;">
        <div class="card" style="border-left: 4px solid var(--success);">
            <h4>&#x2705; URLs That MATCH</h4>
            <pre><code>/services/data/<span class="hl-keyword">v59.0</span>/sobjects/Account
/services/data/<span class="hl-keyword">v52.0</span>/sobjects/Account
/services/data/<span class="hl-keyword">v61.0</span>/sobjects/Account</code></pre>
        </div>
        <div class="card" style="border-left: 4px solid var(--danger);">
            <h4>&#x274C; URLs That DO NOT Match</h4>
            <pre><code>/services/data/v59.0/sobjects/<span class="hl-error">Contact</span>      <span class="hl-comment"># Wrong object</span>
/services/data/v59.0/<span class="hl-error">sobjects2</span>/Account  <span class="hl-comment"># Even 1 char off!</span>
/services/data/<span class="hl-error">sobjects</span>/Account          <span class="hl-comment"># Missing version</span>
/services/data/v59.0/<span class="hl-error">query</span>               <span class="hl-comment"># Different path</span></code></pre>
        </div>
    </div>

    <div class="info-box blue" style="margin-top: 16px;">
        <div class="info-box-title">&#x1F4A1; Why use regex instead of an exact URL?</div>
        <p>SnapLogic's API version might change (v52.0 ‚Üí v59.0 ‚Üí v61.0). The regex <code>v[0-9]+\.[0-9]+</code> matches <strong>any version</strong>, so you never need to update this mapping. Future-proof!</p>
    </div>

    <h4 style="margin-top: 24px;">The Real-World Flow</h4>
    <pre><code><span class="hl-keyword">SnapLogic Create Snap</span>                           <span class="hl-keyword">WireMock</span>
       ‚îÇ                                           ‚îÇ
       ‚îÇ  Snap builds the URL:                     ‚îÇ
       ‚îÇ  <span class="hl-method">POST</span> /services/data/<span class="hl-value">v59.0</span>/sobjects/Account
       ‚îÇ  Body: {<span class="hl-string">"Name": "Acme Corp"</span>}              ‚îÇ
       ‚îÇ                                           ‚îÇ
       ‚îú‚îÄ‚îÄ‚îÄ‚îÄ sends request ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí‚îÇ
       ‚îÇ                                           ‚îÇ
       ‚îÇ         WireMock checks mapping:           ‚îÇ
       ‚îÇ         ‚Ä¢ Method: POST? <span class="hl-success">&#x2705;</span>                 ‚îÇ
       ‚îÇ         ‚Ä¢ URL matches regex? <span class="hl-success">&#x2705;</span>             ‚îÇ
       ‚îÇ         ‚Ä¢ Priority 1 ‚Äî first match wins    ‚îÇ
       ‚îÇ                                           ‚îÇ
       ‚îÇ‚Üê‚îÄ‚îÄ‚îÄ returns response ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
       ‚îÇ                                           ‚îÇ
       ‚îÇ  {<span class="hl-property">"id"</span>: <span class="hl-string">"001000000000TEST01"</span>,             ‚îÇ
       ‚îÇ   <span class="hl-property">"success"</span>: <span class="hl-success">true</span>, <span class="hl-property">"errors"</span>: []}          ‚îÇ
       ‚îÇ                                           ‚îÇ
  Snap: <span class="hl-success">"Success! ID = 001000000000TEST01"</span>      ‚îÇ</code></pre>

    <div class="info-box purple" style="margin-top: 16px;">
        <div class="info-box-title">&#x1F511; The Key Insight</div>
        <p>The URL path is <strong>built by the SnapLogic Snap itself</strong> ‚Äî you don't control it. The only thing you changed is the <strong>host</strong>:</p>
        <pre><code>Real:  POST https://<span class="hl-error">login.salesforce.com</span>/services/data/v59.0/sobjects/Account
Mock:  POST https://<span class="hl-success">salesforce-api-mock:8443</span>/services/data/v59.0/sobjects/Account
                    <span class="hl-keyword">^^^^^^^^^^^^^^^^^^^^^^^^^</span>
                    Only THIS part is different</code></pre>
    </div>

    <h3>The Three Matching Types</h3>
    <table>
        <thead><tr><th>Match Type</th><th>How It Works</th><th>Analogy</th></tr></thead>
        <tbody>
            <tr><td><code>equalTo</code></td><td>Exact text ‚Äî must be letter-for-letter identical</td><td>"Only open the door if they say the EXACT password"</td></tr>
            <tr><td><code>urlPathPattern</code> (regex)</td><td>Pattern with wildcards</td><td>"Open the door for anyone whose name starts with 'Dr.'"</td></tr>
            <tr><td><code>contains</code></td><td>Text appears anywhere in the value</td><td>"Open the door if they mention 'Account' anywhere"</td></tr>
        </tbody>
    </table>

    <h3>Each Mapping in Plain English</h3>
    <table>
        <thead><tr><th>#</th><th>File</th><th>Plain English</th></tr></thead>
        <tbody>
            <tr><td>&#x2460;</td><td><code>01-oauth-token.json</code></td><td>"When someone tries to <strong>log in</strong>, give them a fake access token"</td></tr>
            <tr><td>&#x2461;</td><td><code>02-validation-query.json</code></td><td>"When someone asks <strong>'SELECT Name FROM Account LIMIT 1'</strong>, reply with a dummy name"</td></tr>
            <tr><td>&#x2462;</td><td><code>03-describe-account.json</code></td><td>"When someone asks <strong>'what does an Account look like?'</strong>, give them a list of fields"</td></tr>
            <tr><td>&#x2463;</td><td><code>04-create-account.json</code></td><td>"When someone <strong>creates a new Account</strong>, reply with 'OK, here's the ID'"</td></tr>
            <tr><td>&#x2464;</td><td><code>05-read-account-query.json</code></td><td>"When someone <strong>queries for Accounts</strong>, give them a pre-made test account"</td></tr>
        </tbody>
    </table>

    <h3>Debugging: When No Mapping Matches</h3>
    <pre><code><span class="hl-comment"># Show all requests that DIDN'T match any mapping</span>
curl http://localhost:8089/__admin/requests/unmatched | python3 -m json.tool</code></pre>
    <p>This shows the <strong>exact URL</strong> that came in, so you can compare it against your patterns and spot the mismatch. Even one character off (like <code>sobjects2</code> vs <code>sobjects</code>) causes a miss.</p>
</div>

<!-- ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
     ‚ïë  TAB 6: STATELESS vs STATEFUL                                  ‚ïë
     ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù -->
<div class="tab-panel" id="tab-stateless-stateful">
    <h2>Stateless vs Stateful: The Critical Design Decision</h2>
    <p class="section-subtitle">When you Create then Query, will the data be found?</p>

    <div class="comparison">
        <div class="comparison-col stateless">
            <h3 style="color: var(--danger); margin-top: 0;">&#10060; Stateless (Current Default)</h3>
            <p><strong>WireMock only &mdash; no persistence</strong></p>
            <span class="code-label">Step 1: Create</span>
            <pre style="background: #2d1b1b;"><code><span class="hl-method">POST</span> /services/data/v59.0/sobjects/Account
Body: {<span class="hl-property">"Name"</span>: <span class="hl-string">"Acme Corp"</span>}

Response: {<span class="hl-property">"id"</span>: <span class="hl-string">"001...TEST01"</span>, <span class="hl-property">"success"</span>: <span class="hl-success">true</span>}
<span class="hl-comment">// Looks good! But NOTHING was saved.</span></code></pre>
            <span class="code-label">Step 2: Query</span>
            <pre style="background: #2d1b1b;"><code><span class="hl-method">GET</span> /services/data/v59.0/query?q=...Acme Corp...

Response: {<span class="hl-property">"records"</span>: [{<span class="hl-property">"Name"</span>: <span class="hl-string">"Test Account for CRUD"</span>}]}
<span class="hl-error">// NOT "Acme Corp"! Returns pre-canned data.</span></code></pre>
            <div class="info-box red" style="margin-top: 16px;">
                <div class="info-box-title">&#10060; Workflow fails &mdash; created account doesn't exist in queries</div>
            </div>
        </div>
        <div class="comparison-col stateful">
            <h3 style="color: var(--success); margin-top: 0;">&#9989; Stateful (With JSON Server)</h3>
            <p><strong>WireMock + JSON Server &mdash; real persistence</strong></p>
            <span class="code-label">Step 1: Create</span>
            <pre style="background: #1b2d1b;"><code><span class="hl-method">POST</span> <span class="hl-arrow">‚Üí</span> WireMock <span class="hl-arrow">‚Üí</span> proxies to <span class="hl-arrow">‚Üí</span> JSON Server
JSON Server: Saves {<span class="hl-property">"Name"</span>: <span class="hl-string">"Acme Corp"</span>} to file

Response: {<span class="hl-property">"id"</span>: <span class="hl-string">"abc123"</span>}
<span class="hl-success">// Actually saved to salesforce-db.json!</span></code></pre>
            <span class="code-label">Step 2: Query</span>
            <pre style="background: #1b2d1b;"><code><span class="hl-method">GET</span> <span class="hl-arrow">‚Üí</span> JSON Server

Response: {<span class="hl-property">"records"</span>: [{<span class="hl-property">"Name"</span>: <span class="hl-string">"Acme Corp"</span>}]}
<span class="hl-success">// Found the created account!</span></code></pre>
            <div class="info-box green" style="margin-top: 16px;">
                <div class="info-box-title">&#9989; Workflow succeeds &mdash; account persisted and queryable</div>
            </div>
        </div>
    </div>

    <h3>Why the Proxy Approach Has Limitations</h3>
    <div class="card-grid">
        <div class="card" style="border-left: 4px solid var(--danger);">
            <h4>&#x1F6A7; Path Mismatch</h4>
            <p>WireMock <code>proxyBaseUrl</code> <strong>appends</strong> the original path. It forwards to <code>http://json-server/services/data/v52.0/sobjects/Account</code> but JSON Server expects <code>/accounts</code>. Result: <strong>404</strong>.</p>
        </div>
        <div class="card" style="border-left: 4px solid var(--danger);">
            <h4>&#x1F4E6; Response Format</h4>
            <p>SnapLogic expects <code>{"success": true, "errors": []}</code>. JSON Server returns <code>{"id": "abc", "Name": "..."}</code>. The missing <code>success</code> field causes parsing errors.</p>
        </div>
        <div class="card" style="border-left: 4px solid var(--danger);">
            <h4>&#x1F5E3; Three Languages</h4>
            <p>SnapLogic speaks "Salesforce", JSON Server speaks "Simple REST", WireMock is just a messenger &mdash; it can forward but cannot translate between them.</p>
        </div>
    </div>

    <h3>When to Use Which Mode</h3>
    <table>
        <thead><tr><th>Testing Goal</th><th>Stateless (WireMock Only)</th><th>Stateful (JSON Server)</th></tr></thead>
        <tbody>
            <tr><td>Pipeline logic &amp; transformation</td><td>&#9989;</td><td>Overkill</td></tr>
            <tr><td>OAuth / authentication flow</td><td>&#9989;</td><td>Not needed</td></tr>
            <tr><td>Individual CRUD operations</td><td>&#9989;</td><td>Not needed</td></tr>
            <tr><td>Create &rarr; Query workflows</td><td>&#10060; No persistence</td><td>&#9989; (needs custom middleware)</td></tr>
            <tr><td>CI/CD smoke tests</td><td>&#9989;</td><td>Not needed</td></tr>
            <tr><td>Full integration test</td><td>&#10060;</td><td>Use real Salesforce sandbox</td></tr>
        </tbody>
    </table>
</div>

<!-- ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
     ‚ïë  TAB 7: HTTPS & CERTS                                         ‚ïë
     ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù -->
<div class="tab-panel" id="tab-https">
    <h2>HTTPS Certificate Setup: The Trust Chain</h2>
    <p class="section-subtitle">Complete certificate setup ‚Äî from creation to Groundplex import</p>

    <div class="sub-tabs" data-group="https">
        <button class="sub-tab active" data-subtab="https-why">Why &amp; Background</button>
        <button class="sub-tab" data-subtab="https-create">Create Certificate</button>
        <button class="sub-tab" data-subtab="https-wiremock">Configure WireMock</button>
        <button class="sub-tab" data-subtab="https-import">Import to Groundplex</button>
        <button class="sub-tab" data-subtab="https-verify">Verify &amp; Test</button>
        <button class="sub-tab" data-subtab="https-alternatives">Alternatives &amp; Security</button>
    </div>

    <!-- ‚îÄ‚îÄ Sub-tab: Why & Background ‚îÄ‚îÄ -->
    <div class="sub-panel active" id="subtab-https-why">
        <h3>Why This Is Necessary</h3>
        <p><strong>Groundplex</strong> (SnapLogic execution node) connects to <strong>WireMock</strong> (Salesforce API mock) over HTTPS. WireMock runs with a <strong>self-signed certificate</strong> ‚Äî one you created yourself. By default, Java (inside Groundplex) <strong>rejects</strong> connections to unknown/self-signed certificates. You must <strong>import</strong> the certificate into Java's truststore (<code>cacerts</code>) ‚Äî telling Java: <em>"Trust this server's ID card, even though it wasn't issued by a well-known authority."</em></p>

        <pre><code><span class="hl-keyword">Groundplex (Java)</span>                         <span class="hl-keyword">WireMock</span>
      ‚îÇ                                       ‚îÇ
      ‚îú‚îÄ‚îÄ Connects to port <span class="hl-number">8443</span> ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
      ‚îú‚îÄ‚îÄ Receives certificate                 ‚îÇ
      ‚îÇ   CN=salesforce-api-mock               ‚îÇ
      ‚îÇ   (self-signed, not from a CA)         ‚îÇ
      ‚îÇ                                       ‚îÇ
      ‚îú‚îÄ‚îÄ Checks truststore (cacerts)          ‚îÇ
      ‚îÇ   <span class="hl-string">"Do I trust this cert?"</span>              ‚îÇ
      ‚îÇ                                       ‚îÇ
      ‚îÇ   DEFAULT:      <span class="hl-error">&#x274C; No! Unknown!</span>       ‚îÇ
      ‚îÇ   AFTER IMPORT: <span class="hl-success">&#x2705; Yes! Found it!</span>     ‚îÇ
      ‚îÇ                                       ‚îÇ
      ‚îî‚îÄ‚îÄ Checks hostname                     ‚îÇ
          <span class="hl-string">"Does cert match who I'm talking to?"</span>‚îÇ
          <span class="hl-success">&#x2705;</span> SAN includes salesforce-api-mock    ‚îÇ</code></pre>

        <div class="info-box red">
            <div class="info-box-title">Without certificate setup you get:</div>
            <code>javax.net.ssl.SSLPeerUnverifiedException: Host name 'salesforce-api-mock' does not match the certificate subject provided by the peer (CN=localhost)</code>
        </div>

        <h3>Self-Signed vs CA-Signed Certificates</h3>
        <table>
            <thead><tr><th>Type</th><th>Description</th><th>Trust</th></tr></thead>
            <tbody>
                <tr><td><strong>CA-signed (public)</strong></td><td>Issued by a trusted Certificate Authority (Let's Encrypt, DigiCert, etc.)</td><td>Browsers and Java already trust them ‚Äî no manual import needed</td></tr>
                <tr><td><strong>Self-signed</strong></td><td>You create it yourself. Free and easy for local dev/test</td><td><strong>Not trusted by default.</strong> Must manually tell Java to trust it</td></tr>
            </tbody>
        </table>
        <p style="margin-top: 12px;"><strong>In this project:</strong> We use self-signed because it's a local Docker environment ‚Äî free, instant, fully under your control.</p>

        <h3>The Problem: WireMock's Default Certificate Fails</h3>
        <p>WireMock ships with a built-in certificate with <code>CN=localhost</code>. Groundplex connects using the Docker service name <code>salesforce-api-mock</code>. SSL hostname verification <strong>fails</strong> because the names don't match.</p>
        <p><strong>Solution:</strong> Create a custom certificate with proper <strong>Subject Alternative Names (SANs)</strong> that include all hostnames.</p>

        <h3>Prerequisites</h3>
        <ul>
            <li>Docker and Docker Compose installed</li>
            <li><code>openssl</code> command-line tool available (pre-installed on Mac/Linux)</li>
            <li>Access to the project directory structure</li>
            <li>A running or soon-to-be-running Groundplex container</li>
        </ul>

        <h3>The Certificate Chain of Events</h3>
        <pre><code><span class="hl-number">1.</span> <span class="hl-keyword">GENERATE</span> certificate with SANs
       ‚îÇ
       ‚îú‚îÄ‚îÄ openssl genrsa ‚Üí <span class="hl-value">custom-key.pem</span> (private key)
       ‚îú‚îÄ‚îÄ openssl req -new -x509 ‚Üí <span class="hl-value">custom-cert.pem</span> (certificate)
       ‚îÇ   SANs: salesforce-api-mock, localhost, 127.0.0.1
       ‚îî‚îÄ‚îÄ openssl pkcs12 -export ‚Üí <span class="hl-value">custom-keystore.p12</span> (bundled)

<span class="hl-number">2.</span> <span class="hl-keyword">WIREMOCK</span> uses the keystore
       ‚îÇ
       ‚îî‚îÄ‚îÄ Volume mount + command flags

<span class="hl-number">3.</span> <span class="hl-keyword">EXTRACT</span> the public certificate from the running WireMock
       ‚îÇ
       ‚îî‚îÄ‚îÄ openssl s_client ‚Üí /tmp/wiremock-cert.pem

<span class="hl-number">4.</span> <span class="hl-keyword">COPY</span> into Groundplex container
       ‚îÇ
       ‚îî‚îÄ‚îÄ docker cp ‚Üí /tmp/wiremock-cert.pem

<span class="hl-number">5.</span> <span class="hl-keyword">IMPORT</span> into Java truststore
       ‚îÇ
       ‚îî‚îÄ‚îÄ keytool -import ‚Üí cacerts

<span class="hl-number">6.</span> <span class="hl-keyword">RESTART</span> JCC so it picks up the new trust
       ‚îÇ
       ‚îî‚îÄ‚îÄ ./jcc.sh restart</code></pre>
    </div>

    <!-- ‚îÄ‚îÄ Sub-tab: Create Certificate ‚îÄ‚îÄ -->
    <div class="sub-panel" id="subtab-https-create">
        <h3>Step 1: Create Directory Structure</h3>
        <pre><code><span class="hl-comment"># Navigate to your project root</span>
cd {{cookiecutter.primary_pipeline_name}}

<span class="hl-comment"># Create certificates directory</span>
mkdir -p docker/salesforce/wiremock/certs
cd docker/salesforce/wiremock/certs</code></pre>

        <h3>Step 2: Generate Private Key</h3>
        <pre><code><span class="hl-comment"># Generate a 2048-bit RSA private key</span>
openssl genrsa -out custom-key.pem 2048</code></pre>
        <p style="color: var(--gray-600); font-size: 0.9em;">Creates a private RSA key with 2048-bit encryption in PEM format. This is the foundation for your certificate.</p>

        <h3>Step 3: Create Self-Signed Certificate with SANs (Recommended)</h3>
        <pre><code><span class="hl-comment"># Create certificate with Subject Alternative Names</span>
openssl req -new -x509 \
  -key custom-key.pem \
  -out custom-cert.pem \
  -days 365 \
  -subj "<span class="hl-string">/C=US/ST=CA/L=San Francisco/O=SnapLogic/CN=salesforce-api-mock</span>" \
  -addext "<span class="hl-string">subjectAltName=DNS:salesforce-api-mock,DNS:localhost,DNS:salesforce-mock,IP:127.0.0.1</span>"</code></pre>

        <h4>Certificate Fields Explained</h4>
        <table>
            <thead><tr><th>Field</th><th>Value</th><th>Purpose</th></tr></thead>
            <tbody>
                <tr><td><code>C</code></td><td>US</td><td>Country Code</td></tr>
                <tr><td><code>ST</code></td><td>CA</td><td>State/Province (California)</td></tr>
                <tr><td><code>L</code></td><td>San Francisco</td><td>Locality/City</td></tr>
                <tr><td><code>O</code></td><td>SnapLogic</td><td>Organization</td></tr>
                <tr><td><code>CN</code></td><td>salesforce-api-mock</td><td>Common Name (primary hostname)</td></tr>
            </tbody>
        </table>

        <h4>Subject Alternative Names (SANs)</h4>
        <table>
            <thead><tr><th>SAN</th><th>Why It's Included</th></tr></thead>
            <tbody>
                <tr><td><code>DNS:salesforce-api-mock</code></td><td>Docker service name ‚Äî <strong>primary</strong> access from Groundplex</td></tr>
                <tr><td><code>DNS:localhost</code></td><td>Local testing from host machine</td></tr>
                <tr><td><code>DNS:salesforce-mock</code></td><td>Alternative service name</td></tr>
                <tr><td><code>IP:127.0.0.1</code></td><td>IP-based access from host</td></tr>
            </tbody>
        </table>

        <div class="info-box green">
            <div class="info-box-title">&#x2705; Why SANs are recommended</div>
            <p>This certificate works regardless of how you access the service (Docker hostname, localhost, or IP), preventing hostname verification errors.</p>
        </div>

        <h4>Alternative: Basic Certificate without SANs</h4>
        <pre><code><span class="hl-comment"># Basic certificate ‚Äî only works as salesforce-api-mock</span>
openssl req -new -x509 \
  -key custom-key.pem -out custom-cert.pem -days 365 \
  -subj "/C=US/ST=CA/L=San Francisco/O=SnapLogic/CN=salesforce-api-mock"</code></pre>
        <div class="info-box yellow">
            <div class="info-box-title">&#x26A0;&#xFE0F; Limitation</div>
            <p>Only works when accessing as <code>salesforce-api-mock</code>. Will fail for <code>localhost</code> or IP access.</p>
        </div>

        <h3>Step 4: Bundle into PKCS12 Keystore</h3>
        <pre><code><span class="hl-comment"># Bundle private key and certificate into PKCS12 format</span>
openssl pkcs12 -export \
  -in custom-cert.pem \
  -inkey custom-key.pem \
  -out custom-keystore.p12 \
  -name "wiremock" \
  -password pass:password</code></pre>
        <p style="color: var(--gray-600); font-size: 0.9em;"><strong>Note:</strong> Password <code>password</code> is used for simplicity. Use a strong password in production.</p>

        <h3>Step 5: Verify Your Certificate (Optional)</h3>
        <pre><code><span class="hl-comment"># View certificate subject and SANs</span>
openssl x509 -in custom-cert.pem -noout -text | grep -A2 "Subject:"
openssl x509 -in custom-cert.pem -noout -text | grep -A2 "Subject Alternative Name"

<span class="hl-comment"># Check P12 keystore contents</span>
openssl pkcs12 -info -in custom-keystore.p12 -password pass:password -noout

<span class="hl-comment"># Check certificate expiry date</span>
openssl x509 -in custom-cert.pem -noout -enddate</code></pre>

        <h3>Step 6: Clean Up Intermediate Files (Optional)</h3>
        <pre><code><span class="hl-comment"># The P12 contains everything ‚Äî .pem files can be safely deleted</span>
rm custom-key.pem custom-cert.pem

<span class="hl-comment"># Keep only the P12 file that WireMock will use</span>
ls -la custom-keystore.p12</code></pre>

        <div class="info-box blue">
            <div class="info-box-title">&#x1F4A1; Why it's safe to delete .pem files</div>
            <p>The P12 file contains both the private key and certificate. WireMock only needs the P12 file. To re-extract if needed: <code>openssl pkcs12 -in custom-keystore.p12 -nokeys -out cert.pem -password pass:password</code></p>
        </div>

        <h3>Certificate File Reference</h3>
        <table>
            <thead><tr><th>File</th><th>Required?</th><th>Purpose</th></tr></thead>
            <tbody>
                <tr><td><code>custom-keystore.p12</code></td><td><strong>Yes</strong></td><td>Contains private key + certificate. Only file WireMock needs.</td></tr>
                <tr><td><code>custom-key.pem</code></td><td>No</td><td>Intermediate private key ‚Äî can delete after P12 creation</td></tr>
                <tr><td><code>custom-cert.pem</code></td><td>No</td><td>Intermediate certificate ‚Äî can delete after P12 creation</td></tr>
            </tbody>
        </table>
    </div>

    <!-- ‚îÄ‚îÄ Sub-tab: Configure WireMock ‚îÄ‚îÄ -->
    <div class="sub-panel" id="subtab-https-wiremock">
        <h3>WireMock Docker Compose HTTPS Configuration</h3>
        <p>The certificate is mounted into WireMock via Docker Compose:</p>

        <h4>Volume Mount</h4>
        <table>
            <thead><tr><th>Host Path</th><th>Container Path</th><th>Purpose</th></tr></thead>
            <tbody>
                <tr><td><code>./wiremock/certs/custom-keystore.p12</code></td><td><code>/home/wiremock/certs/custom-keystore.p12</code></td><td>Certificate keystore</td></tr>
                <tr><td colspan="2"><code>:ro</code> flag</td><td>Read-only mount (security best practice)</td></tr>
            </tbody>
        </table>

        <h4>WireMock Command Flags</h4>
        <pre><code>--https-port=<span class="hl-number">8443</span>
--https-keystore=<span class="hl-string">/home/wiremock/certs/custom-keystore.p12</span>
--keystore-password=<span class="hl-string">password</span></code></pre>

        <h4>Verify HTTPS is Working</h4>
        <pre><code><span class="hl-comment"># Test HTTPS endpoint (use -k to ignore self-signed cert warning)</span>
curl -k https://localhost:8443/__admin/health
<span class="hl-comment"># Expected: {"status":"OK"}</span>

<span class="hl-comment"># Check certificate details being served</span>
echo | openssl s_client -connect localhost:8443 \
  -servername salesforce-api-mock 2>/dev/null | \
  openssl x509 -noout -subject -issuer -dates</code></pre>
    </div>

    <!-- ‚îÄ‚îÄ Sub-tab: Import to Groundplex ‚îÄ‚îÄ -->
    <div class="sub-panel" id="subtab-https-import">
        <h3>Importing Certificate into Groundplex</h3>

        <div class="steps">
            <div class="step">
                <h4>Extract Certificate from Running WireMock</h4>
                <pre><code><span class="hl-comment"># Extract the certificate WireMock is actually serving</span>
echo | openssl s_client -connect localhost:8443 \
  -servername salesforce-api-mock 2>/dev/null | \
  openssl x509 > /tmp/wiremock-cert.pem

<span class="hl-comment"># Verify extraction was successful</span>
openssl x509 -in /tmp/wiremock-cert.pem -noout -subject
<span class="hl-comment"># Should show: subject=CN=salesforce-api-mock</span></code></pre>
            </div>
            <div class="step">
                <h4>Copy Certificate to Groundplex Container</h4>
                <pre><code><span class="hl-comment"># Copy into the running Groundplex container</span>
docker cp /tmp/wiremock-cert.pem snaplogic-groundplex:/tmp/wiremock-cert.pem

<span class="hl-comment"># Verify the file was copied</span>
docker exec snaplogic-groundplex ls -la /tmp/wiremock-cert.pem</code></pre>
            </div>
            <div class="step">
                <h4>Import into Java Truststore</h4>
                <pre><code>docker exec snaplogic-groundplex bash -c '
  <span class="hl-comment"># Find Java installation (version-specific directory)</span>
  JAVA_HOME="/opt/snaplogic/pkgs/jdk-11.0.24+8-jre"

  <span class="hl-comment"># Alternative: Dynamically find Java directory</span>
  <span class="hl-comment"># JAVA_HOME=$(ls -d /opt/snaplogic/pkgs/jdk* 2>/dev/null | head -1)</span>

  KEYTOOL="$JAVA_HOME/bin/keytool"
  TRUSTSTORE="$JAVA_HOME/lib/security/cacerts"

  <span class="hl-comment"># Verify paths exist</span>
  if [ ! -f "$KEYTOOL" ]; then echo "ERROR: keytool not found"; exit 1; fi
  if [ ! -f "$TRUSTSTORE" ]; then echo "ERROR: truststore not found"; exit 1; fi

  <span class="hl-comment"># Import certificate (password "changeit" is Java default)</span>
  $KEYTOOL -import -trustcacerts \
    -keystore $TRUSTSTORE \
    -storepass changeit -noprompt \
    -alias wiremock-salesforce \
    -file /tmp/wiremock-cert.pem

  echo "Certificate imported successfully!"
  rm /tmp/wiremock-cert.pem
'</code></pre>
                <p style="font-size:0.85em; color:var(--gray-600); margin-top:6px;"><strong>Note:</strong> The Java path <code>/opt/snaplogic/pkgs/jdk-11.0.24+8-jre</code> is version-specific. Adjust for different Groundplex versions or use the dynamic discovery method.</p>
            </div>
            <div class="step">
                <h4>Restart JCC to Apply Changes</h4>
                <pre><code><span class="hl-comment"># Restart JCC service (NOT the container ‚Äî just the JCC process inside)</span>
docker exec snaplogic-groundplex bash -c 'cd /opt/snaplogic/bin &amp;&amp; ./jcc.sh restart'

<span class="hl-comment"># Wait for JCC to restart</span>
sleep 60

<span class="hl-comment"># Verify JCC is running</span>
docker exec snaplogic-groundplex bash -c 'cd /opt/snaplogic/bin &amp;&amp; ./jcc.sh status'</code></pre>
            </div>
        </div>

        <h3>Makefile Shortcuts</h3>
        <table>
            <thead><tr><th>Command</th><th>When to Use</th><th>Action</th></tr></thead>
            <tbody>
                <tr><td><code>make launch-groundplex-with-cert</code></td><td>Groundplex is <strong>NOT</strong> running</td><td>Start Groundplex container + import certificate in one step</td></tr>
                <tr><td><code>make setup-groundplex-cert</code></td><td>Groundplex is <strong>already running</strong></td><td>Import certificate into running Groundplex (JCC restarts, container stays up)</td></tr>
                <tr><td><code>make groundplex-check-cert</code></td><td>Anytime</td><td>Verify certificate is installed in the truststore</td></tr>
                <tr><td><code>make groundplex-remove-cert</code></td><td>Cleanup / troubleshooting</td><td>Remove certificate from truststore</td></tr>
            </tbody>
        </table>
        <div class="info-box green" style="margin-top: 16px;">
            <div class="info-box-title">&#x1F4A1; Already have Groundplex running?</div>
            <p>You do <strong>NOT</strong> need to stop it. Just run <code>make setup-groundplex-cert</code> ‚Äî it imports the certificate via <code>docker exec</code> and restarts only the JCC process inside the container. The container itself stays running. See the <strong>Operations</strong> tab for both scenarios.</p>
        </div>
    </div>

    <!-- ‚îÄ‚îÄ Sub-tab: Verify & Test ‚îÄ‚îÄ -->
    <div class="sub-panel" id="subtab-https-verify">
        <h3>Verify Certificate in Truststore</h3>
        <pre><code>docker exec snaplogic-groundplex bash -c '
  JAVA_HOME="/opt/snaplogic/pkgs/jdk-11.0.24+8-jre"
  KEYTOOL="$JAVA_HOME/bin/keytool"
  TRUSTSTORE="$JAVA_HOME/lib/security/cacerts"

  echo "Checking for wiremock certificate in truststore..."
  $KEYTOOL -list -keystore $TRUSTSTORE -storepass changeit 2>/dev/null | grep -i wiremock

  if [ $? -eq 0 ]; then
    echo "<span class="hl-success">&#x2705; Certificate found!</span>"
    $KEYTOOL -list -v -keystore $TRUSTSTORE -storepass changeit \
      -alias wiremock-salesforce 2>/dev/null | grep -E "Alias|Owner|Valid" | head -5
  else
    echo "<span class="hl-error">&#x274C; Certificate not found</span>"
  fi
'</code></pre>

        <h3>Test HTTPS Connection from Inside Groundplex</h3>
        <pre><code><span class="hl-comment"># No -k flag ‚Äî should work without it after import!</span>
docker exec snaplogic-groundplex curl -v https://salesforce-api-mock:8443/__admin/health
<span class="hl-comment"># Should return: {"status":"OK"} without SSL errors</span></code></pre>

        <h3>Configure SnapLogic Salesforce Account</h3>
        <p>In SnapLogic Designer:</p>
        <table>
            <thead><tr><th>Setting</th><th>Value</th></tr></thead>
            <tbody>
                <tr><td>Login URL</td><td><code>https://salesforce-api-mock:8443</code></td></tr>
                <tr><td>Username</td><td><code>slim@snaplogic.com</code> (any value works)</td></tr>
                <tr><td>Password</td><td>Any value</td></tr>
                <tr><td>Security Token</td><td>(leave empty)</td></tr>
                <tr><td>Sandbox</td><td><code>true</code></td></tr>
            </tbody>
        </table>
        <p style="margin-top: 12px;">Validate the account ‚Äî should show <strong>"Account validation successful"</strong>.</p>
    </div>

    <!-- ‚îÄ‚îÄ Sub-tab: Alternatives & Security ‚îÄ‚îÄ -->
    <div class="sub-panel" id="subtab-https-alternatives">
        <h3>Alternative Approaches</h3>

        <div class="info-box blue">
            <div class="info-box-title">Option 1: Use HTTP Instead of HTTPS (Dev Only)</div>
            <p>Change Login URL to <code>http://salesforce-api-mock:8080</code>. No certificate needed.</p>
            <p><strong>&#x26A0;&#xFE0F; Only for quick local testing ‚Äî not realistic.</strong></p>
        </div>

        <div class="info-box yellow">
            <div class="info-box-title">Option 2: Trust All Certificates (Not Recommended)</div>
            <pre><code><span class="hl-comment"># Add to JVM options (INSECURE - DEV ONLY)</span>
-Dcom.sun.net.ssl.checkRevocation=false
-Dtrust.all.cert=true</code></pre>
            <p><strong>&#x26A0;&#xFE0F; Never use this in production. It defeats the purpose of SSL/TLS.</strong></p>
        </div>

        <div class="info-box green">
            <div class="info-box-title">Option 3: Use Real Certificates (Production-Like)</div>
            <pre><code><span class="hl-comment"># Use certbot to get real certificates</span>
certbot certonly --standalone -d your-domain.com

<span class="hl-comment"># Convert to PKCS12</span>
openssl pkcs12 -export \
  -in /etc/letsencrypt/live/your-domain.com/fullchain.pem \
  -inkey /etc/letsencrypt/live/your-domain.com/privkey.pem \
  -out custom-keystore.p12</code></pre>
        </div>

        <h3>Security Best Practices</h3>
        <table>
            <thead><tr><th>#</th><th>Practice</th><th>Details</th></tr></thead>
            <tbody>
                <tr><td>1</td><td><strong>Never commit private keys to git</strong></td><td>Add <code>*.pem</code> and <code>*.p12</code> to <code>.gitignore</code></td></tr>
                <tr><td>2</td><td><strong>Use strong keystore passwords</strong></td><td>Don't use <code>password</code> in production ‚Äî store in env vars</td></tr>
                <tr><td>3</td><td><strong>Rotate certificates regularly</strong></td><td>Set reminders before the 365-day expiry</td></tr>
                <tr><td>4</td><td><strong>Limit certificate scope</strong></td><td>Use specific SANs, not wildcards. Separate certs per environment.</td></tr>
                <tr><td>5</td><td><strong>Monitor certificate expiry</strong></td><td><code>openssl x509 -in cert.pem -noout -enddate</code></td></tr>
            </tbody>
        </table>

        <h3>Check Certificate Expiry</h3>
        <pre><code><span class="hl-comment"># From local file</span>
openssl x509 -in custom-cert.pem -noout -enddate

<span class="hl-comment"># From running server</span>
echo | openssl s_client -connect localhost:8443 2>/dev/null | \
  openssl x509 -noout -enddate</code></pre>
    </div>
</div>

<!-- ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
     ‚ïë  TAB 8: CONFIGURATION                                         ‚ïë
     ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù -->
<div class="tab-panel" id="tab-config">
    <h2>Configuration Files</h2>
    <p class="section-subtitle">Every configuration file and what it does</p>

    <div class="sub-tabs" data-group="config">
        <button class="sub-tab active" data-subtab="cfg-compose">Docker Compose</button>
        <button class="sub-tab" data-subtab="cfg-env">Environment</button>
        <button class="sub-tab" data-subtab="cfg-payload">Account Payload</button>
        <button class="sub-tab" data-subtab="cfg-data">JSON Data &amp; Routes</button>
        <button class="sub-tab" data-subtab="cfg-tree">Directory Tree</button>
    </div>

    <div class="sub-panel active" id="subtab-cfg-compose">
        <h3>Docker Compose: <code>docker-compose.salesforce-mock.yml</code></h3>
        <p>This file is <strong>included</strong> by the main <code>docker-compose.yml</code>:</p>
        <pre><code><span class="hl-comment"># docker-compose.yml (root)</span>
<span class="hl-keyword">include:</span>
  - docker/salesforce/docker-compose.salesforce-mock.yml
  - docker/groundplex/docker-compose.groundplex.yml
  - docker/oracle/docker-compose.oracle.yml
  <span class="hl-comment"># ... 7 more service includes</span></code></pre>
        <h4>Profiles Explained</h4>
        <table>
            <thead><tr><th>Profile</th><th>What Starts</th><th>Used By</th></tr></thead>
            <tbody>
                <tr><td><code>salesforce-mock-start</code></td><td>WireMock only</td><td>Targeted WireMock startup</td></tr>
                <tr><td><code>salesforce-json-server</code></td><td>JSON Server only</td><td>Targeted JSON Server startup</td></tr>
                <tr><td><code>salesforce-dev</code></td><td>Both services</td><td><code>make salesforce-mock-start</code></td></tr>
            </tbody>
        </table>
    </div>

    <div class="sub-panel" id="subtab-cfg-env">
        <h3>Environment: <code>.env.salesforce</code></h3>
        <span class="code-label">env_files/mock_service_accounts/.env.salesforce</span>
        <pre><code><span class="hl-comment"># SnapLogic Account Configuration</span>
<span class="hl-property">SALESFORCE_ACCOUNT_PAYLOAD_FILE_NAME</span>=<span class="hl-string">acc_salesforce.json</span>
<span class="hl-property">SALESFORCE_ACCOUNT_NAME</span>=<span class="hl-string">sfdc_acct</span>
<span class="hl-property">SALESFORCE_USERNAME</span>=<span class="hl-string">slim@snaplogic.com</span>
<span class="hl-property">SALESFORCE_PASSWORD</span>=<span class="hl-string">test</span>
<span class="hl-property">SALESFORCE_SECURITY_TOKEN</span>=<span class="hl-string">test</span>
<span class="hl-property">SALESFORCE_LOGIN_URL</span>=<span class="hl-url">https://salesforce-api-mock:8443</span>
<span class="hl-property">SALESFORCE_SANDBOX</span>=<span class="hl-number">true</span>
<span class="hl-property">SALESFORCE_API_VERSION</span>=<span class="hl-number">59.0</span>

<span class="hl-comment"># Port Mappings</span>
<span class="hl-property">SALESFORCE_HTTP_PORT</span>=<span class="hl-number">8089</span>
<span class="hl-property">SALESFORCE_HTTPS_PORT</span>=<span class="hl-number">8443</span>
<span class="hl-property">SALESFORCE_JSON_PORT</span>=<span class="hl-number">8082</span></code></pre>
        <div class="info-box blue">
            <div class="info-box-title">&#x1F4DD; Loading Precedence (from Makefile.common)</div>
            <ol>
                <li>All <code>.env</code> files from <code>env_files/</code> directory (sorted alphabetically)</li>
                <li>Root <code>.env</code> file (<strong>HIGHEST PRECEDENCE</strong>)</li>
                <li>Optional: <code>ENV=.env.stage</code> override (<strong>HIGHEST</strong> if specified)</li>
            </ol>
        </div>
    </div>

    <div class="sub-panel" id="subtab-cfg-payload">
        <h3>Account Payload: <code>acc_salesforce.json</code></h3>
        <pre><code>{
  <span class="hl-property">"path"</span>: <span class="hl-string">"{{ACCOUNT_LOCATION_PATH}}"</span>,
  <span class="hl-property">"duplicate_check"</span>: <span class="hl-number">true</span>,
  <span class="hl-property">"account"</span>: {
    <span class="hl-property">"class_fqid"</span>: <span class="hl-string">"com-snaplogic-snaps-salesforce-salesforceaccount_1-..."</span>,
    <span class="hl-property">"property_map"</span>: {
      <span class="hl-property">"settings"</span>: {
        <span class="hl-property">"loginUrl"</span>: { <span class="hl-property">"value"</span>: <span class="hl-string">"{{SALESFORCE_LOGIN_URL}}"</span> },
        <span class="hl-property">"sandbox"</span>:  { <span class="hl-property">"value"</span>: <span class="hl-number">true</span> },
        <span class="hl-property">"username"</span>: { <span class="hl-property">"value"</span>: <span class="hl-string">"{{SALESFORCE_USERNAME}}"</span> },
        <span class="hl-property">"password"</span>: { <span class="hl-property">"value"</span>: <span class="hl-string">"{{SALESFORCE_PASSWORD}}"</span> }
      },
      <span class="hl-property">"info"</span>: {
        <span class="hl-property">"label"</span>: { <span class="hl-property">"value"</span>: <span class="hl-string">"{{SALESFORCE_ACCOUNT_NAME}}"</span> }
      }
    }
  }
}</code></pre>
        <table>
            <thead><tr><th>Field</th><th>Purpose</th><th>Mock Value</th></tr></thead>
            <tbody>
                <tr><td><code>loginUrl</code></td><td>Where to authenticate</td><td><code>https://salesforce-api-mock:8443</code></td></tr>
                <tr><td><code>sandbox</code></td><td>Is this a sandbox org?</td><td><code>true</code></td></tr>
                <tr><td><code>username</code></td><td>Salesforce username</td><td><code>slim@snaplogic.com</code> (any value works)</td></tr>
                <tr><td><code>password</code></td><td>Salesforce password</td><td><code>test</code> (any value works)</td></tr>
                <tr><td><code>label</code></td><td>Account display name</td><td><code>sfdc_acct</code></td></tr>
            </tbody>
        </table>
    </div>

    <div class="sub-panel" id="subtab-cfg-data">
        <h3>JSON Server Data: <code>salesforce-db.json</code></h3>
        <table>
            <thead><tr><th>Collection</th><th>Records</th><th>Key Data</th></tr></thead>
            <tbody>
                <tr><td><strong>accounts</strong></td><td>13</td><td>Global Innovations Inc, TechStart Solutions, various test records</td></tr>
                <tr><td><strong>contacts</strong></td><td>2</td><td>John Doe (CEO), Jane Smith (VP Sales)</td></tr>
                <tr><td><strong>opportunities</strong></td><td>1</td><td>Acme - Enterprise Deal ($500K, 75% probability)</td></tr>
            </tbody>
        </table>
        <h4>Routes: <code>routes.json</code></h4>
        <pre><code>{
  <span class="hl-property">"/services/data/v[0-9]+\\.[0-9]+/sobjects/Account"</span>: <span class="hl-string">"/accounts"</span>,
  <span class="hl-property">"/services/data/v52.0/sobjects/Account"</span>: <span class="hl-string">"/accounts"</span>,
  <span class="hl-property">"/services/data/v59.0/sobjects/Account"</span>: <span class="hl-string">"/accounts"</span>
}</code></pre>
        <div class="info-box yellow">
            <div class="info-box-title">&#x26A0; Limitation</div>
            <p>Routes only work for <strong>direct</strong> requests to JSON Server (port 8082), not for requests proxied through WireMock.</p>
        </div>
    </div>

    <div class="sub-panel" id="subtab-cfg-tree">
        <h3>Complete Directory Structure</h3>
        <div class="dir-tree"><span class="dir">{{cookiecutter.primary_pipeline_name}}/</span>
‚îú‚îÄ‚îÄ docker-compose.yml                         <span class="comment"># Main compose (includes salesforce)</span>
‚îú‚îÄ‚îÄ Makefile                                   <span class="comment"># Main Makefile (includes Makefile.salesforce)</span>
‚îú‚îÄ‚îÄ .env                                       <span class="comment"># Root env file (highest precedence)</span>
‚îÇ
‚îú‚îÄ‚îÄ <span class="dir">makefiles/</span>
‚îÇ   ‚îú‚îÄ‚îÄ <span class="dir">common_services/</span>
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ <span class="file">Makefile.common</span>                    <span class="comment"># DOCKER_COMPOSE definition</span>
‚îÇ   ‚îî‚îÄ‚îÄ <span class="dir">mock_services/</span>
‚îÇ       ‚îî‚îÄ‚îÄ <span class="file">Makefile.salesforce</span>                <span class="comment"># All salesforce-* targets</span>
‚îÇ
‚îú‚îÄ‚îÄ <span class="dir">env_files/mock_service_accounts/</span>
‚îÇ   ‚îî‚îÄ‚îÄ <span class="file">.env.salesforce</span>                        <span class="comment"># Credentials &amp; ports</span>
‚îÇ
‚îú‚îÄ‚îÄ <span class="dir">docker/salesforce/</span>
‚îÇ   ‚îú‚îÄ‚îÄ <span class="file">docker-compose.salesforce-mock.yml</span>    <span class="comment"># Service definitions</span>
‚îÇ   ‚îú‚îÄ‚îÄ <span class="dir">wiremock/</span>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ <span class="dir">__files/</span>                           <span class="comment"># (empty)</span>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ <span class="dir">certs/</span>
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ <span class="file">custom-keystore.p12</span>            <span class="comment"># SSL certificate</span>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ <span class="dir">mappings/</span>
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ <span class="file">01-oauth-token.json</span>            <span class="comment"># OAuth</span>
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ <span class="file">02-validation-query.json</span>       <span class="comment"># Validation</span>
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ <span class="file">03-describe-account.json</span>       <span class="comment"># Metadata</span>
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ <span class="file">04-create-account.json</span>         <span class="comment"># Create</span>
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ <span class="file">05-read-account-query.json</span>     <span class="comment"># Query</span>
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ <span class="file">create-account-proxy.disabled</span>  <span class="comment"># Proxy (disabled)</span>
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ <span class="dir">docs/</span>                              <span class="comment"># 4 documentation files</span>
‚îÇ   ‚îî‚îÄ‚îÄ <span class="dir">json-db/</span>
‚îÇ       ‚îú‚îÄ‚îÄ <span class="file">salesforce-db.json</span>                 <span class="comment"># Data</span>
‚îÇ       ‚îú‚îÄ‚îÄ <span class="file">routes.json</span>                        <span class="comment"># URL mapping</span>
‚îÇ       ‚îî‚îÄ‚îÄ <span class="file">jsonserver_data.html</span>               <span class="comment"># Dashboard</span>
‚îÇ
‚îú‚îÄ‚îÄ <span class="dir">test/suite/</span>
‚îÇ   ‚îú‚îÄ‚îÄ <span class="dir">pipeline_tests/salesforce/</span>
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ <span class="file">sfdc.robot</span>                         <span class="comment"># Test suite</span>
‚îÇ   ‚îî‚îÄ‚îÄ <span class="dir">test_data/accounts_payload/</span>
‚îÇ       ‚îî‚îÄ‚îÄ <span class="file">acc_salesforce.json</span>                <span class="comment"># Account template</span>
‚îÇ
‚îî‚îÄ‚îÄ <span class="dir">README/How To Guides/infra_setup_guides/salesforce/</span>
    ‚îú‚îÄ‚îÄ <span class="file">wiremock_https_certificate_setup.md</span>
    ‚îú‚îÄ‚îÄ <span class="file">SALESFORCE_MOCK_COMPLETE_GUIDE.md</span>
    ‚îú‚îÄ‚îÄ <span class="file">SALESFORCE_MOCK_COMPLETE_GUIDE.html</span>    <span class="comment"># This file</span>
    ‚îî‚îÄ‚îÄ <span class="dir">README/puml/</span>                           <span class="comment"># 3 PlantUML diagrams</span></div>
    </div>
</div>

<!-- ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
     ‚ïë  TAB 9: OPERATIONS                                            ‚ïë
     ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù -->
<div class="tab-panel" id="tab-operations">
    <h2>Operations: Makefile Targets</h2>
    <p class="section-subtitle">Every command you need to manage the mock services</p>

    <h3>Service Management</h3>
    <table>
        <thead><tr><th>Command</th><th>What It Does</th></tr></thead>
        <tbody>
            <tr><td><code>make salesforce-mock-start</code></td><td>Start both WireMock &amp; JSON Server, print all endpoints</td></tr>
            <tr><td><code>make salesforce-mock-stop</code></td><td>Stop and remove both containers and volumes</td></tr>
            <tr><td><code>make salesforce-mock-restart</code></td><td>Stop + start (with 2-second pause)</td></tr>
            <tr><td><code>make salesforce-mock-status</code></td><td>Container status, health checks, endpoint tests</td></tr>
            <tr><td><code>make salesforce-mock-clean</code></td><td>Stop, remove volumes, delete JSON data</td></tr>
            <tr><td><code>make salesforce-mock-logs</code></td><td>Last 20 lines of WireMock &amp; JSON Server logs</td></tr>
            <tr><td><code>make salesforce-test</code></td><td>Test OAuth &amp; JSON Server endpoints</td></tr>
            <tr><td><code>make start-jsonserver</code></td><td>Start only JSON Server</td></tr>
            <tr><td><code>make stop-jsonserver</code></td><td>Stop only JSON Server</td></tr>
        </tbody>
    </table>

    <h3>Certificate Management</h3>
    <table>
        <thead><tr><th>Command</th><th>What It Does</th></tr></thead>
        <tbody>
            <tr><td><code>make launch-groundplex-with-cert</code></td><td>Start Groundplex + import certificate</td></tr>
            <tr><td><code>make setup-groundplex-cert</code></td><td>Import certificate into running Groundplex</td></tr>
            <tr><td><code>make groundplex-check-cert</code></td><td>Verify certificate is in truststore</td></tr>
            <tr><td><code>make groundplex-remove-cert</code></td><td>Remove certificate from truststore</td></tr>
        </tbody>
    </table>

    <h3>Startup Scenarios</h3>

    <div class="info-box blue" style="margin-bottom: 20px;">
        <div class="info-box-title">&#x1F4A1; Which scenario applies to you?</div>
        <p>Check if Groundplex is already running: <code>docker ps | grep snaplogic-groundplex</code></p>
        <p>&#x2022; <strong>Output shows a container</strong> ‚Üí Use <strong>Scenario B</strong> (Existing Groundplex)</p>
        <p>&#x2022; <strong>No output</strong> ‚Üí Use <strong>Scenario A</strong> (Fresh Start)</p>
    </div>

    <h4 style="color: var(--primary); margin-top: 20px;">Scenario A: Fresh Start (No Groundplex Running)</h4>
    <p style="margin-bottom: 12px; color: var(--gray-700);">Use when starting everything from scratch ‚Äî no Groundplex container exists yet.</p>
    <div class="steps">
        <div class="step"><h4>Start mock services</h4><pre><code>make salesforce-mock-start</code></pre></div>
        <div class="step"><h4>Start Groundplex WITH certificate (one command)</h4><pre><code>make launch-groundplex-with-cert</code></pre><p style="font-size:0.85em; color:var(--gray-600); margin-top:6px;">Starts the container, waits for healthy, imports cert, restarts JCC.</p></div>
        <div class="step"><h4>Verify everything</h4><pre><code>make salesforce-mock-status
make groundplex-check-cert</code></pre></div>
        <div class="step"><h4>Run tests</h4><pre><code>make robot-run-tests TAGS="sfdc"</code></pre></div>
    </div>

    <h4 style="color: var(--success); margin-top: 30px;">Scenario B: Existing Groundplex Already Running</h4>
    <p style="margin-bottom: 12px; color: var(--gray-700);">Use when Groundplex is <strong>already running</strong> (e.g., started earlier for Oracle/Postgres tests) and you now need the Salesforce mock certificate.</p>
    <div class="info-box green" style="margin-bottom: 16px;">
        <div class="info-box-title">&#x26A0;&#xFE0F; You do NOT need to stop the Groundplex!</div>
        <p>The certificate import runs on the <strong>live container</strong> via <code>docker exec</code>. Only the <strong>JCC process</strong> restarts inside ‚Äî the container itself stays running.</p>
    </div>
    <div class="steps">
        <div class="step"><h4>Start mock services (if not already running)</h4><pre><code>make salesforce-mock-start</code></pre></div>
        <div class="step"><h4>Import cert into RUNNING Groundplex</h4><pre><code>make setup-groundplex-cert</code></pre><p style="font-size:0.85em; color:var(--gray-600); margin-top:6px;">Uses <code>keytool -importcert</code> inside the running container ‚Üí restarts JCC only, NOT the container.</p></div>
        <div class="step"><h4>Verify certificate was imported</h4><pre><code>make groundplex-check-cert</code></pre></div>
        <div class="step"><h4>Run tests</h4><pre><code>make robot-run-tests TAGS="sfdc"</code></pre></div>
    </div>

    <h4 style="margin-top: 30px;">Key Difference</h4>
    <table>
        <thead><tr><th>Command</th><th>When to Use</th><th>What It Does</th></tr></thead>
        <tbody>
            <tr><td><code>make launch-groundplex-with-cert</code></td><td>Groundplex is <strong>NOT</strong> running</td><td>Starts the container <strong>+</strong> imports the certificate</td></tr>
            <tr><td><code>make setup-groundplex-cert</code></td><td>Groundplex is <strong>already running</strong></td><td>Imports cert into running container (JCC restarts, container stays up)</td></tr>
        </tbody>
    </table>

    <h3>Integration Map: How Everything Chains Together</h3>
    <pre><code><span class="hl-keyword">Makefile</span> (root)
‚îú‚îÄ‚îÄ include <span class="hl-url">Makefile.common</span>
‚îÇ   ‚îî‚îÄ‚îÄ Defines <span class="hl-property">DOCKER_COMPOSE</span> with all --env-file flags
‚îÇ   ‚îî‚îÄ‚îÄ Defines <span class="hl-property">COMPOSE_PROFILES</span> (includes salesforce-mock-start)
‚îÇ
‚îú‚îÄ‚îÄ include <span class="hl-url">Makefile.salesforce</span>
‚îÇ   ‚îî‚îÄ‚îÄ Uses <span class="hl-value">$(DOCKER_COMPOSE)</span> for all docker compose commands
‚îÇ
<span class="hl-keyword">docker-compose.yml</span> (root)
‚îú‚îÄ‚îÄ include: <span class="hl-url">docker/salesforce/docker-compose.salesforce-mock.yml</span>
‚îú‚îÄ‚îÄ include: <span class="hl-url">docker/groundplex/docker-compose.groundplex.yml</span>
‚îú‚îÄ‚îÄ include: <span class="hl-url">docker/oracle/docker-compose.oracle.yml</span>  <span class="hl-comment"># + 6 more</span>
‚îî‚îÄ‚îÄ Network: <span class="hl-value">snaplogicnet</span> (bridge)

<span class="hl-keyword">.env.salesforce</span>
    ‚îú‚îÄ‚îÄ‚ñ∫ <span class="hl-url">docker-compose</span>    Uses: ${SALESFORCE_HTTP_PORT:-8089}
    ‚îú‚îÄ‚îÄ‚ñ∫ <span class="hl-url">acc_salesforce.json</span> Uses: {{SALESFORCE_LOGIN_URL}}
    ‚îî‚îÄ‚îÄ‚ñ∫ <span class="hl-url">sfdc.robot</span>          Uses: ${SALESFORCE_ACCOUNT_NAME}</code></pre>
</div>

<!-- ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
     ‚ïë  TAB 10: TROUBLESHOOTING                                      ‚ïë
     ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù -->
<div class="tab-panel" id="tab-troubleshooting">
    <h2>Troubleshooting Guide</h2>
    <p class="section-subtitle">Common issues and how to fix them</p>

    <div class="sub-tabs" data-group="troubleshoot">
        <button class="sub-tab active" data-subtab="ts-ssl">SSL/Certificate</button>
        <button class="sub-tab" data-subtab="ts-wiremock">WireMock</button>
        <button class="sub-tab" data-subtab="ts-jsonserver">JSON Server</button>
        <button class="sub-tab" data-subtab="ts-matching">Request Matching</button>
        <button class="sub-tab" data-subtab="ts-validation">Validation</button>
    </div>

    <div class="sub-panel active" id="subtab-ts-ssl">
        <h3>SSL / Certificate Errors</h3>
        <div class="info-box red">
            <div class="info-box-title">SSLPeerUnverifiedException: Host name does not match</div>
            <pre><code>make groundplex-check-cert          <span class="hl-comment"># Check if cert is imported</span>
make setup-groundplex-cert          <span class="hl-comment"># Import if missing</span>
docker exec snaplogic-groundplex \
  curl -v https://salesforce-api-mock:8443/__admin/health  <span class="hl-comment"># Verify</span></code></pre>
            <p style="margin-top: 10px;"><strong>Still failing?</strong> Verify the certificate SANs include the hostname:</p>
            <pre><code>docker exec snaplogic-groundplex bash -c '
  echo | openssl s_client -connect salesforce-api-mock:8443 2>/dev/null | \
  openssl x509 -noout -text | grep -A2 "Subject Alternative Name"
'</code></pre>
        </div>

        <div class="info-box red">
            <div class="info-box-title">PKIX path building failed: unable to find valid certification path</div>
            <p>The certificate is not in the truststore. Run <code>make setup-groundplex-cert</code>.</p>
        </div>

        <div class="info-box red">
            <div class="info-box-title">Certificate import fails: "Certificate already exists"</div>
            <p>Remove the old certificate first, then re-import:</p>
            <pre><code><span class="hl-comment"># Remove existing certificate</span>
docker exec snaplogic-groundplex bash -c '
  JAVA_HOME="/opt/snaplogic/pkgs/jdk-11.0.24+8-jre"
  $JAVA_HOME/bin/keytool -delete -keystore $JAVA_HOME/lib/security/cacerts \
    -storepass changeit -alias wiremock-salesforce 2>/dev/null
  echo "Old certificate removed"
'

<span class="hl-comment"># Re-import</span>
make setup-groundplex-cert</code></pre>
        </div>

        <div class="info-box red">
            <div class="info-box-title">JCC won't restart after certificate import</div>
            <pre><code><span class="hl-comment"># Check JCC logs</span>
docker exec snaplogic-groundplex tail -n 100 /opt/snaplogic/run/log/jcc.log

<span class="hl-comment"># Force stop and start</span>
docker exec snaplogic-groundplex bash -c '
  cd /opt/snaplogic/bin
  ./jcc.sh stop
  sleep 10
  ./jcc.sh start
'</code></pre>
        </div>

        <div class="info-box red">
            <div class="info-box-title">Connection refused on HTTPS endpoint (port 8443)</div>
            <p>Ensure WireMock is running with HTTPS enabled:</p>
            <pre><code><span class="hl-comment"># Check if port 8443 is listening</span>
docker exec salesforce-api-mock netstat -tlnp | grep 8443

<span class="hl-comment"># Check WireMock logs for startup errors</span>
docker logs salesforce-api-mock --tail 50</code></pre>
        </div>
    </div>

    <div class="sub-panel" id="subtab-ts-wiremock">
        <h3>WireMock Not Responding</h3>
        <pre><code><span class="hl-comment"># Check container status</span>
docker ps | grep salesforce-api-mock

<span class="hl-comment"># Check logs</span>
docker logs salesforce-api-mock --tail 50

<span class="hl-comment"># Test health</span>
curl http://localhost:8089/__admin/health
curl -k https://localhost:8443/__admin/health

<span class="hl-comment"># Check loaded mappings</span>
curl http://localhost:8089/__admin/mappings | python3 -m json.tool

<span class="hl-comment"># Check request journal</span>
curl http://localhost:8089/__admin/requests | python3 -m json.tool</code></pre>
    </div>

    <div class="sub-panel" id="subtab-ts-jsonserver">
        <h3>JSON Server Not Working</h3>
        <pre><code><span class="hl-comment"># Check container</span>
docker ps | grep salesforce-json-mock

<span class="hl-comment"># Test direct access</span>
curl http://localhost:8082/accounts

<span class="hl-comment"># Check data file</span>
ls -la docker/salesforce/json-db/salesforce-db.json

<span class="hl-comment"># Check logs</span>
docker logs salesforce-json-mock

<span class="hl-comment"># Reset data to git version</span>
git checkout docker/salesforce/json-db/salesforce-db.json</code></pre>
    </div>

    <div class="sub-panel" id="subtab-ts-matching">
        <h3>Request Not Matching (404)</h3>
        <pre><code><span class="hl-comment"># Check unmatched requests ‚Äî this shows exactly what failed</span>
curl http://localhost:8089/__admin/requests/unmatched | python3 -m json.tool</code></pre>
        <div class="info-box yellow">
            <div class="info-box-title">Common Causes</div>
            <ul>
                <li>API version mismatch (v52.0 vs v59.0)</li>
                <li>Missing query parameter</li>
                <li>Wrong HTTP method</li>
                <li>Trailing slash difference (<code>/Account</code> vs <code>/Account/</code>)</li>
            </ul>
        </div>
    </div>

    <div class="sub-panel" id="subtab-ts-validation">
        <h3>SnapLogic Account Validation Fails</h3>
        <pre><code><span class="hl-comment"># Test OAuth manually</span>
curl -X POST http://localhost:8089/services/oauth2/token \
  -d "grant_type=password&amp;username=test&amp;password=test"

<span class="hl-comment"># Test validation query manually</span>
curl "http://localhost:8089/services/data/v52.0/query?q=SELECT+Name+FROM+Account+LIMIT+1"

<span class="hl-comment"># Test from inside Groundplex (HTTPS)</span>
docker exec snaplogic-groundplex \
  curl -k https://salesforce-api-mock:8443/services/oauth2/token \
  -X POST -d "grant_type=password&amp;username=test&amp;password=test"</code></pre>
        <h4>Port Conflicts</h4>
        <pre><code><span class="hl-comment"># Check what's using the ports</span>
lsof -i :8089
lsof -i :8443
lsof -i :8082

<span class="hl-comment"># Change ports in .env.salesforce</span>
SALESFORCE_HTTP_PORT=9089
SALESFORCE_HTTPS_PORT=9443
SALESFORCE_JSON_PORT=9082</code></pre>
    </div>
</div>

<!-- ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
     ‚ïë  TAB 11: MOCK TESTING SCOPE                                    ‚ïë
     ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù -->
<div class="tab-panel" id="tab-mock-scope">
    <h2>Mock Testing Scope: What It Proves &amp; What It Cannot Catch</h2>
    <p class="section-subtitle">Understanding the boundaries of mock testing ‚Äî specifically for Salesforce Account operations</p>

    <div class="sub-tabs" data-group="mockscope">
        <button class="sub-tab active" data-subtab="mockscope-proves">What It Proves &#x2705;</button>
        <button class="sub-tab" data-subtab="mockscope-cannot">What It Cannot Catch &#x274C;</button>
        <button class="sub-tab" data-subtab="mockscope-categories">Failure Categories</button>
        <button class="sub-tab" data-subtab="mockscope-functional">Functional Testing Gap ‚ö†Ô∏è</button>
        <button class="sub-tab" data-subtab="mockscope-bridge">Webhook Bridge ‚úÖ</button>
        <button class="sub-tab" data-subtab="mockscope-pyramid">Testing Pyramid</button>
    </div>

    <!-- ‚îÄ‚îÄ Sub-tab: What It Proves ‚îÄ‚îÄ -->
    <div class="sub-panel active" id="subtab-mockscope-proves">
        <h3>What Mock Testing PROVES</h3>
        <p>When your mock tests pass, here is <strong>exactly</strong> what you've validated:</p>

        <div class="card-grid">
            <div class="card" style="border-left: 4px solid var(--success);">
                <h4>&#x2705; End-to-End Connectivity</h4>
                <p>Pipeline &#x2192; Groundplex &#x2192; Docker Network &#x2192; WireMock (HTTPS 8443). SSL handshake works, hostname resolves, port is reachable.</p>
            </div>
            <div class="card" style="border-left: 4px solid var(--success);">
                <h4>&#x2705; OAuth Token Flow</h4>
                <p>Pipeline sends credentials, receives access token, attaches it to subsequent API calls. The authentication handshake completes.</p>
            </div>
            <div class="card" style="border-left: 4px solid var(--success);">
                <h4>&#x2705; Account Validation</h4>
                <p>SnapLogic account config (Login URL, Username, Password, API version, Sandbox) is <strong>structurally correct</strong>. The validation query returns a result.</p>
            </div>
            <div class="card" style="border-left: 4px solid var(--success);">
                <h4>&#x2705; Correct URL Format</h4>
                <p>The Snap builds the right Salesforce REST API URL. Wrong object name, corrupted API version, or bad path would be caught here.</p>
            </div>
            <div class="card" style="border-left: 4px solid var(--success);">
                <h4>&#x2705; Response Parsing</h4>
                <p>Pipeline correctly handles <code>201 Created</code> with Salesforce-format JSON. Downstream Snaps can read the returned record ID.</p>
            </div>
            <div class="card" style="border-left: 4px solid var(--success);">
                <h4>&#x2705; Payload Template &amp; Env Vars</h4>
                <p>Environment variable substitution works in <code>acc_salesforce.json</code>. Template is valid JSON. All required fields are present.</p>
            </div>
            <div class="card" style="border-left: 4px solid var(--success);">
                <h4>&#x2705; CI/CD Automation Chain</h4>
                <p>Robot Framework orchestration works: start services &#x2192; create account &#x2192; validate &#x2192; run pipeline &#x2192; check results.</p>
            </div>
            <div class="card" style="border-left: 4px solid var(--success);">
                <h4>&#x2705; SSL Certificate Trust</h4>
                <p>Self-signed certificate is properly imported into Groundplex's Java truststore. HTTPS works without errors.</p>
            </div>
            <div class="card" style="border-left: 4px solid #1565c0; background-color: #e3f2fd;">
                <h4>&#x2705; CRUD Data Persistence (via Webhook Bridge)</h4>
                <p>Account data sent through WireMock is <strong>automatically persisted</strong> in JSON Server via webhook. You can verify field values, record counts, and data integrity.</p>
                <pre style="margin-top: 8px; font-size: 0.85em;"><code>Pipeline sends &#x2192; WireMock returns Salesforce response &#x2192; Webhook fires &#x2192; JSON Server stores data
Verify: <span class="hl-success">curl http://localhost:8082/accounts?Name=Acme+Corp</span> &#x2705;</code></pre>
            </div>
        </div>

        <h4 style="margin-top: 24px;">What CRUD Verification Covers</h4>
        <table>
            <thead><tr><th>Verification</th><th>How</th><th>Example</th></tr></thead>
            <tbody>
                <tr><td><strong>Data was created</strong></td><td>Check JSON Server record count increased</td><td><code>curl http://localhost:8082/accounts</code></td></tr>
                <tr><td><strong>Field values are correct</strong></td><td>Query by field name, verify values match</td><td><code>curl http://localhost:8082/accounts?Name=Acme+Corp</code></td></tr>
                <tr><td><strong>Data persists to disk</strong></td><td>Check <code>salesforce-db.json</code> file</td><td><code>cat docker/salesforce/json-db/salesforce-db.json</code></td></tr>
                <tr><td><strong>Multiple records work</strong></td><td>Create several, verify all appear</td><td>Count before vs after</td></tr>
                <tr><td><strong>Read back works</strong></td><td>GET from JSON Server after Create</td><td><code>curl http://localhost:8082/accounts/{id}</code></td></tr>
                <tr><td><strong>Update was logged</strong></td><td>Check <code>/account_updates</code> for audit entry</td><td><code>curl http://localhost:8082/account_updates</code></td></tr>
                <tr><td><strong>Delete was logged</strong></td><td>Check <code>/account_deletes</code> for audit entry</td><td><code>curl http://localhost:8082/account_deletes</code></td></tr>
            </tbody>
        </table>
        <p style="margin-top: 8px; font-size: 0.9em; color: #666;"><strong>Note:</strong> CRUD verification uses the <strong>webhook bridge</strong> (<code>serveEventListeners</code> in <code>04-create-account.json</code>, <code>07-update-account.json</code>, <code>08-delete-account.json</code>). See the <em>Webhook Bridge</em> tab for full details.</p>

        <div class="info-box green" style="margin-top: 24px;">
            <div class="info-box-title">&#x2705; Summary ‚Äî When mock tests pass you can confidently say:</div>
            <ul>
                <li>"My pipeline is wired correctly"</li>
                <li>"My SnapLogic account config is structurally valid"</li>
                <li>"OAuth token flow completes"</li>
                <li>"Account validation handshake works"</li>
                <li>"Create Snap sends the right URL to the right endpoint"</li>
                <li>"My pipeline can parse Salesforce-format responses"</li>
                <li>"SSL certificates are properly trusted"</li>
                <li>"My entire CI/CD automation chain works end-to-end"</li>
                <li><strong>"Account data actually persisted via webhook to JSON Server"</strong></li>
                <li><strong>"Field values match what the pipeline sent"</strong></li>
                <li>"Nothing is broken in MY code"</li>
            </ul>
        </div>
    </div>

    <!-- ‚îÄ‚îÄ Sub-tab: What It Cannot Catch ‚îÄ‚îÄ -->
    <div class="sub-panel" id="subtab-mockscope-cannot">
        <h3>What Mock Testing CANNOT Catch</h3>
        <p>These pass in mock but can <strong>fail in real Salesforce</strong> ‚Äî the most dangerous category:</p>

        <table>
            <thead><tr><th>Problem</th><th>Real SF</th><th>Mock</th><th>Salesforce Error Code</th></tr></thead>
            <tbody>
                <tr><td>Duplicate record</td><td>&#x274C;</td><td>&#x2705;</td><td><code>DUPLICATE_VALUE</code></td></tr>
                <tr><td>Required field missing in body</td><td>&#x274C;</td><td>&#x2705;</td><td><code>REQUIRED_FIELD_MISSING</code></td></tr>
                <tr><td>Field-level security blocks access</td><td>&#x274C;</td><td>&#x2705;</td><td><code>INSUFFICIENT_ACCESS</code></td></tr>
                <tr><td>Invalid picklist value</td><td>&#x274C;</td><td>&#x2705;</td><td><code>INVALID_OR_NULL_FOR_RESTRICTED_PICKLIST</code></td></tr>
                <tr><td>Validation rule fails</td><td>&#x274C;</td><td>&#x2705;</td><td>Custom validation message</td></tr>
                <tr><td>Record type enforcement</td><td>&#x274C;</td><td>&#x2705;</td><td><code>INVALID_RECORD_TYPE</code></td></tr>
                <tr><td>Apex trigger rejects data</td><td>&#x274C;</td><td>&#x2705;</td><td>Trigger error message</td></tr>
                <tr><td>Field length exceeded (Name &gt; 255 chars)</td><td>&#x274C;</td><td>&#x2705;</td><td><code>STRING_TOO_LONG</code></td></tr>
                <tr><td>Data type mismatch</td><td>&#x274C;</td><td>&#x2705;</td><td><code>INVALID_TYPE</code></td></tr>
                <tr><td>Governor limits hit</td><td>&#x274C;</td><td>&#x2705;</td><td><code>LIMIT_EXCEEDED</code></td></tr>
                <tr><td>API rate limit exceeded</td><td>&#x274C;</td><td>&#x2705;</td><td><code>REQUEST_LIMIT_EXCEEDED</code></td></tr>
                <tr><td>Cross-object relationship invalid</td><td>&#x274C;</td><td>&#x2705;</td><td><code>INVALID_CROSS_REFERENCE_KEY</code></td></tr>
                <tr><td>Sharing rule violation</td><td>&#x274C;</td><td>&#x2705;</td><td><code>INSUFFICIENT_ACCESS_ON_CROSS_REFERENCE_ENTITY</code></td></tr>
                <tr><td>Auth credentials expired</td><td>&#x274C;</td><td>&#x2705;</td><td><code>INVALID_SESSION_ID</code></td></tr>
                <tr><td>Salesforce down / maintenance</td><td>&#x274C;</td><td>&#x2705;</td><td>Connection timeout</td></tr>
            </tbody>
        </table>

        <div class="info-box yellow" style="margin-top: 20px;">
            <div class="info-box-title">&#x26A0;&#xFE0F; The Trap ‚Äî Example</div>
            <pre><code>Your Pipeline:  "Create Account: Name = Acme Corp"

<span class="hl-success">WireMock says:</span>  "Sure! Here's ID 001000000000TEST01"  <span class="hl-success">&#x2705;</span>
               (doesn't care what you sent, always says yes)

<span class="hl-error">Real Salesforce:</span> "REJECTED! 'Acme Corp' already exists.
                  Duplicate rule violation."  <span class="hl-error">&#x274C;</span></code></pre>
            <p style="margin-top: 12px;">WireMock <strong>always returns the same canned response</strong> ‚Äî it doesn't look at the request body, doesn't check for duplicates, doesn't enforce any business rules.</p>
        </div>

        <div class="info-box red" style="margin-top: 16px;">
            <div class="info-box-title">&#x274C; Bottom Line</div>
            <p style="font-size: 1.05em;"><strong>Mock tests prove your pipeline's PLUMBING works</strong> (connectivity, config, URL format, response handling). They do <strong>NOT</strong> prove Salesforce will <strong>ACCEPT</strong> your data (business rules, duplicates, permissions, validation).</p>
        </div>
    </div>

    <!-- ‚îÄ‚îÄ Sub-tab: Failure Categories ‚îÄ‚îÄ -->
    <div class="sub-panel" id="subtab-mockscope-categories">
        <h3>Three Categories of Failures</h3>

        <div class="info-box blue" style="margin-bottom: 20px;">
            <div class="info-box-title">Category 1: Failures BEFORE Reaching the URL</div>
            <p><strong>Both real and mock fail &#x274C; &#x274C;</strong> ‚Äî Mock catches these just like real Salesforce would.</p>
            <table>
                <thead><tr><th>Problem</th><th>Real SF</th><th>Mock</th></tr></thead>
                <tbody>
                    <tr><td>Snap configuration error (wrong field mapping)</td><td>&#x274C;</td><td>&#x274C;</td></tr>
                    <tr><td>Pipeline logic error (bad expression, null input)</td><td>&#x274C;</td><td>&#x274C;</td></tr>
                    <tr><td>Missing required field in the input document</td><td>&#x274C;</td><td>&#x274C;</td></tr>
                    <tr><td>SnapLogic account not configured</td><td>&#x274C;</td><td>&#x274C;</td></tr>
                    <tr><td>Groundplex is down</td><td>&#x274C;</td><td>&#x274C;</td></tr>
                </tbody>
            </table>
            <p style="margin-top: 8px; color: var(--gray-600);">The error happens inside SnapLogic before any HTTP request is sent. Doesn't matter if it's real or mock.</p>
        </div>

        <div class="info-box yellow" style="margin-bottom: 20px;">
            <div class="info-box-title">Category 2: Failures AT the Server</div>
            <p><strong>Mock PASSES &#x2705;, Real FAILS &#x274C;</strong> ‚Äî This is the most dangerous category!</p>
            <p>WireMock always says "yes" ‚Äî it doesn't validate request bodies, check for duplicates, enforce security rules, or run triggers. See the <strong>"What It Cannot Catch"</strong> sub-tab for the full list.</p>
        </div>

        <div class="info-box purple">
            <div class="info-box-title">Category 3: Failures BETWEEN Snap and Server</div>
            <p><strong>Depends on the specific issue:</strong></p>
            <table>
                <thead><tr><th>Problem</th><th>Real SF</th><th>Mock</th><th>Why</th></tr></thead>
                <tbody>
                    <tr><td>SSL/Certificate error</td><td>&#x274C;</td><td>&#x274C; or &#x2705;</td><td>Fails if cert not imported; passes if imported</td></tr>
                    <tr><td>DNS resolution failure</td><td>&#x274C;</td><td>&#x274C; or &#x2705;</td><td>Fails if Docker network broken; passes if healthy</td></tr>
                    <tr><td>Wrong API version in URL</td><td>&#x274C;</td><td>&#x2705;</td><td>Regex matches any version ‚Äî mock won't catch this!</td></tr>
                    <tr><td>Network firewall blocks connection</td><td>&#x274C;</td><td>&#x2705;</td><td>All local in Docker, no firewall</td></tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- ‚îÄ‚îÄ Sub-tab: Functional Testing Gap ‚îÄ‚îÄ -->
    <div class="sub-panel" id="subtab-mockscope-functional">
        <h3>The Functional Testing Gap ‚Äî What Mocks Still Cannot Verify</h3>
        <p>WireMock alone returns <strong>canned responses</strong> ‚Äî it doesn't validate request data or enforce business rules. However, the <strong>Webhook Bridge</strong> (see <em>Webhook Bridge</em> tab) now covers basic CRUD verification by persisting Account data to JSON Server. This section explains what's covered and what still requires a real Salesforce sandbox.</p>

        <div class="info-box yellow" style="margin-bottom: 20px;">
            <div class="info-box-title">&#x26A0;&#xFE0F; WireMock's Canned Responses (Without Webhook Bridge)</div>
            <pre><code>Send "Acme Corp" with BillingCity = "San Francisco"
  &#x2192; WireMock returns: <span class="hl-success">{"id": "001xx...", "success": true}</span>

Send "" (empty name) with no other fields
  &#x2192; WireMock returns: <span class="hl-success">{"id": "001xx...", "success": true}</span>  &#x2190; <span class="hl-error">SAME RESPONSE!</span>

Send complete garbage {"xyz": 123}
  &#x2192; WireMock returns: <span class="hl-success">{"id": "001xx...", "success": true}</span>  &#x2190; <span class="hl-error">STILL SAME!</span></code></pre>
            <p style="margin-top: 12px;">WireMock only matches HTTP method + URL pattern, then returns the mapping response. It does <strong>not validate request data</strong>. However, the <strong>webhook bridge forwards the request body to JSON Server</strong>, so the data <strong>is</strong> stored and can be verified ‚Äî even though WireMock itself doesn't validate it.</p>
        </div>

        <h4>What "Functional Data Verification" Means</h4>
        <p>Functional testing verifies that the <strong>data itself</strong> is correct ‚Äî not just that the plumbing works. Some are now covered by the <strong>Webhook Bridge</strong> (see <em>Webhook Bridge</em> tab), others still need real Salesforce:</p>

        <table>
            <thead><tr><th>Verification Type</th><th>What It Checks</th><th>With Webhook Bridge</th></tr></thead>
            <tbody>
                <tr style="background-color: #e8f5e9;"><td><strong>Record creation</strong></td><td>Did the Account actually get created?</td><td>&#x2705; JSON Server stores it</td></tr>
                <tr style="background-color: #e8f5e9;"><td><strong>Field value accuracy</strong></td><td>Is Name = "Acme Corp" and BillingCity = "San Francisco"?</td><td>&#x2705; Query JSON Server by field</td></tr>
                <tr><td><strong>Field data types</strong></td><td>Is AnnualRevenue stored as a number, not a string?</td><td>&#x26A0;&#xFE0F; JSON Server stores as-is (no schema)</td></tr>
                <tr style="background-color: #e8f5e9;"><td><strong>Record count</strong></td><td>Were exactly 5 Accounts created (not 4, not 6)?</td><td>&#x2705; Count records in JSON Server</td></tr>
                <tr><td><strong>Record relationships</strong></td><td>Is the Contact linked to the right Account via AccountId?</td><td>&#x274C; No referential integrity checks</td></tr>
                <tr style="background-color: #e8f5e9;"><td><strong>Record updates</strong></td><td>Did the update change BillingCity from "LA" to "SF"?</td><td>&#x2705; Update logged to <code>/account_updates</code> with changed fields</td></tr>
                <tr style="background-color: #e8f5e9;"><td><strong>Record deletion</strong></td><td>Is the Account actually gone after DELETE?</td><td>&#x2705; Delete logged to <code>/account_deletes</code> with Salesforce ID</td></tr>
                <tr><td><strong>Query results</strong></td><td>Does SOQL return the right data?</td><td>&#x274C; Returns static response for SOQL queries</td></tr>
                <tr><td><strong>Bulk operations</strong></td><td>Did all 1000 records succeed?</td><td>&#x274C; Returns one canned response, not per-record</td></tr>
                <tr><td><strong>Calculated fields</strong></td><td>Did the formula field FullAddress compute correctly?</td><td>&#x274C; No formula engine</td></tr>
                <tr><td><strong>Workflow side effects</strong></td><td>Did the "Welcome Email" workflow fire?</td><td>&#x274C; No workflow engine</td></tr>
                <tr><td><strong>Audit trail</strong></td><td>Is CreatedBy, CreatedDate correct?</td><td>&#x274C; No audit tracking</td></tr>
            </tbody>
        </table>

        <h4 style="margin-top: 30px;">The Delivery Truck Analogy</h4>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
            <div class="info-box green">
                <div class="info-box-title">&#x1F69A; Mock = Testing the DELIVERY TRUCK</div>
                <p>&#x2705; Can the truck start? <em>(Pipeline executes)</em></p>
                <p>&#x2705; Does it know the address? <em>(URL format correct)</em></p>
                <p>&#x2705; Does it have the right keys? <em>(OAuth works)</em></p>
                <p>&#x2705; Can it reach the warehouse? <em>(SSL connectivity)</em></p>
                <p>&#x2705; Did warehouse give a receipt? <em>(Response parsed)</em></p>
            </div>
            <div class="info-box blue">
                <div class="info-box-title">&#x1F4E6; Functional = Testing PACKAGE CONTENTS</div>
                <p>&#x2705; Is the right item inside? <em>(Field values &#x2014; YES, via webhook bridge!)</em></p>
                <p>&#x2705; Is the quantity correct? <em>(Record count &#x2014; YES, check JSON Server!)</em></p>
                <p>&#x274C; Is it damaged? <em>(Data integrity &#x2014; needs real Salesforce)</em></p>
                <p>&#x274C; Does it match the order? <em>(Business rules &#x2014; needs real Salesforce)</em></p>
                <p>&#x274C; Was it placed on the right shelf? <em>(Relationships &#x2014; needs real Salesforce)</em></p>
            </div>
        </div>

        <h4 style="margin-top: 30px;">What Real Functional Testing Looks Like (Account Example)</h4>
        <p>To truly verify an Account was created correctly, you'd need a <strong>real Salesforce sandbox</strong>:</p>

        <pre><code><span class="hl-comment">Step 1: CREATE ‚Äî Send Account data via pipeline</span>
  POST /services/data/v59.0/sobjects/Account
  Body: {"Name": "Acme Corp", "BillingCity": "San Francisco", "Industry": "Technology"}
  &#x2192; Response: <span class="hl-success">{"id": "001xx000003REAL1", "success": true}</span>

<span class="hl-comment">Step 2: QUERY BACK ‚Äî Verify the data was actually stored</span>
  GET /services/data/v59.0/query?q=SELECT+Name,BillingCity,Industry+FROM+Account+WHERE+Id='001xx000003REAL1'
  &#x2192; Response: <span class="hl-success">{"records": [{"Name": "Acme Corp", "BillingCity": "San Francisco", "Industry": "Technology"}]}</span>

<span class="hl-comment">Step 3: ASSERT ‚Äî Compare actual vs expected</span>
  Assert Name        == "Acme Corp"          <span class="hl-success">&#x2705;</span>
  Assert BillingCity == "San Francisco"      <span class="hl-success">&#x2705;</span>
  Assert Industry    == "Technology"         <span class="hl-success">&#x2705;</span>

<span class="hl-comment">Step 4: CLEANUP ‚Äî Delete test data</span>
  DELETE /services/data/v59.0/sobjects/Account/001xx000003REAL1</code></pre>

        <div class="info-box yellow" style="margin-top: 16px;">
            <div class="info-box-title">&#x26A0;&#xFE0F; Why This Is Impossible with WireMock</div>
            <p><strong>Step 2 fails conceptually</strong> ‚Äî WireMock would return the same canned query response regardless of what was created in Step 1. There is <strong>no state between requests</strong>. WireMock doesn't remember anything ‚Äî each request is completely independent.</p>
        </div>

        <h4 style="margin-top: 30px;">Side-by-Side: Mock vs Real for Account Operations</h4>
        <table>
            <thead><tr><th>Operation</th><th>With Webhook Bridge</th><th>Needs Real Salesforce</th></tr></thead>
            <tbody>
                <tr style="background-color: #e8f5e9;"><td><strong>Create Account</strong></td><td>&#x2705; Data persisted in JSON Server, fields verifiable</td><td>Business rules, triggers, duplicate checks</td></tr>
                <tr style="background-color: #e8f5e9;"><td><strong>Read Account</strong></td><td>&#x2705; Can read back from JSON Server by field query</td><td>SOQL queries, relationship traversal</td></tr>
                <tr style="background-color: #e8f5e9;"><td><strong>Update Account</strong></td><td>&#x2705; Update logged to JSON Server with changed fields</td><td>Before/after state verification</td></tr>
                <tr style="background-color: #e8f5e9;"><td><strong>Delete Account</strong></td><td>&#x2705; Delete logged to JSON Server with Salesforce ID</td><td>Confirm record is gone</td></tr>
                <tr><td><strong>Query Accounts</strong></td><td>&#x274C; Static SOQL response</td><td>Real SOQL query execution</td></tr>
                <tr><td><strong>Bulk Create</strong></td><td>&#x274C; Single canned response</td><td>Per-record results</td></tr>
            </tbody>
        </table>

        <h4 style="margin-top: 30px;">WireMock Always Returns Success</h4>
        <p>WireMock does <strong>not validate</strong> anything about the request. It matches the URL pattern and returns the canned response regardless of what data you send:</p>
        <pre><code><span class="hl-comment"># Empty body ‚Äî still returns 201 success</span>
curl -s -X POST http://localhost:8089/services/data/v59.0/sobjects/Account \
  -H "Content-Type: application/json" -d '{}'

<span class="hl-comment"># Wrong fields ‚Äî still returns 201 success</span>
curl -s -X POST http://localhost:8089/services/data/v59.0/sobjects/Account \
  -H "Content-Type: application/json" -d '{"Nonsense": "xyz"}'</code></pre>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-top: 16px;">
            <div class="info-box green">
                <div class="info-box-title">&#x2705; What Mock Testing CATCHES</div>
                <p>&#x2022; Pipeline can't connect (wrong URL, SSL, network)</p>
                <p>&#x2022; OAuth flow is misconfigured</p>
                <p>&#x2022; Response parsing fails</p>
                <p>&#x2022; Pipeline crashes during execution</p>
                <p>&#x2022; Account/Snap configuration is wrong</p>
                <p>&#x2022; Data persisted via webhook (field values, counts)</p>
            </div>
            <div class="info-box red">
                <div class="info-box-title">&#x274C; What Mock Testing CANNOT Catch</div>
                <p>&#x2022; Required fields missing (e.g. Account without Name)</p>
                <p>&#x2022; Invalid field names</p>
                <p>&#x2022; Wrong data types (string where number expected)</p>
                <p>&#x2022; Duplicate records</p>
                <p>&#x2022; Business rule violations</p>
                <p>&#x2022; Invalid picklist values</p>
            </div>
        </div>

        <div class="info-box purple" style="margin-top: 16px;">
            <div class="info-box-title">&#x1F4A1; In Short</div>
            <p>Mock testing catches <strong>plumbing failures</strong> (is the pipeline wired correctly?), not <strong>data failures</strong> (is the data valid?). It's like testing that a letter gets to the post office ‚Äî not that the letter contains the right content.</p>
        </div>

        <h4 style="margin-top: 30px;">SOQL Query Responses Are Static</h4>
        <p>The query mappings (files 05, 11, 17, 23, 29) return <strong>hardcoded responses</strong>. No matter what fields, WHERE clause, ORDER BY, or LIMIT you put in the SOQL query, WireMock returns the <strong>same fixed response</strong>. It does not parse SOQL or query JSON Server dynamically.</p>

        <pre><code><span class="hl-comment"># These ALL return the exact same canned response:</span>
curl "http://localhost:8089/services/data/v59.0/query?q=SELECT+Name+FROM+Account"
curl "http://localhost:8089/services/data/v59.0/query?q=SELECT+Name+FROM+Account+WHERE+Name='Acme'"
curl "http://localhost:8089/services/data/v59.0/query?q=SELECT+Id,Name,Industry+FROM+Account+LIMIT+100"</code></pre>

        <table style="margin-top: 16px;">
            <thead><tr><th>What's NOT Possible with WireMock Queries</th></tr></thead>
            <tbody>
                <tr><td>&#x274C; <strong>Dynamic SOQL parsing</strong> &#x2014; <code>WHERE Name = 'Acme'</code> is ignored, same response returned</td></tr>
                <tr><td>&#x274C; <strong>Returning webhook-created data</strong> &#x2014; Data persisted via webhook to JSON Server is NOT queryable through WireMock's SOQL endpoint</td></tr>
                <tr><td>&#x274C; <strong>Filtering, sorting, or limiting</strong> &#x2014; <code>ORDER BY</code>, <code>LIMIT</code>, <code>OFFSET</code> have no effect</td></tr>
                <tr><td>&#x274C; <strong>Cross-object queries</strong> &#x2014; <code>SELECT Account.Name FROM Contact</code> returns the same single-object response</td></tr>
                <tr><td>&#x274C; <strong>Aggregate queries</strong> &#x2014; <code>SELECT COUNT(Id) FROM Account</code> returns the same record response</td></tr>
                <tr><td>&#x274C; <strong>Dynamic record counts</strong> &#x2014; <code>totalSize</code> is always hardcoded (typically <code>1</code>)</td></tr>
            </tbody>
        </table>

        <div class="info-box yellow" style="margin-top: 16px;">
            <div class="info-box-title">&#x26A0;&#xFE0F; Why?</div>
            <p>WireMock is a <strong>URL pattern matcher</strong>, not a query engine. It sees the SOQL as a query string parameter and matches it using <code>contains: "Account"</code> (or "Contact", etc.). It has no ability to parse SQL-like syntax, execute logic, or return dynamic results.</p>
        </div>

        <div class="info-box blue" style="margin-top: 16px;">
            <div class="info-box-title">&#x1F4DD; Workaround</div>
            <p>If your pipeline runs a <strong>known, predictable SOQL query</strong>, you can create additional mapping files with more specific <code>contains</code> matchers to return tailored responses for specific queries. WireMock picks the most specific match.</p>
        </div>

        <h4 style="margin-top: 30px;">When Is Each Testing Type Needed?</h4>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
            <div class="info-box green">
                <div class="info-box-title">&#x2705; Mock Testing is SUFFICIENT When</div>
                <p>&#x2022; You're in early development (building pipelines)</p>
                <p>&#x2022; You're running CI/CD pipeline checks (speed matters)</p>
                <p>&#x2022; You're testing connectivity and configuration</p>
                <p>&#x2022; You're onboarding new developers</p>
            </div>
            <div class="info-box red">
                <div class="info-box-title">&#x274C; Functional Testing is REQUIRED When</div>
                <p>&#x2022; You need to verify data accuracy before go-live</p>
                <p>&#x2022; You're running UAT (User Acceptance Testing)</p>
                <p>&#x2022; You're validating business rules and workflows</p>
                <p>&#x2022; You're testing data migration correctness</p>
                <p>&#x2022; You need to prove compliance (audit, SOX, GDPR)</p>
                <p>&#x2022; You're testing cross-object relationships</p>
            </div>
        </div>

        <h4 style="margin-top: 30px;">The Complete Testing Strategy</h4>
        <pre><code>&#x250C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2510;
&#x2502;                    COMPLETE TESTING STRATEGY                         &#x2502;
&#x251C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2524;
&#x2502;                                                                     &#x2502;
&#x2502;  <span class="hl-success">LAYER 1: Mock Testing (This Project)</span> &#x2190; Fast, Free, Automated      &#x2502;
&#x2502;  &#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;                              &#x2502;
&#x2502;  &#x2705; Pipeline plumbing    &#x2705; OAuth flow                            &#x2502;
&#x2502;  &#x2705; URL format           &#x2705; Response parsing                      &#x2502;
&#x2502;  &#x2705; SSL/TLS connectivity &#x2705; Account configuration                 &#x2502;
&#x2502;  Runs: Every commit, every CI build, every developer push           &#x2502;
&#x2502;                                                                     &#x2502;
&#x2502;  <span class="hl-keyword">LAYER 2: Sandbox Functional Testing</span> &#x2190; Slow, Limited, Real Data    &#x2502;
&#x2502;  &#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;                              &#x2502;
&#x2502;  &#x2705; Data creation verified   &#x2705; Business rules enforced              &#x2502;
&#x2502;  &#x2705; Field values correct     &#x2705; Workflows/triggers fire              &#x2502;
&#x2502;  &#x2705; Relationships valid      &#x2705; Permissions respected                &#x2502;
&#x2502;  Runs: Before releases, during UAT, scheduled nightly              &#x2502;
&#x2502;                                                                     &#x2502;
&#x2502;  <span class="hl-error">LAYER 3: Production Validation</span> &#x2190; Real World, Monitored            &#x2502;
&#x2502;  &#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;                              &#x2502;
&#x2502;  &#x2705; Real data volumes    &#x2705; Real user permissions                 &#x2502;
&#x2502;  &#x2705; Real integrations    &#x2705; Real network conditions               &#x2502;
&#x2502;  Runs: Post-deployment smoke tests, monitoring dashboards          &#x2502;
&#x2502;                                                                     &#x2502;
&#x2502;  &#x26A1; Speed decreases as you go up &#x2502; &#x1F3AF; Confidence increases as you go up &#x2502;
&#x2502;                                                                     &#x2502;
&#x2514;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2518;</code></pre>

        <div class="info-box purple" style="margin-top: 20px;">
            <div class="info-box-title">&#x1F4A1; Bottom Line</div>
            <p style="font-size: 1.05em;">Mock testing catches "the plane won't start" problems instantly. With the <strong>webhook bridge</strong>, it can now also verify that <strong>Account data was created, updated, and deleted</strong> via JSON Server. But for business rules, triggers, permissions, and complex queries, you still need a <strong>real Salesforce sandbox</strong>.</p>
        </div>
    </div>

    <!-- ‚îÄ‚îÄ Sub-tab: Bridging the Gap ‚îÄ‚îÄ -->
    <div class="sub-panel" id="subtab-mockscope-bridge">
        <h3>WireMock &#x2192; JSON Server Webhook Bridge</h3>
        <p>WireMock's built-in webhook feature (<code>serveEventListeners</code>) connects WireMock and JSON Server for full CRUD verification. When SnapLogic (or curl, or Robot Framework) creates, updates, or deletes an Account through WireMock, the data <strong>automatically flows to JSON Server</strong> for persistence and audit logging. No custom JARs, no middleware, no Docker image changes &#x2014; this uses WireMock 3.3.1's built-in webhook support.</p>

        <!-- How It Works -->
        <h4 style="margin-top: 24px;">How It Works: <code>serveEventListeners</code> (Webhooks)</h4>
        <p>WireMock fires a secondary HTTP call to JSON Server <strong>after</strong> returning the main Salesforce-formatted response to the caller.</p>

        <div class="info-box green" style="margin-top: 16px;">
            <div class="info-box-title">&#x2705; The Webhook Bridge Flow</div>
            <pre><code>  SnapLogic / curl / Robot Framework
       &#x2502;
       &#x2502;  POST /services/data/v59.0/sobjects/Account
       &#x2502;  Body: {"Name": "Acme Corp", "Type": "Customer", "Industry": "Technology"}
       &#x25BC;
  &#x250C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2510;
  &#x2502;  WireMock (salesforce-api-mock, port 8089/8443)    &#x2502;
  &#x2502;                                                    &#x2502;
  &#x2502;  <span class="hl-keyword">&#x2460;</span> Matches 04-create-account.json mapping         &#x2502;
  &#x2502;  <span class="hl-keyword">&#x2461;</span> Builds response with dynamic ID (response-template) &#x2502;
  &#x2502;  <span class="hl-keyword">&#x2462;</span> Returns 201 to caller immediately              &#x2502;
  &#x2502;  <span class="hl-keyword">&#x2463;</span> THEN fires webhook to JSON Server (async ~50ms) &#x2502;
  &#x2514;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x252C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x252C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2518;
            &#x2502;                      &#x2502;
     <span class="hl-success">&#x2462; Response back</span>        <span class="hl-keyword">&#x2463; Webhook fires</span>
     to caller                 POST /accounts
            &#x2502;                      &#x2502;
            &#x25BC;                      &#x25BC;
  Caller receives:       &#x250C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2510;
  {                      &#x2502;  JSON Server (port 8082) &#x2502;
    "id": "001AB...",    &#x2502;                         &#x2502;
    "success": true,     &#x2502;  <span class="hl-success">&#x2464; Saves to memory</span>      &#x2502;
    "errors": []         &#x2502;  <span class="hl-success">&#x2465; Writes to disk</span>       &#x2502;
  }                      &#x2502;    (salesforce-db.json)  &#x2502;
                         &#x2514;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2518;</code></pre>
        </div>

        <!-- Create Account Mapping -->
        <h4 style="margin-top: 30px;">Create Account Mapping: <code>04-create-account.json</code></h4>
        <pre><code>{
  "priority": 1,
  "name": <span class="hl-string">"Create Account - Persist to JSON Server via Webhook"</span>,
  "request": {
    "method": "POST",
    "urlPathPattern": "/services/data/v[0-9]+\\\\.[0-9]+/sobjects/Account"
  },
  "response": {
    "status": 201,
    "headers": { "Content-Type": "application/json" },
    "jsonBody": {
      "id": <span class="hl-string">"001{{randomValue type='ALPHANUMERIC' length=15 uppercase=true}}"</span>,
      "success": true,
      "errors": []
    },
    "transformers": [<span class="hl-string">"response-template"</span>]
  },
  <span class="hl-keyword">"serveEventListeners"</span>: [
    {
      "name": "webhook",
      "parameters": {
        "method": "POST",
        "url": <span class="hl-string">"http://salesforce-json-mock/accounts"</span>,
        "headers": { "Content-Type": "application/json" },
        "body": <span class="hl-string">"{{originalRequest.body}}"</span>
      }
    }
  ]
}</code></pre>

        <div class="info-box blue" style="margin-top: 16px;">
            <div class="info-box-title">&#x1F4DD; Key Details</div>
            <ul style="margin: 8px 0;">
                <li><code>randomValue type='ALPHANUMERIC' length=15</code> generates a unique Salesforce-style ID per call</li>
                <li><code>"transformers": ["response-template"]</code> enables Handlebars templating in the response</li>
                <li><code>originalRequest.body</code> (not <code>request.body</code>) &#x2014; webhook-specific variable in WireMock 3.x</li>
                <li>The webhook fires <strong>asynchronously</strong> after the response is sent (~50ms delay)</li>
            </ul>
        </div>

        <!-- Read Account Mapping -->
        <h4 style="margin-top: 30px;">Read Account Mapping: <code>06-read-single-account.json</code></h4>
        <p>Reads a single Account by ID from the URL path:</p>
        <pre><code>{
  "priority": 1,
  "name": <span class="hl-string">"Read Single Account by ID"</span>,
  "request": {
    "method": "GET",
    "urlPathPattern": "/services/data/v[0-9]+\\\\.[0-9]+/sobjects/Account/[A-Za-z0-9]+"
  },
  "response": {
    "status": 200,
    "headers": { "Content-Type": "application/json" },
    "body": "{\"attributes\":{\"type\":\"Account\",\"url\":\"<span class="hl-keyword">{{request.path}}</span>\"},\"Id\":\"<span class="hl-keyword">{{request.pathSegments.[5]}}</span>\", ...}",
    "transformers": [<span class="hl-string">"response-template"</span>]
  }
}</code></pre>
        <p style="margin-top: 8px;"><code>{{request.pathSegments.[5]}}</code> extracts the Account ID from the URL (6th segment: <code>/services/data/v59.0/sobjects/Account/<strong>{ID}</strong></code>).</p>

        <!-- Update Account Mapping -->
        <h4 style="margin-top: 30px;">Update Account Mapping: <code>07-update-account.json</code></h4>
        <p>Handles PATCH requests for updating Account fields. Logs the update to a separate audit collection:</p>
        <pre><code>{
  "priority": 1,
  "name": <span class="hl-string">"Update Account - Log to JSON Server via Webhook"</span>,
  "request": {
    "method": "PATCH",
    "urlPathPattern": "/services/data/v[0-9]+\\\\.[0-9]+/sobjects/Account/[A-Za-z0-9]+"
  },
  "response": {
    "status": 204,
    "transformers": [<span class="hl-string">"response-template"</span>]
  },
  <span class="hl-keyword">"serveEventListeners"</span>: [
    {
      "name": "webhook",
      "parameters": {
        "method": "POST",
        "url": <span class="hl-string">"http://salesforce-json-mock/account_updates"</span>,
        "headers": { "Content-Type": "application/json" },
        "body": <span class="hl-string">"{\"_sfId\": \"{{request.pathSegments.[5]}}\", \"_operation\": \"UPDATE\", \"_timestamp\": \"{{now}}\", \"_updatedFields\": {{originalRequest.body}} }"</span>
      }
    }
  ]
}</code></pre>

        <div class="info-box blue" style="margin-top: 16px;">
            <div class="info-box-title">&#x1F4DD; Key Details</div>
            <ul style="margin: 8px 0;">
                <li>Salesforce returns <strong>204 No Content</strong> for successful PATCH &#x2014; no response body</li>
                <li><code>_sfId</code> captures the Salesforce Account ID from the URL path</li>
                <li><code>_updatedFields</code> contains the request body (changed fields) via <code>{{originalRequest.body}}</code></li>
                <li><code>{{now}}</code> adds an ISO timestamp for audit tracking</li>
                <li>Webhook POSTs to <code>/account_updates</code> (separate audit collection, not <code>/accounts</code>)</li>
            </ul>
        </div>

        <!-- Delete Account Mapping -->
        <h4 style="margin-top: 30px;">Delete Account Mapping: <code>08-delete-account.json</code></h4>
        <p>Handles DELETE requests. Logs the deletion to a separate audit collection:</p>
        <pre><code>{
  "priority": 1,
  "name": <span class="hl-string">"Delete Account - Log to JSON Server via Webhook"</span>,
  "request": {
    "method": "DELETE",
    "urlPathPattern": "/services/data/v[0-9]+\\\\.[0-9]+/sobjects/Account/[A-Za-z0-9]+"
  },
  "response": {
    "status": 204,
    "transformers": [<span class="hl-string">"response-template"</span>]
  },
  <span class="hl-keyword">"serveEventListeners"</span>: [
    {
      "name": "webhook",
      "parameters": {
        "method": "POST",
        "url": <span class="hl-string">"http://salesforce-json-mock/account_deletes"</span>,
        "headers": { "Content-Type": "application/json" },
        "body": <span class="hl-string">"{\"_sfId\": \"{{request.pathSegments.[5]}}\", \"_operation\": \"DELETE\", \"_timestamp\": \"{{now}}\"}"</span>
      }
    }
  ]
}</code></pre>

        <div class="info-box blue" style="margin-top: 16px;">
            <div class="info-box-title">&#x1F4DD; Key Details</div>
            <ul style="margin: 8px 0;">
                <li>Salesforce returns <strong>204 No Content</strong> for successful DELETE &#x2014; no response body</li>
                <li>DELETE requests have no request body, so only <code>_sfId</code> and <code>_timestamp</code> are captured</li>
                <li>Webhook POSTs to <code>/account_deletes</code> (separate audit collection)</li>
            </ul>
        </div>

        <!-- Why Separate Collections -->
        <h4 style="margin-top: 30px;">Why Separate Collections for Update &amp; Delete?</h4>
        <div class="info-box yellow">
            <div class="info-box-title">&#x26A0;&#xFE0F; The ID Mismatch Challenge</div>
            <p>WireMock generates Salesforce-format IDs (<code>001ABC...</code>) in the Create response, but the webhook <strong>cannot access the response</strong> &#x2014; only <code>originalRequest.*</code> and <code>request.*</code> are available. For Update/Delete, the Salesforce ID is in the URL path (<code>request.pathSegments.[5]</code>), but JSON Server needs its own internal ID for PATCH/DELETE operations on <code>/accounts</code>. Since webhooks are single HTTP calls (no chaining), we can't look up the JSON Server ID first.</p>
            <p style="margin-top: 8px;"><strong>Solution:</strong> Update and Delete webhooks POST <strong>new records</strong> to separate audit collections (<code>/account_updates</code> and <code>/account_deletes</code>). Each record includes the Salesforce ID, a timestamp, and (for updates) the changed fields. This creates a verifiable audit trail.</p>
        </div>

        <!-- Complete Mapping Inventory -->
        <h4 style="margin-top: 30px;">Complete Mapping Inventory (All 32 Files)</h4>

        <h5 style="margin-top: 16px;">Common (Shared by All Objects)</h5>
        <table>
            <thead><tr><th>#</th><th>File</th><th>Method</th><th>URL Pattern</th><th>Purpose</th><th>Webhook?</th></tr></thead>
            <tbody>
                <tr><td>01</td><td><code>01-oauth-token.json</code></td><td>POST</td><td><code>/services/oauth2/token</code></td><td>Returns mock Bearer token</td><td>No</td></tr>
                <tr><td>02</td><td><code>02-validation-query.json</code></td><td>GET</td><td><code>/services/data/v52.0/query/</code></td><td>SnapLogic account validation</td><td>No</td></tr>
            </tbody>
        </table>

        <h5 style="margin-top: 16px;">Account (files 03&#x2013;08)</h5>
        <table>
            <thead><tr><th>#</th><th>File</th><th>Method</th><th>URL Pattern</th><th>Purpose</th><th>Webhook?</th></tr></thead>
            <tbody>
                <tr><td>03</td><td><code>03-describe-account.json</code></td><td>GET</td><td><code>/sobjects/Account/describe</code></td><td>Account object schema</td><td>No</td></tr>
                <tr style="background-color: #e8f5e9;"><td><strong>04</strong></td><td><strong><code>04-create-account.json</code></strong></td><td><strong>POST</strong></td><td><code>/sobjects/Account</code></td><td><strong>Creates account</strong></td><td><strong>&#x2705; <code>/accounts</code></strong></td></tr>
                <tr><td>05</td><td><code>05-read-account-query.json</code></td><td>GET</td><td><code>/query.*</code> (contains Account)</td><td>SOQL query results</td><td>No</td></tr>
                <tr><td>06</td><td><code>06-read-single-account.json</code></td><td>GET</td><td><code>/sobjects/Account/{id}</code></td><td>Read single account by ID</td><td>No</td></tr>
                <tr style="background-color: #e8f5e9;"><td><strong>07</strong></td><td><strong><code>07-update-account.json</code></strong></td><td><strong>PATCH</strong></td><td><code>/sobjects/Account/{id}</code></td><td><strong>Logs update</strong></td><td><strong>&#x2705; <code>/account_updates</code></strong></td></tr>
                <tr style="background-color: #e8f5e9;"><td><strong>08</strong></td><td><strong><code>08-delete-account.json</code></strong></td><td><strong>DELETE</strong></td><td><code>/sobjects/Account/{id}</code></td><td><strong>Logs deletion</strong></td><td><strong>&#x2705; <code>/account_deletes</code></strong></td></tr>
            </tbody>
        </table>

        <h5 style="margin-top: 16px;">Contact (files 09&#x2013;14)</h5>
        <table>
            <thead><tr><th>#</th><th>File</th><th>Method</th><th>URL Pattern</th><th>Purpose</th><th>Webhook?</th></tr></thead>
            <tbody>
                <tr><td>09</td><td><code>09-describe-contact.json</code></td><td>GET</td><td><code>/sobjects/Contact/describe</code></td><td>Contact object schema</td><td>No</td></tr>
                <tr style="background-color: #e8f5e9;"><td><strong>10</strong></td><td><strong><code>10-create-contact.json</code></strong></td><td><strong>POST</strong></td><td><code>/sobjects/Contact</code></td><td><strong>Creates contact</strong></td><td><strong>&#x2705; <code>/contacts</code></strong></td></tr>
                <tr><td>11</td><td><code>11-read-contact-query.json</code></td><td>GET</td><td><code>/query.*</code> (contains Contact)</td><td>SOQL query results</td><td>No</td></tr>
                <tr><td>12</td><td><code>12-read-single-contact.json</code></td><td>GET</td><td><code>/sobjects/Contact/{id}</code></td><td>Read single contact by ID</td><td>No</td></tr>
                <tr style="background-color: #e8f5e9;"><td><strong>13</strong></td><td><strong><code>13-update-contact.json</code></strong></td><td><strong>PATCH</strong></td><td><code>/sobjects/Contact/{id}</code></td><td><strong>Logs update</strong></td><td><strong>&#x2705; <code>/contact_updates</code></strong></td></tr>
                <tr style="background-color: #e8f5e9;"><td><strong>14</strong></td><td><strong><code>14-delete-contact.json</code></strong></td><td><strong>DELETE</strong></td><td><code>/sobjects/Contact/{id}</code></td><td><strong>Logs deletion</strong></td><td><strong>&#x2705; <code>/contact_deletes</code></strong></td></tr>
            </tbody>
        </table>

        <h5 style="margin-top: 16px;">Opportunity (files 15&#x2013;20)</h5>
        <table>
            <thead><tr><th>#</th><th>File</th><th>Method</th><th>URL Pattern</th><th>Purpose</th><th>Webhook?</th></tr></thead>
            <tbody>
                <tr><td>15</td><td><code>15-describe-opportunity.json</code></td><td>GET</td><td><code>/sobjects/Opportunity/describe</code></td><td>Opportunity object schema</td><td>No</td></tr>
                <tr style="background-color: #e8f5e9;"><td><strong>16</strong></td><td><strong><code>16-create-opportunity.json</code></strong></td><td><strong>POST</strong></td><td><code>/sobjects/Opportunity</code></td><td><strong>Creates opportunity</strong></td><td><strong>&#x2705; <code>/opportunities</code></strong></td></tr>
                <tr><td>17</td><td><code>17-read-opportunity-query.json</code></td><td>GET</td><td><code>/query.*</code> (contains Opportunity)</td><td>SOQL query results</td><td>No</td></tr>
                <tr><td>18</td><td><code>18-read-single-opportunity.json</code></td><td>GET</td><td><code>/sobjects/Opportunity/{id}</code></td><td>Read single opportunity by ID</td><td>No</td></tr>
                <tr style="background-color: #e8f5e9;"><td><strong>19</strong></td><td><strong><code>19-update-opportunity.json</code></strong></td><td><strong>PATCH</strong></td><td><code>/sobjects/Opportunity/{id}</code></td><td><strong>Logs update</strong></td><td><strong>&#x2705; <code>/opportunity_updates</code></strong></td></tr>
                <tr style="background-color: #e8f5e9;"><td><strong>20</strong></td><td><strong><code>20-delete-opportunity.json</code></strong></td><td><strong>DELETE</strong></td><td><code>/sobjects/Opportunity/{id}</code></td><td><strong>Logs deletion</strong></td><td><strong>&#x2705; <code>/opportunity_deletes</code></strong></td></tr>
            </tbody>
        </table>

        <h5 style="margin-top: 16px;">Lead (files 21&#x2013;26)</h5>
        <table>
            <thead><tr><th>#</th><th>File</th><th>Method</th><th>URL Pattern</th><th>Purpose</th><th>Webhook?</th></tr></thead>
            <tbody>
                <tr><td>21</td><td><code>21-describe-lead.json</code></td><td>GET</td><td><code>/sobjects/Lead/describe</code></td><td>Lead object schema</td><td>No</td></tr>
                <tr style="background-color: #e8f5e9;"><td><strong>22</strong></td><td><strong><code>22-create-lead.json</code></strong></td><td><strong>POST</strong></td><td><code>/sobjects/Lead</code></td><td><strong>Creates lead</strong></td><td><strong>&#x2705; <code>/leads</code></strong></td></tr>
                <tr><td>23</td><td><code>23-read-lead-query.json</code></td><td>GET</td><td><code>/query.*</code> (contains Lead)</td><td>SOQL query results</td><td>No</td></tr>
                <tr><td>24</td><td><code>24-read-single-lead.json</code></td><td>GET</td><td><code>/sobjects/Lead/{id}</code></td><td>Read single lead by ID</td><td>No</td></tr>
                <tr style="background-color: #e8f5e9;"><td><strong>25</strong></td><td><strong><code>25-update-lead.json</code></strong></td><td><strong>PATCH</strong></td><td><code>/sobjects/Lead/{id}</code></td><td><strong>Logs update</strong></td><td><strong>&#x2705; <code>/lead_updates</code></strong></td></tr>
                <tr style="background-color: #e8f5e9;"><td><strong>26</strong></td><td><strong><code>26-delete-lead.json</code></strong></td><td><strong>DELETE</strong></td><td><code>/sobjects/Lead/{id}</code></td><td><strong>Logs deletion</strong></td><td><strong>&#x2705; <code>/lead_deletes</code></strong></td></tr>
            </tbody>
        </table>

        <h5 style="margin-top: 16px;">Case (files 27&#x2013;32)</h5>
        <table>
            <thead><tr><th>#</th><th>File</th><th>Method</th><th>URL Pattern</th><th>Purpose</th><th>Webhook?</th></tr></thead>
            <tbody>
                <tr><td>27</td><td><code>27-describe-case.json</code></td><td>GET</td><td><code>/sobjects/Case/describe</code></td><td>Case object schema</td><td>No</td></tr>
                <tr style="background-color: #e8f5e9;"><td><strong>28</strong></td><td><strong><code>28-create-case.json</code></strong></td><td><strong>POST</strong></td><td><code>/sobjects/Case</code></td><td><strong>Creates case</strong></td><td><strong>&#x2705; <code>/cases</code></strong></td></tr>
                <tr><td>29</td><td><code>29-read-case-query.json</code></td><td>GET</td><td><code>/query.*</code> (contains Case)</td><td>SOQL query results</td><td>No</td></tr>
                <tr><td>30</td><td><code>30-read-single-case.json</code></td><td>GET</td><td><code>/sobjects/Case/{id}</code></td><td>Read single case by ID</td><td>No</td></tr>
                <tr style="background-color: #e8f5e9;"><td><strong>31</strong></td><td><strong><code>31-update-case.json</code></strong></td><td><strong>PATCH</strong></td><td><code>/sobjects/Case/{id}</code></td><td><strong>Logs update</strong></td><td><strong>&#x2705; <code>/case_updates</code></strong></td></tr>
                <tr style="background-color: #e8f5e9;"><td><strong>32</strong></td><td><strong><code>32-delete-case.json</code></strong></td><td><strong>DELETE</strong></td><td><code>/sobjects/Case/{id}</code></td><td><strong>Logs deletion</strong></td><td><strong>&#x2705; <code>/case_deletes</code></strong></td></tr>
            </tbody>
        </table>

        <!-- SnapLogic Snap to WireMock Mapping Reference -->
        <h4 style="margin-top: 30px;">SnapLogic Snap to WireMock Mapping Reference</h4>
        <p>When a SnapLogic Salesforce Snap executes, it calls specific WireMock endpoints. These tables show which mapping file handles each snap:</p>

        <h5 style="margin-top: 16px;">Account</h5>
        <table>
            <thead><tr><th>SnapLogic Snap</th><th>Action</th><th>WireMock Mapping File</th><th>URL Called</th></tr></thead>
            <tbody>
                <tr><td><strong>Salesforce Create</strong></td><td>POST</td><td><code>04-create-account.json</code></td><td><code>/sobjects/Account</code></td></tr>
                <tr><td><strong>Salesforce Read</strong></td><td>GET (describe)</td><td><code>03-describe-account.json</code></td><td><code>/sobjects/Account/describe</code></td></tr>
                <tr><td><strong>Salesforce Read</strong></td><td>GET (query)</td><td><code>05-read-account-query.json</code></td><td><code>/query?q=...Account...</code></td></tr>
                <tr><td><strong>Salesforce Read</strong></td><td>GET (by ID)</td><td><code>06-read-single-account.json</code></td><td><code>/sobjects/Account/{Id}</code></td></tr>
                <tr><td><strong>Salesforce Update</strong></td><td>PATCH</td><td><code>07-update-account.json</code></td><td><code>/sobjects/Account/{Id}</code></td></tr>
                <tr><td><strong>Salesforce Delete</strong></td><td>DELETE</td><td><code>08-delete-account.json</code></td><td><code>/sobjects/Account/{Id}</code></td></tr>
            </tbody>
        </table>

        <h5 style="margin-top: 16px;">Contact</h5>
        <table>
            <thead><tr><th>SnapLogic Snap</th><th>Action</th><th>WireMock Mapping File</th><th>URL Called</th></tr></thead>
            <tbody>
                <tr><td><strong>Salesforce Create</strong></td><td>POST</td><td><code>10-create-contact.json</code></td><td><code>/sobjects/Contact</code></td></tr>
                <tr><td><strong>Salesforce Read</strong></td><td>GET (describe)</td><td><code>09-describe-contact.json</code></td><td><code>/sobjects/Contact/describe</code></td></tr>
                <tr><td><strong>Salesforce Read</strong></td><td>GET (query)</td><td><code>11-read-contact-query.json</code></td><td><code>/query?q=...Contact...</code></td></tr>
                <tr><td><strong>Salesforce Read</strong></td><td>GET (by ID)</td><td><code>12-read-single-contact.json</code></td><td><code>/sobjects/Contact/{Id}</code></td></tr>
                <tr><td><strong>Salesforce Update</strong></td><td>PATCH</td><td><code>13-update-contact.json</code></td><td><code>/sobjects/Contact/{Id}</code></td></tr>
                <tr><td><strong>Salesforce Delete</strong></td><td>DELETE</td><td><code>14-delete-contact.json</code></td><td><code>/sobjects/Contact/{Id}</code></td></tr>
            </tbody>
        </table>

        <h5 style="margin-top: 16px;">Opportunity</h5>
        <table>
            <thead><tr><th>SnapLogic Snap</th><th>Action</th><th>WireMock Mapping File</th><th>URL Called</th></tr></thead>
            <tbody>
                <tr><td><strong>Salesforce Create</strong></td><td>POST</td><td><code>16-create-opportunity.json</code></td><td><code>/sobjects/Opportunity</code></td></tr>
                <tr><td><strong>Salesforce Read</strong></td><td>GET (describe)</td><td><code>15-describe-opportunity.json</code></td><td><code>/sobjects/Opportunity/describe</code></td></tr>
                <tr><td><strong>Salesforce Read</strong></td><td>GET (query)</td><td><code>17-read-opportunity-query.json</code></td><td><code>/query?q=...Opportunity...</code></td></tr>
                <tr><td><strong>Salesforce Read</strong></td><td>GET (by ID)</td><td><code>18-read-single-opportunity.json</code></td><td><code>/sobjects/Opportunity/{Id}</code></td></tr>
                <tr><td><strong>Salesforce Update</strong></td><td>PATCH</td><td><code>19-update-opportunity.json</code></td><td><code>/sobjects/Opportunity/{Id}</code></td></tr>
                <tr><td><strong>Salesforce Delete</strong></td><td>DELETE</td><td><code>20-delete-opportunity.json</code></td><td><code>/sobjects/Opportunity/{Id}</code></td></tr>
            </tbody>
        </table>

        <h5 style="margin-top: 16px;">Lead</h5>
        <table>
            <thead><tr><th>SnapLogic Snap</th><th>Action</th><th>WireMock Mapping File</th><th>URL Called</th></tr></thead>
            <tbody>
                <tr><td><strong>Salesforce Create</strong></td><td>POST</td><td><code>22-create-lead.json</code></td><td><code>/sobjects/Lead</code></td></tr>
                <tr><td><strong>Salesforce Read</strong></td><td>GET (describe)</td><td><code>21-describe-lead.json</code></td><td><code>/sobjects/Lead/describe</code></td></tr>
                <tr><td><strong>Salesforce Read</strong></td><td>GET (query)</td><td><code>23-read-lead-query.json</code></td><td><code>/query?q=...Lead...</code></td></tr>
                <tr><td><strong>Salesforce Read</strong></td><td>GET (by ID)</td><td><code>24-read-single-lead.json</code></td><td><code>/sobjects/Lead/{Id}</code></td></tr>
                <tr><td><strong>Salesforce Update</strong></td><td>PATCH</td><td><code>25-update-lead.json</code></td><td><code>/sobjects/Lead/{Id}</code></td></tr>
                <tr><td><strong>Salesforce Delete</strong></td><td>DELETE</td><td><code>26-delete-lead.json</code></td><td><code>/sobjects/Lead/{Id}</code></td></tr>
            </tbody>
        </table>

        <h5 style="margin-top: 16px;">Case</h5>
        <table>
            <thead><tr><th>SnapLogic Snap</th><th>Action</th><th>WireMock Mapping File</th><th>URL Called</th></tr></thead>
            <tbody>
                <tr><td><strong>Salesforce Create</strong></td><td>POST</td><td><code>28-create-case.json</code></td><td><code>/sobjects/Case</code></td></tr>
                <tr><td><strong>Salesforce Read</strong></td><td>GET (describe)</td><td><code>27-describe-case.json</code></td><td><code>/sobjects/Case/describe</code></td></tr>
                <tr><td><strong>Salesforce Read</strong></td><td>GET (query)</td><td><code>29-read-case-query.json</code></td><td><code>/query?q=...Case...</code></td></tr>
                <tr><td><strong>Salesforce Read</strong></td><td>GET (by ID)</td><td><code>30-read-single-case.json</code></td><td><code>/sobjects/Case/{Id}</code></td></tr>
                <tr><td><strong>Salesforce Update</strong></td><td>PATCH</td><td><code>31-update-case.json</code></td><td><code>/sobjects/Case/{Id}</code></td></tr>
                <tr><td><strong>Salesforce Delete</strong></td><td>DELETE</td><td><code>32-delete-case.json</code></td><td><code>/sobjects/Case/{Id}</code></td></tr>
            </tbody>
        </table>

        <h5 style="margin-top: 16px;">Common (triggered automatically on connection)</h5>
        <table>
            <thead><tr><th>SnapLogic Action</th><th>WireMock Mapping File</th><th>URL Called</th></tr></thead>
            <tbody>
                <tr><td><strong>Account validation</strong> (on connect)</td><td><code>01-oauth-token.json</code></td><td><code>/services/oauth2/token</code></td></tr>
                <tr><td><strong>Account validation</strong> (on connect)</td><td><code>02-validation-query.json</code></td><td><code>/query?q=SELECT Name FROM Account LIMIT 1</code></td></tr>
            </tbody>
        </table>

        <div class="info-box yellow" style="margin-top: 16px;">
            <div class="info-box-title">&#x26A0;&#xFE0F; Important: Use REST API Only</div>
            <p>All Salesforce snaps must use <strong>REST API</strong> (not Bulk API) in snap settings. WireMock mappings only handle REST API URL patterns. Bulk API uses different endpoints (<code>/services/async/</code>) which have no mappings.</p>
        </div>

        <!-- Who Can Trigger the Webhook -->
        <h4 style="margin-top: 30px;">Who Can Trigger the Webhooks?</h4>
        <p>Anyone who sends a POST, PATCH, or DELETE to WireMock &#x2014; the webhook fires regardless of the caller:</p>
        <table>
            <thead><tr><th>Caller</th><th>Webhook Fires?</th></tr></thead>
            <tbody>
                <tr><td><strong>curl</strong> from terminal</td><td>&#x2705; Yes</td></tr>
                <tr><td><strong>SnapLogic Pipeline</strong> (Salesforce Create Snap)</td><td>&#x2705; Yes</td></tr>
                <tr><td><strong>Robot Framework</strong> (triggers pipeline &#x2192; WireMock)</td><td>&#x2705; Yes</td></tr>
            </tbody>
        </table>

        <!-- How to Verify Data Persisted -->
        <h4 style="margin-top: 30px;">How to Verify Data Persisted</h4>
        <pre><code><span class="hl-comment"># ‚îÄ‚îÄ CREATE ‚îÄ‚îÄ</span>
<span class="hl-comment"># 1. Check DB before</span>
curl -s http://localhost:8082/accounts

<span class="hl-comment"># 2. Create via WireMock</span>
curl -s -X POST http://localhost:8089/services/data/v59.0/sobjects/Account \
  -H "Content-Type: application/json" \
  -d '{"Name": "Acme Corp", "Type": "Customer", "Industry": "Technology"}'

<span class="hl-comment"># 3. Wait and verify in JSON Server</span>
sleep 1
curl -s http://localhost:8082/accounts

<span class="hl-comment"># ‚îÄ‚îÄ UPDATE ‚îÄ‚îÄ</span>
<span class="hl-comment"># 4. Update via WireMock</span>
curl -s -X PATCH http://localhost:8089/services/data/v59.0/sobjects/Account/001TESTID123 \
  -H "Content-Type: application/json" \
  -d '{"Name": "Updated Corp", "Industry": "Finance"}'

<span class="hl-comment"># 5. Verify update was logged</span>
sleep 1
curl -s http://localhost:8082/account_updates

<span class="hl-comment"># ‚îÄ‚îÄ DELETE ‚îÄ‚îÄ</span>
<span class="hl-comment"># 6. Delete via WireMock</span>
curl -s -X DELETE http://localhost:8089/services/data/v59.0/sobjects/Account/001TESTID123

<span class="hl-comment"># 7. Verify delete was logged</span>
sleep 1
curl -s http://localhost:8082/account_deletes

<span class="hl-comment"># ‚îÄ‚îÄ GENERAL ‚îÄ‚îÄ</span>
<span class="hl-comment"># 8. Verify on disk</span>
cat docker/salesforce/json-db/salesforce-db.json

<span class="hl-comment"># 9. Check JSON Server logs for proof</span>
docker logs salesforce-json-mock | grep POST</code></pre>

        <!-- The Two IDs -->
        <h4 style="margin-top: 30px;">The Two IDs</h4>
        <div class="info-box yellow">
            <div class="info-box-title">&#x26A0;&#xFE0F; Important: Salesforce ID &#x2260; JSON Server ID</div>
            <p>The Salesforce ID and JSON Server ID are <strong>different</strong> &#x2014; this is by design:</p>
            <pre><code>SnapLogic receives:     "id": "001ODTNWNPKXBSADNP"   &#x2190; WireMock generated (Salesforce format)
JSON Server stores:     "id": "xK7mN2p"               &#x2190; JSON Server generated (auto string)</code></pre>
            <p style="margin-top: 8px;">For functional verification, query JSON Server <strong>by field values</strong> (not by ID):</p>
            <pre><code>curl http://localhost:8082/accounts?Name=Acme+Corp</code></pre>
        </div>

        <!-- The Database File -->
        <h4 style="margin-top: 30px;">The Database File: <code>salesforce-db.json</code></h4>
        <p>JSON Server's database &#x2014; a plain JSON file at <code>docker/salesforce/json-db/salesforce-db.json</code>:</p>
        <pre><code>{
  "accounts": [],              <span class="hl-comment">&#x2190;  http://localhost:8082/accounts</span>
  "contacts": [],              <span class="hl-comment">&#x2190;  http://localhost:8082/contacts</span>
  "opportunities": [],         <span class="hl-comment">&#x2190;  http://localhost:8082/opportunities</span>
  "leads": [],                 <span class="hl-comment">&#x2190;  http://localhost:8082/leads</span>
  "cases": [],                 <span class="hl-comment">&#x2190;  http://localhost:8082/cases</span>
  "account_updates": [],       <span class="hl-comment">&#x2190;  http://localhost:8082/account_updates</span>
  "account_deletes": [],       <span class="hl-comment">&#x2190;  http://localhost:8082/account_deletes</span>
  "contact_updates": [],       <span class="hl-comment">&#x2190;  http://localhost:8082/contact_updates</span>
  "contact_deletes": [],       <span class="hl-comment">&#x2190;  http://localhost:8082/contact_deletes</span>
  "opportunity_updates": [],   <span class="hl-comment">&#x2190;  http://localhost:8082/opportunity_updates</span>
  "opportunity_deletes": [],   <span class="hl-comment">&#x2190;  http://localhost:8082/opportunity_deletes</span>
  "lead_updates": [],          <span class="hl-comment">&#x2190;  http://localhost:8082/lead_updates</span>
  "lead_deletes": [],          <span class="hl-comment">&#x2190;  http://localhost:8082/lead_deletes</span>
  "case_updates": [],          <span class="hl-comment">&#x2190;  http://localhost:8082/case_updates</span>
  "case_deletes": []           <span class="hl-comment">&#x2190;  http://localhost:8082/case_deletes</span>
}</code></pre>
        <p style="margin-top: 8px;"><strong>Reset:</strong></p>
        <pre><code>echo '{"accounts":[],"contacts":[],"opportunities":[],"leads":[],"cases":[],"account_updates":[],"account_deletes":[],"contact_updates":[],"contact_deletes":[],"opportunity_updates":[],"opportunity_deletes":[],"lead_updates":[],"lead_deletes":[],"case_updates":[],"case_deletes":[]}' &gt; docker/salesforce/json-db/salesforce-db.json &amp;&amp; docker restart salesforce-json-mock</code></pre>
        <p style="margin-top: 8px;"><strong>View in browser:</strong> <a href="http://localhost:8082/accounts" target="_blank">http://localhost:8082/accounts</a> or open <code>docker/salesforce/json-db/jsonserver_data.html</code> (auto-refreshes every 1 second)</p>

        <!-- Reloading Mappings -->
        <h4 style="margin-top: 30px;">Reloading Mappings After Changes</h4>
        <pre><code><span class="hl-comment"># Hot-reload (instant, no downtime)</span>
curl -X POST http://localhost:8089/__admin/mappings/reset

<span class="hl-comment"># Or restart container (slower, 5-10 seconds)</span>
docker restart salesforce-api-mock</code></pre>

        <!-- What JSON Server Still Cannot Test -->
        <h4 style="margin-top: 30px;">What JSON Server Still Cannot Test</h4>
        <p>Even with the webhook bridge, these remain <strong>impossible without real Salesforce</strong>:</p>
        <table>
            <thead><tr><th>Limitation</th><th>Why</th></tr></thead>
            <tbody>
                <tr><td>Salesforce validation rules</td><td>JSON Server has no schema enforcement</td></tr>
                <tr><td>Apex triggers</td><td>No trigger engine</td></tr>
                <tr><td>Duplicate detection rules</td><td>No matching rules</td></tr>
                <tr><td>Field-level security</td><td>No permission model</td></tr>
                <tr><td>Record types</td><td>No record type enforcement</td></tr>
                <tr><td>Sharing rules</td><td>No org-wide defaults</td></tr>
                <tr><td>Governor limits</td><td>No limit tracking</td></tr>
                <tr><td>Workflow rules / Process Builder</td><td>No automation engine</td></tr>
                <tr><td>Formula fields</td><td>No formula evaluation</td></tr>
                <tr><td>Cross-object relationships</td><td>No referential integrity</td></tr>
            </tbody>
        </table>

        <div class="info-box purple" style="margin-top: 20px;">
            <div class="info-box-title">&#x1F4A1; Bottom Line</div>
            <p style="font-size: 1.05em;">WireMock returns the Salesforce-formatted response to SnapLogic, while webhooks deliver data to JSON Server for persistence and audit logging. <strong>Create</strong> persists to <code>/accounts</code>, <strong>Update</strong> logs to <code>/account_updates</code>, and <strong>Delete</strong> logs to <code>/account_deletes</code>. WireMock gives SnapLogic a receipt, while the webhook delivers the package to the warehouse (JSON Server) for inspection.</p>
        </div>
    </div>

    <!-- ‚îÄ‚îÄ Sub-tab: Testing Pyramid ‚îÄ‚îÄ -->
    <div class="sub-panel" id="subtab-mockscope-pyramid">
        <h3>The Pre-Flight Checklist Analogy</h3>
        <pre><code>Mock Testing = Pre-flight Checklist &#x2708;&#xFE0F;

  <span class="hl-success">&#x2705;</span> Does the engine start?              (Pipeline executes)
  <span class="hl-success">&#x2705;</span> Do the instruments work?            (Snap configurations are valid)
  <span class="hl-success">&#x2705;</span> Is the radio working?               (Network/SSL connectivity)
  <span class="hl-success">&#x2705;</span> Can the pilot talk to the tower?    (OAuth + Account validation)
  <span class="hl-success">&#x2705;</span> Are the flight controls responding? (API URLs match, responses parse)

  <span class="hl-error">&#x274C;</span> Will there be turbulence?           (Salesforce business rules)
  <span class="hl-error">&#x274C;</span> Is the runway clear?                (Duplicate records)
  <span class="hl-error">&#x274C;</span> Will customs let you in?            (Field-level security)
  <span class="hl-error">&#x274C;</span> Is the weather good enough?         (API rate limits, server load)</code></pre>
        <p style="margin-top: 12px;">You wouldn't fly without a pre-flight check, even though it doesn't guarantee a smooth flight. Mocks catch the "plane won't even start" problems <strong>instantly, for free, with no dependencies</strong>.</p>

        <h3 style="margin-top: 30px;">The Testing Pyramid</h3>
        <pre><code>                    &#x250C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2510;
                    &#x2502; Production  &#x2502;  &#x2190; Real Salesforce (live data)
                    &#x2502; (Real APIs) &#x2502;
                    &#x251C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2524;
                &#x250C;&#x2500;&#x2500;&#x2500;&#x2524;  Staging    &#x2502;  &#x2190; Salesforce Sandbox (integration)
                &#x2502;   &#x2502; (Sandbox)   &#x2502;
                &#x2502;   &#x251C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2524;
            &#x250C;&#x2500;&#x2500;&#x2500;&#x2524;   &#x2502; Development &#x2502;  &#x2190; Mock Services  <span class="hl-success">&#x2190; YOU ARE HERE</span>
            &#x2502;   &#x2502;   &#x2502; (Mocks)     &#x2502;
            &#x2502;   &#x2502;   &#x2514;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2518;
            &#x2502;   &#x2502;
    Speed   &#x2502;   &#x2502;   Confidence
    &#x25C4;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2518;   &#x2514;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x25BA;</code></pre>

        <h3 style="margin-top: 30px;">The Golden Rule</h3>
        <div class="info-box purple">
            <div class="info-box-title">&#x1F3AF; The Golden Rule</div>
            <p style="font-size: 1.1em;"><strong>Mock for speed, sandbox for confidence, production for reality.</strong></p>
            <table style="margin-top: 10px;">
                <tbody>
                    <tr><td><strong>Mock</strong></td><td>"My code works" ‚Äî pipeline plumbing, connectivity, config, URL format, response handling</td></tr>
                    <tr><td><strong>Sandbox</strong></td><td>"Salesforce agrees" ‚Äî business rules, validation, security, triggers</td></tr>
                    <tr><td><strong>Production</strong></td><td>"Reality works" ‚Äî real data volumes, real users, real integrations</td></tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
     ‚ïë  TAB 12: CHEAT SHEET                                          ‚ïë
     ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù -->
<div class="tab-panel" id="tab-cheatsheet">
    <h2>Quick Reference Cheat Sheet</h2>
    <p class="section-subtitle">Everything you need on one page</p>

    <div class="cheat-grid">
        <div class="cheat-card">
            <h4>&#x1F680; Fresh Start (No Groundplex)</h4>
            <pre><code>make salesforce-mock-start
make launch-groundplex-with-cert
make salesforce-mock-status
make robot-run-tests TAGS="sfdc"</code></pre>
        </div>
        <div class="cheat-card">
            <h4>&#x1F504; Groundplex Already Running</h4>
            <pre><code>make salesforce-mock-start
make setup-groundplex-cert       <span class="hl-comment"># No container restart!</span>
make groundplex-check-cert
make robot-run-tests TAGS="sfdc"</code></pre>
        </div>
        <div class="cheat-card">
            <h4>&#x1F6D1; Shutdown</h4>
            <pre><code>make salesforce-mock-stop
<span class="hl-comment"># or full clean:</span>
make salesforce-mock-clean</code></pre>
        </div>
        <div class="cheat-card">
            <h4>&#x1F310; Endpoints (Host)</h4>
            <pre><code>WireMock HTTP:  http://localhost:8089
WireMock HTTPS: https://localhost:8443
JSON Server:    http://localhost:8082
Admin Console:  http://localhost:8089/__admin/</code></pre>
        </div>
        <div class="cheat-card">
            <h4>&#x1F433; Endpoints (Docker)</h4>
            <pre><code>WireMock HTTP:  http://salesforce-api-mock:8080
WireMock HTTPS: https://salesforce-api-mock:8443
JSON Server:    http://salesforce-json-mock</code></pre>
        </div>
        <div class="cheat-card">
            <h4>&#x1F511; SnapLogic Account Config</h4>
            <pre><code>Login URL:      https://salesforce-api-mock:8443
Username:       slim@snaplogic.com (any value)
Password:       test (any value)
Security Token: (leave empty)
Sandbox:        true
API Version:    59.0</code></pre>
        </div>
        <div class="cheat-card">
            <h4>&#x1F9EA; Quick Tests</h4>
            <pre><code><span class="hl-comment"># OAuth</span>
curl -X POST http://localhost:8089/services/oauth2/token \
  -d "grant_type=password"

<span class="hl-comment"># Validation</span>
curl "http://localhost:8089/services/data/v52.0/query?\
q=SELECT+Name+FROM+Account+LIMIT+1"

<span class="hl-comment"># Describe</span>
curl http://localhost:8089/services/data/v59.0/\
sobjects/Account/describe

<span class="hl-comment"># Create</span>
curl -X POST http://localhost:8089/services/data/\
v59.0/sobjects/Account \
  -H "Content-Type: application/json" \
  -d '{"Name":"Test"}'

<span class="hl-comment"># JSON Server</span>
curl http://localhost:8082/accounts</code></pre>
        </div>
        <div class="cheat-card">
            <h4>&#x1F50D; Debug Commands</h4>
            <pre><code><span class="hl-comment"># View loaded mappings</span>
curl http://localhost:8089/__admin/mappings \
  | python3 -m json.tool

<span class="hl-comment"># View unmatched requests</span>
curl http://localhost:8089/__admin/requests/unmatched \
  | python3 -m json.tool

<span class="hl-comment"># View all received requests</span>
curl http://localhost:8089/__admin/requests \
  | python3 -m json.tool</code></pre>
        </div>
        <div class="cheat-card">
            <h4>&#x1F4CA; Status Checks</h4>
            <pre><code>make salesforce-mock-status
make salesforce-mock-logs
make groundplex-check-cert
docker ps | grep salesforce</code></pre>
        </div>
    </div>

    <div class="info-box purple" style="margin-top: 30px;">
        <div class="info-box-title">&#x1F3AF; The Golden Rule</div>
        <p style="font-size: 1.1em;"><strong>Mock for speed, sandbox for confidence, production for reality.</strong></p>
        <p>Use mocks for rapid development and CI smoke tests. Use a real Salesforce sandbox for integration validation before production.</p>
    </div>
</div>

<!-- ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
     ‚ïë  TAB 13: CUSTOM API SERVER PROPOSAL                             ‚ïë
     ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù -->
<div class="tab-panel" id="tab-custom-api-proposal">
    <h2>Custom Salesforce API Server ‚Äî Proposal</h2>
    <p class="section-subtitle">Replacing WireMock with a dynamic mock server for functional testing</p>

    <!-- ‚îÄ‚îÄ Executive Summary ‚îÄ‚îÄ -->
    <div class="info-box purple" style="margin-bottom: 30px;">
        <div class="info-box-title">Executive Summary</div>
        <p>Our current WireMock-based mock service validates <strong>pipeline plumbing</strong> (snap connections, API formats, field mappings) but <strong>cannot verify functional correctness</strong> because all responses are hardcoded. A custom API server would store data in memory and return dynamic responses ‚Äî enabling true CRUD verification and SOQL query testing without needing a real Salesforce sandbox.</p>
    </div>

    <!-- ‚îÄ‚îÄ The Problem ‚îÄ‚îÄ -->
    <div class="section-card" style="margin-bottom: 24px;">
        <h3 style="color: var(--danger); margin-bottom: 16px;">The Problem: WireMock Limitations</h3>

        <div class="info-box red" style="margin-bottom: 16px;">
            <div class="info-box-title">Current WireMock Behavior</div>
            <p>WireMock returns <strong>hardcoded responses</strong> regardless of input. It cannot store, retrieve, modify, or delete data dynamically.</p>
        </div>

        <table style="width:100%; border-collapse:collapse; margin-bottom: 16px;">
            <thead>
                <tr style="background: var(--gray-100);">
                    <th style="padding:12px; text-align:left; border-bottom: 2px solid var(--gray-300);">Operation</th>
                    <th style="padding:12px; text-align:left; border-bottom: 2px solid var(--gray-300);">What WireMock Does</th>
                    <th style="padding:12px; text-align:left; border-bottom: 2px solid var(--gray-300);">The Problem</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);"><strong>CREATE</strong></td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Returns 201 + random ID (always)</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); color: var(--danger);">No field validation ‚Äî empty body still gets 201</td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);"><strong>READ</strong></td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Returns same hardcoded record every time</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); color: var(--danger);">Cannot read back what was created ‚Äî always returns "Acme Corporation" with static ID</td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);"><strong>UPDATE</strong></td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Returns 204 (always)</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); color: var(--danger);">No data is actually modified ‚Äî cannot verify updates</td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);"><strong>DELETE</strong></td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Returns 204 (always)</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); color: var(--danger);">Nothing is deleted ‚Äî can delete same record infinite times</td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);"><strong>SOQL Query</strong></td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Matches on object name, ignores WHERE/LIMIT/ORDER BY</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); color: var(--danger);">All queries return same result ‚Äî no filtering or sorting</td>
                </tr>
                <tr>
                    <td style="padding:12px;"><strong>Error Handling</strong></td>
                    <td style="padding:12px;">Never returns errors</td>
                    <td style="padding:12px; color: var(--danger);">Cannot test error scenarios (400, 404, 500)</td>
                </tr>
            </tbody>
        </table>

        <div class="info-box yellow">
            <div class="info-box-title">Real Example: Pipeline Create ‚Üí Read</div>
            <pre style="margin:10px 0; font-family: var(--font-mono); font-size: 13px; line-height: 1.6;"><code>Step 1: Create snap sends    ‚Üí {"Name": "Acme_Swap"}
Step 2: WireMock returns     ‚Üí {"id": "001AIXEBOKZG49LW8N", "success": true}
Step 3: Read snap queries    ‚Üí SELECT Id,Name FROM Account
Step 4: WireMock returns     ‚Üí {"Name": "Acme Corporation", "Id": "001000000000TEST01"}
                                ^^^ HARDCODED ‚Äî not "Acme_Swap"!

The Read snap CANNOT read back what was just created.</code></pre>
        </div>
    </div>

    <!-- ‚îÄ‚îÄ The Solution ‚îÄ‚îÄ -->
    <div class="section-card" style="margin-bottom: 24px;">
        <h3 style="color: var(--success); margin-bottom: 16px;">The Solution: Custom Salesforce API Server</h3>

        <div class="info-box green" style="margin-bottom: 16px;">
            <div class="info-box-title">What Is It?</div>
            <p>A lightweight <strong>Node.js Express server</strong> that mimics Salesforce REST API behavior. Instead of returning hardcoded responses, it stores data in memory, processes SOQL queries, validates fields, and returns dynamic results ‚Äî acting like a mini Salesforce instance.</p>
        </div>

        <h4 style="margin: 20px 0 12px;">How It Would Work</h4>
        <table style="width:100%; border-collapse:collapse; margin-bottom: 16px;">
            <thead>
                <tr style="background: var(--gray-100);">
                    <th style="padding:12px; text-align:left; border-bottom: 2px solid var(--gray-300);">Operation</th>
                    <th style="padding:12px; text-align:left; border-bottom: 2px solid var(--gray-300);">WireMock (Current)</th>
                    <th style="padding:12px; text-align:left; border-bottom: 2px solid var(--gray-300);">Custom API Server (Proposed)</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);"><strong>CREATE</strong></td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Returns 201, data goes to JSON Server via webhook</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); color: var(--success);"><strong>Stores record in memory</strong>, validates required fields, returns real ID</td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);"><strong>READ</strong></td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Returns same hardcoded record</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); color: var(--success);"><strong>Returns what was actually created/updated</strong></td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);"><strong>UPDATE</strong></td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Returns 204, no data changes</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); color: var(--success);"><strong>Actually modifies the stored record</strong></td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);"><strong>DELETE</strong></td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Returns 204, nothing removed</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); color: var(--success);"><strong>Removes from memory</strong>, returns 404 if already deleted</td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);"><strong>SOQL Query</strong></td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Ignores query content</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); color: var(--success);"><strong>Parses SELECT, WHERE, LIMIT, ORDER BY</strong></td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);"><strong>Describe</strong></td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Returns hardcoded schema</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); color: var(--success);"><strong>Returns schema with validation rules</strong></td>
                </tr>
                <tr>
                    <td style="padding:12px;"><strong>Errors</strong></td>
                    <td style="padding:12px;">Never returns errors</td>
                    <td style="padding:12px; color: var(--success);"><strong>Returns 400, 404, 500</strong> for invalid requests</td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- ‚îÄ‚îÄ Dynamic Read Example ‚îÄ‚îÄ -->
    <div class="section-card" style="margin-bottom: 24px;">
        <h3 style="margin-bottom: 16px;">Real Example: Pipeline With Custom API Server</h3>

        <div class="info-box green" style="margin-bottom: 16px;">
            <div class="info-box-title">Create ‚Üí Mapper ‚Üí Update ‚Üí Read (Dynamic)</div>
            <pre style="margin:10px 0; font-family: var(--font-mono); font-size: 13px; line-height: 1.8;"><code>Step 1: JSON Generator      ‚Üí {"Name": "Acme_Swap", "Industry": "Technology"}

Step 2: Create snap sends    ‚Üí POST /sobjects/Account {"Name":"Acme_Swap","Industry":"Technology"}
        Server stores        ‚Üí {"Id":"001ABC123","Name":"Acme_Swap","Industry":"Technology"}
        Server returns       ‚Üí {"id":"001ABC123","success":true}

Step 3: Mapper transforms    ‚Üí {"Id":"001ABC123","Name":"Updated Name","Industry":"Finance"}

Step 4: Update snap sends    ‚Üí PATCH /sobjects/Account/001ABC123 {"Name":"Updated Name","Industry":"Finance"}
        Server modifies      ‚Üí {"Id":"001ABC123","Name":"Updated Name","Industry":"Finance"}
        Server returns       ‚Üí 204

Step 5: Read snap calls      ‚Üí GET /describe (returns field schema)
        Read snap queries    ‚Üí SELECT Id,Name,Industry FROM Account WHERE Id='001ABC123'
        Server returns       ‚Üí {"Name":"Updated Name","Industry":"Finance","Id":"001ABC123"}
                                ^^^ ACTUAL DATA ‚Äî reflects the update!</code></pre>
        </div>
    </div>

    <!-- ‚îÄ‚îÄ Salesforce Features Coverage ‚îÄ‚îÄ -->
    <div class="section-card" style="margin-bottom: 24px;">
        <h3 style="margin-bottom: 16px;">Salesforce Feature Coverage</h3>
        <p style="margin-bottom: 16px; color: var(--gray-600);">What the custom server can and cannot replicate from Salesforce</p>

        <table style="width:100%; border-collapse:collapse; margin-bottom: 16px;">
            <thead>
                <tr style="background: var(--gray-100);">
                    <th style="padding:12px; text-align:left; border-bottom: 2px solid var(--gray-300);">Salesforce Feature</th>
                    <th style="padding:12px; text-align:center; border-bottom: 2px solid var(--gray-300);">Can Replicate?</th>
                    <th style="padding:12px; text-align:left; border-bottom: 2px solid var(--gray-300);">Difficulty</th>
                    <th style="padding:12px; text-align:left; border-bottom: 2px solid var(--gray-300);">Notes</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Basic CRUD Operations</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--success); font-size: 18px;">&#x2705;</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Medium</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Create, Read, Update, Delete with real data storage</td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Simple SOQL (SELECT, WHERE, LIMIT)</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--success); font-size: 18px;">&#x2705;</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Medium</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Parse and execute basic queries with filtering</td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Describe Endpoint (Field Schema)</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--success); font-size: 18px;">&#x2705;</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Easy</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Return field names, types, picklist values</td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Required Field Validation</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--success); font-size: 18px;">&#x2705;</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Medium</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Return 400 for missing required fields (e.g., Account.Name)</td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Error Responses (400, 404, 500)</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--success); font-size: 18px;">&#x2705;</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Easy</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Invalid requests return proper Salesforce error format</td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">OAuth Token Flow</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--success); font-size: 18px;">&#x2705;</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Easy</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Mock OAuth ‚Äî already works in WireMock, easy to port</td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">5 Object Support (Account, Contact, Opportunity, Lead, Case)</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--success); font-size: 18px;">&#x2705;</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Medium</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Each object with its own schema and ID prefix</td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Complex SOQL (JOIN, GROUP BY, HAVING)</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--warning); font-size: 18px;">&#x26A0;&#xFE0F;</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Hard</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Partially possible ‚Äî basic JOINs yes, complex aggregations difficult</td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">SOQL Relationship Queries</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--warning); font-size: 18px;">&#x26A0;&#xFE0F;</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Hard</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Parent-child queries need relationship metadata</td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Bulk API</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--warning); font-size: 18px;">&#x26A0;&#xFE0F;</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Hard</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Would need separate async job endpoint pattern</td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Triggers / Workflow Rules</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--danger); font-size: 18px;">&#x274C;</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Not Feasible</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Salesforce-specific server-side logic</td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Apex Code Execution</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--danger); font-size: 18px;">&#x274C;</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Not Feasible</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Proprietary Salesforce language ‚Äî cannot replicate</td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Sharing Rules / Permissions</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--danger); font-size: 18px;">&#x274C;</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Not Feasible</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Complex multi-tenant permission model</td>
                </tr>
                <tr>
                    <td style="padding:12px;">Platform Events / Real-time</td>
                    <td style="padding:12px; text-align:center; color: var(--danger); font-size: 18px;">&#x274C;</td>
                    <td style="padding:12px;">Not Feasible</td>
                    <td style="padding:12px;">Requires Salesforce event bus infrastructure</td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- ‚îÄ‚îÄ Architecture Comparison ‚îÄ‚îÄ -->
    <div class="section-card" style="margin-bottom: 24px;">
        <h3 style="margin-bottom: 16px;">Architecture: Current vs Proposed</h3>

        <h4 style="margin: 16px 0 10px; color: var(--danger);">Current Architecture (WireMock)</h4>
        <pre style="background: var(--gray-100); padding: 16px; border-radius: 8px; font-family: var(--font-mono); font-size: 13px; line-height: 1.6; overflow-x: auto; margin-bottom: 20px;"><code>SnapLogic Pipeline
    ‚îÇ
    ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  WireMock (Port 8089)       ‚îÇ
‚îÇ  - 32 JSON mapping files    ‚îÇ
‚îÇ  - Hardcoded responses      ‚îÇ     Webhooks
‚îÇ  - Pattern matching only    ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫  JSON Server (Port 8082)
‚îÇ  - No data storage          ‚îÇ                   - Stores webhook data
‚îÇ  - No query parsing         ‚îÇ                   - Separate from API
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                   - No read-back capability
</code></pre>

        <h4 style="margin: 16px 0 10px; color: var(--success);">Proposed Architecture (Custom API Server)</h4>
        <pre style="background: var(--success-light); padding: 16px; border-radius: 8px; font-family: var(--font-mono); font-size: 13px; line-height: 1.6; overflow-x: auto; margin-bottom: 20px;"><code>SnapLogic Pipeline
    ‚îÇ
    ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Custom Salesforce API Server (Port 8089)    ‚îÇ
‚îÇ  - Node.js / Express                         ‚îÇ
‚îÇ  - In-memory data store                      ‚îÇ
‚îÇ  - Real CRUD operations                      ‚îÇ
‚îÇ  - SOQL query parser (SELECT, WHERE, LIMIT)  ‚îÇ
‚îÇ  - Field validation                          ‚îÇ
‚îÇ  - Error responses (400, 404, 500)           ‚îÇ
‚îÇ  - OAuth mock endpoint                       ‚îÇ
‚îÇ  - Describe endpoint with schemas            ‚îÇ
‚îÇ  - Admin UI / API for data inspection        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
    In-Memory Database
    (No separate JSON Server needed)
</code></pre>
    </div>

    <!-- ‚îÄ‚îÄ What This Enables ‚îÄ‚îÄ -->
    <div class="section-card" style="margin-bottom: 24px;">
        <h3 style="margin-bottom: 16px;">What This Enables for Testing</h3>

        <table style="width:100%; border-collapse:collapse; margin-bottom: 16px;">
            <thead>
                <tr style="background: var(--gray-100);">
                    <th style="padding:12px; text-align:left; border-bottom: 2px solid var(--gray-300);">Test Scenario</th>
                    <th style="padding:12px; text-align:center; border-bottom: 2px solid var(--gray-300);">WireMock</th>
                    <th style="padding:12px; text-align:center; border-bottom: 2px solid var(--gray-300);">Custom Server</th>
                    <th style="padding:12px; text-align:left; border-bottom: 2px solid var(--gray-300);">Business Value</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Create a record and read it back</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--danger); font-size: 18px;">&#x274C;</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--success); font-size: 18px;">&#x2705;</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Verify end-to-end data integrity</td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Update a record and verify changes</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--danger); font-size: 18px;">&#x274C;</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--success); font-size: 18px;">&#x2705;</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Confirm field-level updates persist</td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Delete a record and confirm it's gone</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--danger); font-size: 18px;">&#x274C;</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--success); font-size: 18px;">&#x2705;</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Verify deletion (subsequent read returns 404)</td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Query with WHERE filters</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--danger); font-size: 18px;">&#x274C;</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--success); font-size: 18px;">&#x2705;</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Verify SOQL WHERE clause filtering works</td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Test required field validation</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--danger); font-size: 18px;">&#x274C;</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--success); font-size: 18px;">&#x2705;</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Catch missing required fields before production</td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Test error handling (404 not found)</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--danger); font-size: 18px;">&#x274C;</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--success); font-size: 18px;">&#x2705;</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Verify pipeline handles errors gracefully</td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Verify SOQL LIMIT works</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--danger); font-size: 18px;">&#x274C;</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--success); font-size: 18px;">&#x2705;</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Confirm pagination and limits work</td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Pipeline plumbing verification</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--success); font-size: 18px;">&#x2705;</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--success); font-size: 18px;">&#x2705;</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Both approaches verify snap connectivity</td>
                </tr>
                <tr>
                    <td style="padding:12px;">CI/CD smoke tests</td>
                    <td style="padding:12px; text-align:center; color: var(--success); font-size: 18px;">&#x2705;</td>
                    <td style="padding:12px; text-align:center; color: var(--success); font-size: 18px;">&#x2705;</td>
                    <td style="padding:12px;">Both work for automated CI pipeline</td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- ‚îÄ‚îÄ Robot Framework Test Comparison ‚îÄ‚îÄ -->
    <div class="section-card" style="margin-bottom: 24px;">
        <h3 style="margin-bottom: 16px;">Robot Framework Test Comparison</h3>

        <h4 style="margin: 16px 0 10px; color: var(--danger);">Current: WireMock ‚Äî Can Only Verify Plumbing</h4>
        <pre style="background: var(--danger-light); padding: 16px; border-radius: 8px; font-family: var(--font-mono); font-size: 12px; line-height: 1.5; overflow-x: auto; margin-bottom: 20px;"><code>*** Test Cases ***
Verify Account Create
    # Can only check: did the webhook fire?
    ${response}=    GET On Session    jsonserver    /accounts
    Should Not Be Empty    ${response.json()}
    # CANNOT verify: was the correct Name stored?
    # CANNOT verify: does Read return what was created?
    # CANNOT verify: does an empty body get rejected?</code></pre>

        <h4 style="margin: 16px 0 10px; color: var(--success);">Proposed: Custom Server ‚Äî Full Functional Testing</h4>
        <pre style="background: var(--success-light); padding: 16px; border-radius: 8px; font-family: var(--font-mono); font-size: 12px; line-height: 1.5; overflow-x: auto; margin-bottom: 20px;"><code>*** Test Cases ***
Verify Account Create And Read Back
    # Create
    ${create}=    POST On Session    sfapi    /services/data/v59.0/sobjects/Account
    ...    json={"Name":"Test Corp","Industry":"Technology"}
    Status Should Be    201    ${create}
    ${id}=    Set Variable    ${create.json()}[id]

    # Read back what was created
    ${read}=    GET On Session    sfapi
    ...    /services/data/v59.0/query?q=SELECT Name,Industry FROM Account WHERE Id='${id}'
    Should Be Equal    ${read.json()}[records][0][Name]    Test Corp        # ACTUAL DATA!
    Should Be Equal    ${read.json()}[records][0][Industry]    Technology   # ACTUAL DATA!

Verify Account Update Changes Data
    # Update
    PATCH On Session    sfapi    /services/data/v59.0/sobjects/Account/${id}
    ...    json={"Name":"Updated Corp"}    expected_status=204
    # Read back updated data
    ${read}=    GET On Session    sfapi
    ...    /services/data/v59.0/query?q=SELECT Name FROM Account WHERE Id='${id}'
    Should Be Equal    ${read.json()}[records][0][Name]    Updated Corp     # VERIFIED!

Verify Required Field Validation
    # Send empty body ‚Äî should get 400
    ${response}=    POST On Session    sfapi    /services/data/v59.0/sobjects/Account
    ...    json={}    expected_status=400
    Should Contain    ${response.json()}[0][errorCode]    REQUIRED_FIELD_MISSING

Verify Delete Removes Record
    DELETE On Session    sfapi    /services/data/v59.0/sobjects/Account/${id}
    ...    expected_status=204
    # Try reading deleted record ‚Äî should get 404
    ${read}=    GET On Session    sfapi    /services/data/v59.0/sobjects/Account/${id}
    ...    expected_status=404</code></pre>
    </div>

    <!-- ‚îÄ‚îÄ Effort & Timeline ‚îÄ‚îÄ -->
    <div class="section-card" style="margin-bottom: 24px;">
        <h3 style="margin-bottom: 16px;">Estimated Effort &amp; Timeline</h3>

        <div class="info-box blue" style="margin-bottom: 20px;">
            <div class="info-box-title">AI-Assisted Development</div>
            <p>Using Claude Code / AI-assisted development, the custom server code, Dockerfile, schemas, SOQL parser, and Robot Framework tests can be <strong>generated in hours, not weeks</strong>. The primary effort shifts from writing code to <strong>testing, tuning, and integration</strong>.</p>
        </div>

        <!-- AI-Assisted Effort Table -->
        <h4 style="margin: 16px 0 10px; color: var(--success);">With AI-Assisted Development (Claude Code)</h4>
        <table style="width:100%; border-collapse:collapse; margin-bottom: 24px;">
            <thead>
                <tr style="background: var(--success-light);">
                    <th style="padding:12px; text-align:left; border-bottom: 2px solid var(--success);">Component</th>
                    <th style="padding:12px; text-align:center; border-bottom: 2px solid var(--success);">AI Generates</th>
                    <th style="padding:12px; text-align:center; border-bottom: 2px solid var(--success);">Human Reviews/Tests</th>
                    <th style="padding:12px; text-align:left; border-bottom: 2px solid var(--success);">Details</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Core Express Server + CRUD</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--success); font-weight:bold;">~1 hour</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center;">2-3 hours</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">OAuth, describe, CRUD for all 5 objects</td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">SOQL Query Parser</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--success); font-weight:bold;">~1 hour</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center;">2-3 hours</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">SELECT, WHERE, LIMIT, ORDER BY parsing</td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Object Schemas (5 objects)</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--success); font-weight:bold;">~30 min</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center;">1 hour</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Field definitions, types, required flags, picklists</td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Field Validation + Errors</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--success); font-weight:bold;">~30 min</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center;">1-2 hours</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Required fields, Salesforce error format (400, 404)</td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Dockerfile + Docker Compose</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--success); font-weight:bold;">~15 min</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center;">1 hour</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Container config, health checks, HTTPS certs</td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Robot Framework Tests</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--success); font-weight:bold;">~1 hour</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center;">2-3 hours</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">CRUD + error + query tests for all 5 objects</td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Admin Dashboard UI</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--success); font-weight:bold;">~30 min</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center;">1 hour</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Web UI for data inspection, database reset</td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">SnapLogic Pipeline Testing</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--gray-400);">N/A</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center;">3-4 hours</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Connect SnapLogic pipelines, verify all snaps work</td>
                </tr>
                <tr style="background: var(--success-light); font-weight: bold;">
                    <td style="padding:14px;"><strong>Total</strong></td>
                    <td style="padding:14px; text-align:center; color: var(--success);"><strong>~4-5 hours</strong></td>
                    <td style="padding:14px; text-align:center;"><strong>~13-18 hours</strong></td>
                    <td style="padding:14px; color: var(--success);"><strong style="font-size: 1.15em;">2-3 days total</strong></td>
                </tr>
            </tbody>
        </table>

        <!-- Manual Effort Comparison -->
        <h4 style="margin: 16px 0 10px; color: var(--gray-600);">Comparison: Manual vs AI-Assisted</h4>
        <table style="width:100%; border-collapse:collapse; margin-bottom: 16px;">
            <thead>
                <tr style="background: var(--gray-100);">
                    <th style="padding:12px; text-align:left; border-bottom: 2px solid var(--gray-300);">Approach</th>
                    <th style="padding:12px; text-align:center; border-bottom: 2px solid var(--gray-300);">Code Writing</th>
                    <th style="padding:12px; text-align:center; border-bottom: 2px solid var(--gray-300);">Testing &amp; Integration</th>
                    <th style="padding:12px; text-align:center; border-bottom: 2px solid var(--gray-300);">Total</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Manual Development</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--danger);">1-2 weeks</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center;">3-5 days</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--danger); font-weight:bold;">2-3 weeks</td>
                </tr>
                <tr style="background: var(--success-light);">
                    <td style="padding:14px;"><strong>AI-Assisted (Claude Code)</strong></td>
                    <td style="padding:14px; text-align:center; color: var(--success); font-weight:bold;">4-5 hours</td>
                    <td style="padding:14px; text-align:center; font-weight:bold;">1-2 days</td>
                    <td style="padding:14px; text-align:center; color: var(--success); font-weight:bold; font-size: 1.15em;">2-3 days</td>
                </tr>
            </tbody>
        </table>

        <div class="info-box yellow">
            <div class="info-box-title">Where Human Time Goes</div>
            <p>With AI-assisted development, the bottleneck is <strong>not code writing</strong> ‚Äî it's:</p>
            <ul style="margin: 8px 0 0 20px; line-height: 2;">
                <li><strong>Reviewing</strong> generated code for correctness</li>
                <li><strong>Testing</strong> with actual SnapLogic pipelines</li>
                <li><strong>Tuning</strong> SOQL parser for edge cases</li>
                <li><strong>Integrating</strong> with existing Docker/Makefile setup</li>
            </ul>
        </div>
    </div>

    <!-- ‚îÄ‚îÄ Trade-offs ‚îÄ‚îÄ -->
    <div class="section-card" style="margin-bottom: 24px;">
        <h3 style="margin-bottom: 16px;">Trade-offs: WireMock vs Custom API Server</h3>

        <table style="width:100%; border-collapse:collapse; margin-bottom: 16px;">
            <thead>
                <tr style="background: var(--gray-100);">
                    <th style="padding:12px; text-align:left; border-bottom: 2px solid var(--gray-300);">Factor</th>
                    <th style="padding:12px; text-align:left; border-bottom: 2px solid var(--gray-300);">WireMock (Current)</th>
                    <th style="padding:12px; text-align:left; border-bottom: 2px solid var(--gray-300);">Custom API Server (Proposed)</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);"><strong>Setup Time</strong></td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); color: var(--success);">Already done</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); color: var(--warning);">2-3 weeks development</td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);"><strong>Maintenance</strong></td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); color: var(--success);">Low ‚Äî just JSON files</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); color: var(--warning);">Medium ‚Äî code to maintain</td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);"><strong>Testing Depth</strong></td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); color: var(--danger);">Plumbing only</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); color: var(--success);">Functional testing</td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);"><strong>Error Testing</strong></td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); color: var(--danger);">Cannot test failures</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); color: var(--success);">Full error scenario testing</td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);"><strong>SOQL Support</strong></td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); color: var(--danger);">None ‚Äî static responses</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); color: var(--success);">SELECT, WHERE, LIMIT, ORDER BY</td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);"><strong>Realism</strong></td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); color: var(--warning);">Low</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); color: var(--success);">Medium-High</td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);"><strong>CI/CD Speed</strong></td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); color: var(--success);">Fast startup</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); color: var(--success);">Equally fast (Node.js lightweight)</td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);"><strong>Docker Ready</strong></td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); color: var(--success);">Yes</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); color: var(--success);">Yes</td>
                </tr>
                <tr>
                    <td style="padding:12px;"><strong>Team Skills Needed</strong></td>
                    <td style="padding:12px;">JSON editing</td>
                    <td style="padding:12px;">Node.js / JavaScript</td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- ‚îÄ‚îÄ Recommendation ‚îÄ‚îÄ -->
    <div class="section-card" style="margin-bottom: 24px;">
        <h3 style="margin-bottom: 16px;">Recommendation</h3>

        <div class="info-box blue" style="margin-bottom: 16px;">
            <div class="info-box-title">Phased Approach ‚Äî Best of Both Worlds</div>
            <p>Keep WireMock for quick smoke tests and build the custom server alongside for functional tests. With AI-assisted development, all phases can be completed within <strong>one sprint</strong>.</p>
        </div>

        <table style="width:100%; border-collapse:collapse;">
            <thead>
                <tr style="background: var(--gray-100);">
                    <th style="padding:12px; text-align:left; border-bottom: 2px solid var(--gray-300);">Phase</th>
                    <th style="padding:12px; text-align:left; border-bottom: 2px solid var(--gray-300);">What</th>
                    <th style="padding:12px; text-align:left; border-bottom: 2px solid var(--gray-300);">Timeline</th>
                    <th style="padding:12px; text-align:left; border-bottom: 2px solid var(--gray-300);">Benefit</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);"><strong>Phase 1 (Current)</strong></td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Keep WireMock as-is</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); color: var(--success); font-weight:bold;">Done</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">CI/CD smoke tests, pipeline plumbing verification</td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);"><strong>Phase 2</strong></td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Build Custom API Server (CRUD + SOQL + Validation + Docker)</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); font-weight:bold;">Day 1</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">AI generates server code, Dockerfile, schemas</td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);"><strong>Phase 3</strong></td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Test with SnapLogic pipelines + tune SOQL parser</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); font-weight:bold;">Day 2</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);">Verify all 5 objects work with real pipelines</td>
                </tr>
                <tr>
                    <td style="padding:12px;"><strong>Phase 4</strong></td>
                    <td style="padding:12px;">Robot Framework test suite + Admin dashboard</td>
                    <td style="padding:12px; font-weight:bold;">Day 3</td>
                    <td style="padding:12px;">Full automated regression + monitoring UI</td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- ‚îÄ‚îÄ Testing Pyramid ‚îÄ‚îÄ -->
    <div class="section-card" style="margin-bottom: 24px;">
        <h3 style="margin-bottom: 16px;">Where Each Approach Fits in the Testing Pyramid</h3>

        <pre style="background: var(--gray-100); padding: 20px; border-radius: 8px; font-family: var(--font-mono); font-size: 13px; line-height: 1.6; text-align: center; overflow-x: auto;"><code>                    /\
                   /  \
                  / SF \          Real Salesforce Sandbox
                 / Sand \         - Full integration tests
                /  box   \        - Production validation
               /‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\
              /  Custom    \      Custom API Server (Proposed)
             /   API        \     - Functional CRUD testing
            /   Server       \    - SOQL query verification
           /   (Proposed)     \   - Error scenario testing
          /‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\
         /   WireMock           \  WireMock (Current)
        /   (Current)            \ - Pipeline plumbing
       /   Smoke Tests            \- CI/CD smoke tests
      /   Fast + Simple            \- Snap connectivity
     /‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\
</code></pre>

        <div class="info-box purple" style="margin-top: 16px;">
            <div class="info-box-title">The Golden Rule</div>
            <p style="font-size: 1.05em;"><strong>WireMock for speed, Custom Server for confidence, Salesforce Sandbox for reality.</strong></p>
            <p>Each layer catches different bugs. WireMock catches broken connections. Custom Server catches data logic errors. Sandbox catches Salesforce-specific behavior.</p>
        </div>
    </div>

    <!-- ‚îÄ‚îÄ Tech Stack ‚îÄ‚îÄ -->
    <div class="section-card" style="margin-bottom: 24px;">
        <h3 style="margin-bottom: 16px;">Proposed Tech Stack</h3>

        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 16px;">
            <div class="card">
                <h4>Runtime</h4>
                <p><strong>Node.js 18+</strong> ‚Äî Lightweight, fast startup, perfect for Docker</p>
            </div>
            <div class="card">
                <h4>Framework</h4>
                <p><strong>Express.js</strong> ‚Äî Industry standard, minimal overhead, easy to maintain</p>
            </div>
            <div class="card">
                <h4>Data Store</h4>
                <p><strong>In-Memory (JavaScript objects)</strong> ‚Äî No database needed, resets on restart</p>
            </div>
            <div class="card">
                <h4>SOQL Parser</h4>
                <p><strong>Custom regex-based parser</strong> ‚Äî Handles SELECT, WHERE, LIMIT, ORDER BY</p>
            </div>
            <div class="card">
                <h4>Testing</h4>
                <p><strong>Robot Framework + RequestsLibrary</strong> ‚Äî Same toolchain as current tests</p>
            </div>
            <div class="card">
                <h4>Deployment</h4>
                <p><strong>Docker container</strong> ‚Äî Same docker-compose pattern as WireMock</p>
            </div>
        </div>
    </div>

    <!-- ‚îÄ‚îÄ Containerization ‚îÄ‚îÄ -->
    <div class="section-card" style="margin-bottom: 24px;">
        <h3 style="margin-bottom: 16px;">Containerization &amp; Docker Deployment</h3>

        <div class="info-box green" style="margin-bottom: 16px;">
            <div class="info-box-title">Drop-In Replacement</div>
            <p>The custom API server runs on the <strong>same ports</strong> and handles the <strong>same URLs</strong> as WireMock. It replaces 2 containers with 1, uses less memory, starts faster, and requires <strong>zero SnapLogic pipeline changes</strong>.</p>
        </div>

        <h4 style="margin: 20px 0 12px;">Current Setup: 2 Containers</h4>
        <pre style="background: var(--danger-light); padding: 16px; border-radius: 8px; font-family: var(--font-mono); font-size: 13px; line-height: 1.6; overflow-x: auto; margin-bottom: 20px;"><code>docker-compose.yml (Current)
‚îú‚îÄ‚îÄ salesforce-api-mock  (WireMock)      ‚Üí Port 8089 (HTTP) / 8443 (HTTPS)
‚îÇ   ‚îú‚îÄ‚îÄ Base: wiremock/wiremock:3.3.1    ‚Üí Java-based, ~300MB image
‚îÇ   ‚îú‚îÄ‚îÄ 32 JSON mapping files            ‚Üí All hardcoded responses
‚îÇ   ‚îî‚îÄ‚îÄ Memory: ~300-400MB               ‚Üí Java JVM overhead
‚îÇ
‚îî‚îÄ‚îÄ salesforce-json-mock (JSON Server)   ‚Üí Port 8082
    ‚îú‚îÄ‚îÄ Base: node:18-alpine             ‚Üí ~150MB image
    ‚îú‚îÄ‚îÄ salesforce-db.json               ‚Üí Webhook data store
    ‚îî‚îÄ‚îÄ Memory: ~50-80MB

Total: 2 containers, ~450MB images, ~400-500MB RAM, 10-15s startup</code></pre>

        <h4 style="margin: 16px 0 12px;">Proposed Setup: 1 Container</h4>
        <pre style="background: var(--success-light); padding: 16px; border-radius: 8px; font-family: var(--font-mono); font-size: 13px; line-height: 1.6; overflow-x: auto; margin-bottom: 20px;"><code>docker-compose.yml (Proposed)
‚îî‚îÄ‚îÄ salesforce-mock-server (Custom API)  ‚Üí Port 8089 (HTTP) / 8443 (HTTPS)
    ‚îú‚îÄ‚îÄ Base: node:18-alpine             ‚Üí ~50MB image (Alpine)
    ‚îú‚îÄ‚îÄ In-memory data store             ‚Üí No external DB needed
    ‚îú‚îÄ‚îÄ SOQL query parser                ‚Üí Dynamic query results
    ‚îú‚îÄ‚îÄ Field validation                 ‚Üí Real error responses
    ‚îî‚îÄ‚îÄ Memory: ~50-80MB                 ‚Üí Lightweight Node.js

Total: 1 container, ~80MB image, ~50-80MB RAM, 1-2s startup</code></pre>

        <h4 style="margin: 20px 0 12px;">Container Resource Comparison</h4>
        <table style="width:100%; border-collapse:collapse; margin-bottom: 16px;">
            <thead>
                <tr style="background: var(--gray-100);">
                    <th style="padding:12px; text-align:left; border-bottom: 2px solid var(--gray-300);">Resource</th>
                    <th style="padding:12px; text-align:center; border-bottom: 2px solid var(--gray-300);">WireMock + JSON Server</th>
                    <th style="padding:12px; text-align:center; border-bottom: 2px solid var(--gray-300);">Custom API Server</th>
                    <th style="padding:12px; text-align:center; border-bottom: 2px solid var(--gray-300);">Improvement</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);"><strong>Containers</strong></td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center;">2</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--success); font-weight:bold;">1</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--success);">50% fewer</td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);"><strong>Docker Image Size</strong></td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center;">~450MB</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--success); font-weight:bold;">~80MB</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--success);">82% smaller</td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);"><strong>Memory Usage</strong></td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center;">~400-500MB</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--success); font-weight:bold;">~50-80MB</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--success);">85% less</td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);"><strong>Startup Time</strong></td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center;">10-15 seconds</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--success); font-weight:bold;">1-2 seconds</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--success);">~10x faster</td>
                </tr>
                <tr>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200);"><strong>Config Files</strong></td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center;">32 JSON mapping files</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--success); font-weight:bold;">1 server.js file</td>
                    <td style="padding:12px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--success);">97% fewer files</td>
                </tr>
                <tr>
                    <td style="padding:12px;"><strong>Base Technology</strong></td>
                    <td style="padding:12px; text-align:center;">Java (WireMock) + Node.js</td>
                    <td style="padding:12px; text-align:center; color: var(--success); font-weight:bold;">Node.js only</td>
                    <td style="padding:12px; text-align:center; color: var(--success);">Single runtime</td>
                </tr>
            </tbody>
        </table>

        <h4 style="margin: 20px 0 12px;">Dockerfile</h4>
        <pre style="background: var(--gray-100); padding: 16px; border-radius: 8px; font-family: var(--font-mono); font-size: 13px; line-height: 1.6; overflow-x: auto; margin-bottom: 20px;"><code>FROM node:18-alpine

WORKDIR /app

# Install dependencies
COPY package.json package-lock.json ./
RUN npm ci --production

# Copy application
COPY server.js ./
COPY schemas/ ./schemas/
COPY certs/ ./certs/

# Health check
HEALTHCHECK --interval=10s --timeout=5s --retries=3 \
  CMD wget -q --spider http://localhost:8080/health || exit 1

EXPOSE 8080 8443

CMD ["node", "server.js"]</code></pre>

        <h4 style="margin: 20px 0 12px;">Docker Compose Configuration</h4>
        <pre style="background: var(--gray-100); padding: 16px; border-radius: 8px; font-family: var(--font-mono); font-size: 13px; line-height: 1.6; overflow-x: auto; margin-bottom: 20px;"><code>services:
  salesforce-mock-server:
    build:
      context: ./docker/salesforce/custom-server
      dockerfile: Dockerfile
    container_name: salesforce-mock-server
    ports:
      - "8089:8080"       # HTTP  (same external port as WireMock)
      - "8443:8443"       # HTTPS (same external port as WireMock)
      - "8082:8082"       # Admin API (data inspection, reset)
    volumes:
      - ./docker/salesforce/certs:/app/certs:ro
    environment:
      - NODE_ENV=production
      - LOG_LEVEL=info
    networks:
      - snaplogic-net
    healthcheck:
      test: ["CMD", "wget", "-q", "--spider", "http://localhost:8080/health"]
      interval: 10s
      timeout: 5s
      retries: 3
    restart: unless-stopped</code></pre>

        <h4 style="margin: 20px 0 12px;">Zero SnapLogic Changes Required</h4>
        <div class="info-box blue" style="margin-bottom: 16px;">
            <div class="info-box-title">Same Ports, Same URLs, Same Behavior</div>
            <p>Since the custom server runs on the same ports and handles identical URL patterns, SnapLogic pipelines need <strong>no configuration changes</strong>.</p>
        </div>

        <table style="width:100%; border-collapse:collapse; margin-bottom: 16px;">
            <thead>
                <tr style="background: var(--gray-100);">
                    <th style="padding:12px; text-align:left; border-bottom: 2px solid var(--gray-300);">SnapLogic Setting</th>
                    <th style="padding:12px; text-align:left; border-bottom: 2px solid var(--gray-300);">Current (WireMock)</th>
                    <th style="padding:12px; text-align:left; border-bottom: 2px solid var(--gray-300);">Custom Server</th>
                    <th style="padding:12px; text-align:center; border-bottom: 2px solid var(--gray-300);">Change?</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td style="padding:10px; border-bottom: 1px solid var(--gray-200);">Login URL</td>
                    <td style="padding:10px; border-bottom: 1px solid var(--gray-200); font-family: var(--font-mono); font-size: 12px;">https://salesforce-api-mock:8443</td>
                    <td style="padding:10px; border-bottom: 1px solid var(--gray-200); font-family: var(--font-mono); font-size: 12px;">https://salesforce-mock-server:8443</td>
                    <td style="padding:10px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--warning);">Container name only</td>
                </tr>
                <tr>
                    <td style="padding:10px; border-bottom: 1px solid var(--gray-200);">API Version</td>
                    <td style="padding:10px; border-bottom: 1px solid var(--gray-200); font-family: var(--font-mono); font-size: 12px;">v59.0</td>
                    <td style="padding:10px; border-bottom: 1px solid var(--gray-200); font-family: var(--font-mono); font-size: 12px;">v59.0</td>
                    <td style="padding:10px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--success);">None</td>
                </tr>
                <tr>
                    <td style="padding:10px; border-bottom: 1px solid var(--gray-200);">OAuth Endpoint</td>
                    <td style="padding:10px; border-bottom: 1px solid var(--gray-200); font-family: var(--font-mono); font-size: 12px;">/services/oauth2/token</td>
                    <td style="padding:10px; border-bottom: 1px solid var(--gray-200); font-family: var(--font-mono); font-size: 12px;">/services/oauth2/token</td>
                    <td style="padding:10px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--success);">None</td>
                </tr>
                <tr>
                    <td style="padding:10px; border-bottom: 1px solid var(--gray-200);">CRUD Endpoints</td>
                    <td style="padding:10px; border-bottom: 1px solid var(--gray-200); font-family: var(--font-mono); font-size: 12px;">/services/data/v59.0/sobjects/*</td>
                    <td style="padding:10px; border-bottom: 1px solid var(--gray-200); font-family: var(--font-mono); font-size: 12px;">/services/data/v59.0/sobjects/*</td>
                    <td style="padding:10px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--success);">None</td>
                </tr>
                <tr>
                    <td style="padding:10px; border-bottom: 1px solid var(--gray-200);">Query Endpoint</td>
                    <td style="padding:10px; border-bottom: 1px solid var(--gray-200); font-family: var(--font-mono); font-size: 12px;">/services/data/v59.0/query</td>
                    <td style="padding:10px; border-bottom: 1px solid var(--gray-200); font-family: var(--font-mono); font-size: 12px;">/services/data/v59.0/query</td>
                    <td style="padding:10px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--success);">None</td>
                </tr>
                <tr>
                    <td style="padding:10px; border-bottom: 1px solid var(--gray-200);">HTTP Port</td>
                    <td style="padding:10px; border-bottom: 1px solid var(--gray-200); font-family: var(--font-mono); font-size: 12px;">8089</td>
                    <td style="padding:10px; border-bottom: 1px solid var(--gray-200); font-family: var(--font-mono); font-size: 12px;">8089</td>
                    <td style="padding:10px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--success);">None</td>
                </tr>
                <tr>
                    <td style="padding:10px; border-bottom: 1px solid var(--gray-200);">HTTPS Port</td>
                    <td style="padding:10px; border-bottom: 1px solid var(--gray-200); font-family: var(--font-mono); font-size: 12px;">8443</td>
                    <td style="padding:10px; border-bottom: 1px solid var(--gray-200); font-family: var(--font-mono); font-size: 12px;">8443</td>
                    <td style="padding:10px; border-bottom: 1px solid var(--gray-200); text-align:center; color: var(--success);">None</td>
                </tr>
                <tr>
                    <td style="padding:10px;">Username / Password</td>
                    <td style="padding:10px; font-family: var(--font-mono); font-size: 12px;">Any value</td>
                    <td style="padding:10px; font-family: var(--font-mono); font-size: 12px;">Any value</td>
                    <td style="padding:10px; text-align:center; color: var(--success);">None</td>
                </tr>
            </tbody>
        </table>

        <h4 style="margin: 20px 0 12px;">Admin API Endpoints (Built-in)</h4>
        <div class="info-box yellow" style="margin-bottom: 16px;">
            <div class="info-box-title">No Separate JSON Server Needed</div>
            <p>The custom server includes built-in admin endpoints for data inspection and management ‚Äî replacing JSON Server entirely.</p>
        </div>

        <table style="width:100%; border-collapse:collapse; margin-bottom: 16px;">
            <thead>
                <tr style="background: var(--gray-100);">
                    <th style="padding:12px; text-align:left; border-bottom: 2px solid var(--gray-300);">Admin Endpoint</th>
                    <th style="padding:12px; text-align:left; border-bottom: 2px solid var(--gray-300);">Method</th>
                    <th style="padding:12px; text-align:left; border-bottom: 2px solid var(--gray-300);">Purpose</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td style="padding:10px; border-bottom: 1px solid var(--gray-200); font-family: var(--font-mono); font-size: 12px;">/health</td>
                    <td style="padding:10px; border-bottom: 1px solid var(--gray-200);">GET</td>
                    <td style="padding:10px; border-bottom: 1px solid var(--gray-200);">Health check for Docker / load balancer</td>
                </tr>
                <tr>
                    <td style="padding:10px; border-bottom: 1px solid var(--gray-200); font-family: var(--font-mono); font-size: 12px;">/__admin/db</td>
                    <td style="padding:10px; border-bottom: 1px solid var(--gray-200);">GET</td>
                    <td style="padding:10px; border-bottom: 1px solid var(--gray-200);">View entire in-memory database (all objects)</td>
                </tr>
                <tr>
                    <td style="padding:10px; border-bottom: 1px solid var(--gray-200); font-family: var(--font-mono); font-size: 12px;">/__admin/db/{object}</td>
                    <td style="padding:10px; border-bottom: 1px solid var(--gray-200);">GET</td>
                    <td style="padding:10px; border-bottom: 1px solid var(--gray-200);">View records for specific object (Account, Contact, etc.)</td>
                </tr>
                <tr>
                    <td style="padding:10px; border-bottom: 1px solid var(--gray-200); font-family: var(--font-mono); font-size: 12px;">/__admin/reset</td>
                    <td style="padding:10px; border-bottom: 1px solid var(--gray-200);">POST</td>
                    <td style="padding:10px; border-bottom: 1px solid var(--gray-200);">Reset all data (clear in-memory database)</td>
                </tr>
                <tr>
                    <td style="padding:10px; border-bottom: 1px solid var(--gray-200); font-family: var(--font-mono); font-size: 12px;">/__admin/stats</td>
                    <td style="padding:10px; border-bottom: 1px solid var(--gray-200);">GET</td>
                    <td style="padding:10px; border-bottom: 1px solid var(--gray-200);">Record counts, request history, uptime</td>
                </tr>
                <tr>
                    <td style="padding:10px; font-family: var(--font-mono); font-size: 12px;">/__admin/requests</td>
                    <td style="padding:10px;">GET</td>
                    <td style="padding:10px;">View all received API requests (for debugging)</td>
                </tr>
            </tbody>
        </table>

        <h4 style="margin: 20px 0 12px;">Makefile Commands (Same Pattern)</h4>
        <pre style="background: var(--gray-100); padding: 16px; border-radius: 8px; font-family: var(--font-mono); font-size: 13px; line-height: 1.6; overflow-x: auto; margin-bottom: 20px;"><code><span style="color: #888;"># Start the custom mock server</span>
make salesforce-mock-start

<span style="color: #888;"># Check status</span>
make salesforce-mock-status

<span style="color: #888;"># View logs</span>
make salesforce-mock-logs

<span style="color: #888;"># Reset all data</span>
curl -X POST http://localhost:8089/__admin/reset

<span style="color: #888;"># View all stored records</span>
curl http://localhost:8089/__admin/db | python3 -m json.tool

<span style="color: #888;"># View just accounts</span>
curl http://localhost:8089/__admin/db/Account | python3 -m json.tool

<span style="color: #888;"># Stop</span>
make salesforce-mock-stop</code></pre>

        <h4 style="margin: 20px 0 12px;">Proposed File Structure</h4>
        <pre style="background: var(--gray-100); padding: 16px; border-radius: 8px; font-family: var(--font-mono); font-size: 13px; line-height: 1.6; overflow-x: auto;"><code>docker/salesforce/custom-server/
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ server.js                  <span style="color: #888;"># Main Express app (~300 lines)</span>
‚îú‚îÄ‚îÄ schemas/
‚îÇ   ‚îú‚îÄ‚îÄ Account.json           <span style="color: #888;"># Field definitions, required fields, picklists</span>
‚îÇ   ‚îú‚îÄ‚îÄ Contact.json
‚îÇ   ‚îú‚îÄ‚îÄ Opportunity.json
‚îÇ   ‚îú‚îÄ‚îÄ Lead.json
‚îÇ   ‚îî‚îÄ‚îÄ Case.json
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îú‚îÄ‚îÄ soql-parser.js         <span style="color: #888;"># SOQL query parser (SELECT, WHERE, LIMIT)</span>
‚îÇ   ‚îú‚îÄ‚îÄ validator.js           <span style="color: #888;"># Field validation (required, types)</span>
‚îÇ   ‚îú‚îÄ‚îÄ id-generator.js        <span style="color: #888;"># Salesforce-style ID generation</span>
‚îÇ   ‚îî‚îÄ‚îÄ error-formatter.js     <span style="color: #888;"># Salesforce error response format</span>
‚îî‚îÄ‚îÄ certs/                     <span style="color: #888;"># Reuse existing HTTPS certs</span>
    ‚îú‚îÄ‚îÄ cert.pem
    ‚îî‚îÄ‚îÄ key.pem</code></pre>
    </div>

    <!-- ‚îÄ‚îÄ Summary Decision Box ‚îÄ‚îÄ -->
    <div class="info-box green" style="margin-bottom: 20px;">
        <div class="info-box-title">Decision Summary</div>
        <table style="width:100%; border-collapse:collapse; margin-top: 10px;">
            <tr>
                <td style="padding:8px; font-weight:bold; width:200px;">If we need:</td>
                <td style="padding:8px;">Quick CI smoke tests only</td>
                <td style="padding:8px; font-weight: bold; color: var(--primary);">Keep WireMock</td>
            </tr>
            <tr>
                <td style="padding:8px; font-weight:bold;">If we need:</td>
                <td style="padding:8px;">Functional CRUD + query testing without Salesforce sandbox</td>
                <td style="padding:8px; font-weight: bold; color: var(--success);">Build Custom API Server</td>
            </tr>
            <tr>
                <td style="padding:8px; font-weight:bold;">If we need:</td>
                <td style="padding:8px;">Full Salesforce behavior (triggers, workflows, permissions)</td>
                <td style="padding:8px; font-weight: bold; color: var(--purple);">Use Real Salesforce Sandbox</td>
            </tr>
        </table>
    </div>

</div>

</div><!-- /container -->

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê FOOTER ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div style="text-align: center; padding: 30px; color: var(--gray-600); font-size: 0.85em; border-top: 1px solid var(--gray-200); margin-top: 40px;">
    Salesforce Mock Service &mdash; Complete End-to-End Guide<br>
    <span style="color: var(--gray-400);">Every file, every config, every design decision, every flow.</span>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SCRIPTS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<script>
    // ‚îÄ‚îÄ Main Tabs ‚îÄ‚îÄ
    document.querySelectorAll('.main-tab').forEach(tab => {
        tab.addEventListener('click', () => {
            document.querySelectorAll('.main-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));
            tab.classList.add('active');
            document.getElementById('tab-' + tab.dataset.tab).classList.add('active');
        });
    });

    // ‚îÄ‚îÄ Sub Tabs ‚îÄ‚îÄ
    document.querySelectorAll('.sub-tab').forEach(tab => {
        tab.addEventListener('click', () => {
            const group = tab.closest('.sub-tabs').dataset.group;
            const parent = tab.closest('.tab-panel');
            parent.querySelectorAll(`.sub-tabs[data-group="${group}"] .sub-tab`).forEach(t => t.classList.remove('active'));
            parent.querySelectorAll('.sub-panel').forEach(p => {
                if (p.id.startsWith('subtab-' + group.substring(0, 4))) p.classList.remove('active');
            });
            tab.classList.add('active');
            document.getElementById('subtab-' + tab.dataset.subtab).classList.add('active');
        });
    });

    // ‚îÄ‚îÄ Mapping card toggle (already inline but adding keyboard support) ‚îÄ‚îÄ
    document.querySelectorAll('.mapping-header').forEach(header => {
        header.setAttribute('tabindex', '0');
        header.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') header.click();
        });
    });
</script>

</body>
</html>
