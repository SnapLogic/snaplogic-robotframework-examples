<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WireMock + JSON-DB Integration</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f7fa;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            color: #0070d2;
            margin-bottom: 40px;
        }

        .flow-diagram {
            background: white;
            border-radius: 12px;
            padding: 40px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            margin-bottom: 40px;
        }

        .components {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
            margin-bottom: 40px;
        }

        .component {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            border: 2px solid #ddd;
        }

        .component.snaplogic {
            border-color: #0070d2;
            background: #e8f4fd;
        }

        .component.wiremock {
            border-color: #ff6b6b;
            background: #ffe8e8;
        }

        .component.jsondb {
            border-color: #7dd420;
            background: #f0fff4;
        }

        .component h3 {
            margin-top: 0;
            margin-bottom: 10px;
        }

        .arrow {
            text-align: center;
            font-size: 24px;
            color: #666;
            margin: 20px 0;
        }

        .use-cases {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 40px;
        }

        .use-case {
            background: white;
            border-radius: 8px;
            padding: 25px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .use-case h3 {
            color: #0070d2;
            margin-top: 0;
        }

        .code-example {
            background: #f6f8fa;
            border: 1px solid #e1e4e8;
            border-radius: 6px;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 13px;
            overflow-x: auto;
        }

        .comparison-table {
            width: 100%;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            margin: 30px 0;
        }

        .comparison-table th {
            background: #0070d2;
            color: white;
            padding: 12px;
            text-align: left;
        }

        .comparison-table td {
            padding: 12px;
            border-bottom: 1px solid #f0f0f0;
        }

        .comparison-table tr:last-child td {
            border-bottom: none;
        }

        .flow-steps {
            background: white;
            border-radius: 8px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .step {
            display: flex;
            align-items: center;
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .step-number {
            background: #0070d2;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>üîó WireMock + JSON-DB Integration</h1>

        <div class="flow-diagram">
            <h2 style="text-align: center;">How They Work Together</h2>
            <div class="components">
                <div class="component snaplogic">
                    <h3>SnapLogic</h3>
                    <p>Makes API calls to<br>Port 8089</p>
                </div>
                <div class="component wiremock">
                    <h3>WireMock</h3>
                    <p>Handles OAuth & API<br>Port 8089 (external)<br>Port 8080 (internal)</p>
                </div>
                <div class="component jsondb">
                    <h3>JSON Server</h3>
                    <p>Stateful data store<br>Port 8082</p>
                </div>
            </div>

            <div class="arrow">‚Üì Request Flow ‚Üì</div>

            <div class="flow-steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <div>
                        <strong>Authentication Request</strong><br>
                        SnapLogic ‚Üí WireMock: OAuth token request
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <div>
                        <strong>API Operations</strong><br>
                        SnapLogic ‚Üí WireMock: CRUD operations on Salesforce objects
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <div>
                        <strong>Advanced Operations (Optional)</strong><br>
                        WireMock ‚Üí JSON-DB: For stateful operations or complex queries
                    </div>
                </div>
            </div>
        </div>

        <h2 style="text-align: center;">üìä WireMock vs JSON-DB Capabilities</h2>
        <table class="comparison-table">
            <thead>
                <tr>
                    <th>Feature</th>
                    <th>WireMock</th>
                    <th>JSON-DB</th>
                    <th>Use Case</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Purpose</strong></td>
                    <td>API Mocking</td>
                    <td>Data Persistence</td>
                    <td>WireMock for API, JSON-DB for data</td>
                </tr>
                <tr>
                    <td><strong>Data Storage</strong></td>
                    <td>Static responses</td>
                    <td>Dynamic JSON database</td>
                    <td>JSON-DB for CRUD testing</td>
                </tr>
                <tr>
                    <td><strong>State Management</strong></td>
                    <td>Stateless</td>
                    <td>Stateful</td>
                    <td>JSON-DB remembers changes</td>
                </tr>
                <tr>
                    <td><strong>Query Support</strong></td>
                    <td>Pattern matching only</td>
                    <td>Full query parameters</td>
                    <td>JSON-DB for filtering/sorting</td>
                </tr>
                <tr>
                    <td><strong>Relationships</strong></td>
                    <td>No support</td>
                    <td>Via query parameters</td>
                    <td>JSON-DB for related data</td>
                </tr>
                <tr>
                    <td><strong>Authentication</strong></td>
                    <td>Can mock OAuth</td>
                    <td>No auth</td>
                    <td>WireMock for auth flows</td>
                </tr>
            </tbody>
        </table>

        <div class="use-cases">
            <div class="use-case">
                <h3>üé≠ When to Use WireMock Alone</h3>
                <ul>
                    <li>Simple read operations</li>
                    <li>OAuth authentication flows</li>
                    <li>Testing specific API responses</li>
                    <li>Simulating API errors</li>
                    <li>Quick integration tests</li>
                </ul>
                <div class="code-example">
                    // WireMock handles this perfectly
                    GET /services/data/v52.0/query?q=SELECT...
                    ‚Üí Returns static JSON response</div>
            </div>

            <div class="use-case">
                <h3>üóÑÔ∏è When to Add JSON-DB</h3>
                <ul>
                    <li>Testing CRUD operations</li>
                    <li>Need data to persist between calls</li>
                    <li>Complex filtering/sorting</li>
                    <li>Testing data relationships</li>
                    <li>Simulating a real database</li>
                </ul>
                <div class="code-example">
                    // JSON-DB provides real CRUD
                    POST /accounts ‚Üí Creates record
                    GET /accounts/123 ‚Üí Retrieves it
                    PUT /accounts/123 ‚Üí Updates it
                    DELETE /accounts/123 ‚Üí Deletes it</div>
            </div>
        </div>

        <div class="flow-diagram" style="margin-top: 40px;">
            <h2 style="text-align: center;">üîß Practical Example: Creating an Account</h2>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
                <div>
                    <h3>Option 1: WireMock Only</h3>
                    <div class="code-example">
                        // Request
                        POST /services/data/v52.0/sobjects/Account
                        {
                        "Name": "New Company"
                        }

                        // Response (always the same)
                        {
                        "id": "001MOCK000001",
                        "success": true
                        }

                        // Later...
                        GET /services/data/v52.0/sobjects/Account/001MOCK000001
                        ‚Üí 404 Not Found (doesn't exist)</div>
                </div>

                <div>
                    <h3>Option 2: With JSON-DB</h3>
                    <div class="code-example">
                        // Request
                        POST /accounts
                        {
                        "Name": "New Company"
                        }

                        // Response (real ID)
                        {
                        "id": "001000000000004",
                        "Name": "New Company"
                        }

                        // Later...
                        GET /accounts/001000000000004
                        ‚Üí 200 OK (record exists!)
                        {
                        "id": "001000000000004",
                        "Name": "New Company"
                        }</div>
                </div>
            </div>
        </div>

        <div class="flow-diagram" style="background: #e8f4fd;">
            <h2 style="text-align: center;">üí° Current Setup in Your Environment</h2>
            <p style="text-align: center; font-size: 18px;">
                Your Salesforce mock primarily uses <strong>WireMock</strong> for all operations.<br>
                JSON-DB is available but not actively used in the current mappings.
            </p>
            <p style="text-align: center;">
                <strong>This is perfectly fine!</strong> WireMock alone handles 90% of testing needs.<br>
                JSON-DB is there if you need more advanced stateful testing in the future.
            </p>
        </div>
    </div>
</body>

</html>