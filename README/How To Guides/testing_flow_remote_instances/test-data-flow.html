<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Data Generation and Flow Example - SnapLogic Robot Framework</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }

        .container {
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        h1 {
            color: #1a1a1a;
            border-bottom: 3px solid #00897B;
            padding-bottom: 10px;
            margin-bottom: 30px;
        }

        h2 {
            color: #00695C;
            margin-top: 40px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }

        h3 {
            color: #00897B;
            margin-top: 30px;
            margin-bottom: 15px;
        }

        h4 {
            color: #004D40;
            margin-top: 20px;
            margin-bottom: 10px;
        }

        .scenario-box {
            background: #e0f2f1;
            border-left: 4px solid #00897B;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .framework-components {
            background: #f3e5f5;
            border: 2px solid #9C27B0;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .env-config {
            background: #263238;
            color: #aed581;
            padding: 20px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 20px 0;
        }

        .env-config code {
            color: #aed581;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
        }

        .robot-code {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 0.9em;
            line-height: 1.5;
        }

        .robot-keyword {
            color: #569cd6;
            font-weight: bold;
        }

        .robot-variable {
            color: #9cdcfe;
        }

        .robot-comment {
            color: #6a9955;
            font-style: italic;
        }

        .robot-string {
            color: #ce9178;
        }

        .robot-section {
            color: #c586c0;
            font-weight: bold;
        }

        .architecture-diagram {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            padding: 20px;
            border-radius: 5px;
            margin: 20px 0;
            text-align: center;
        }

        .architecture-diagram pre {
            text-align: left;
            display: inline-block;
            margin: 0;
            padding: 10px;
            background: white;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .yaml-code {
            background: #f5f5f5;
            border: 1px solid #ddd;
            padding: 20px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 20px 0;
        }

        .yaml-key {
            color: #0066cc;
            font-weight: bold;
        }

        .yaml-value {
            color: #008000;
        }

        .yaml-comment {
            color: #666;
            font-style: italic;
        }

        .benefits-list {
            background: #e8f5e9;
            border: 1px solid #4caf50;
            padding: 20px;
            border-radius: 5px;
            margin: 20px 0;
        }

        .benefits-list h3 {
            margin-top: 0;
            color: #2e7d32;
        }

        .benefits-list ul {
            margin-bottom: 0;
        }

        .warning-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .info-box {
            background: #d1ecf1;
            border-left: 4px solid #17a2b8;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .step-number {
            display: inline-block;
            width: 30px;
            height: 30px;
            background: #00897B;
            color: white;
            text-align: center;
            line-height: 30px;
            border-radius: 50%;
            margin-right: 10px;
            font-weight: bold;
        }

        .test-flow {
            border: 2px solid #00897B;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            background: #fafafa;
        }

        .test-flow h3 {
            margin-top: 0;
        }

        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 0.9em;
        }

        pre {
            margin: 0;
        }

        .toc {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            padding: 20px;
            border-radius: 5px;
            margin: 20px 0;
        }

        .toc h3 {
            margin-top: 0;
            color: #333;
        }

        .toc ul {
            list-style: none;
            padding-left: 20px;
        }

        .toc a {
            color: #00897B;
            text-decoration: none;
        }

        .toc a:hover {
            text-decoration: underline;
        }

        .badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 3px;
            font-size: 0.85em;
            font-weight: bold;
            margin: 2px;
        }

        .badge-framework {
            background: #9C27B0;
            color: white;
        }

        .badge-client {
            background: #E91E63;
            color: white;
        }

        .badge-docker {
            background: #2196F3;
            color: white;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>Test Data Generation and Flow Example</h1>

        <div class="toc">
            <h3>Table of Contents</h3>
            <ul>
                <li><a href="#scenario">Scenario Overview</a></li>
                <li><a href="#framework-components">Framework Components</a></li>
                <li><a href="#env-config">Environment Configuration</a></li>
                <li><a href="#test-implementation">Test Implementation</a></li>
                <li><a href="#test-flow">Test Execution Flow</a></li>
                <li><a href="#validation">Validation Using Framework APIs</a></li>
                <li><a href="#architecture">Framework Architecture</a></li>
                <li><a href="#cicd-integration">CI/CD Integration</a></li>
            </ul>
        </div>

        <section id="scenario">
            <div class="scenario-box">
                <h2>Scenario: Testing Snowflake to Braze Pipeline</h2>
                <p>This example demonstrates how to test a Snowflake → Braze marketing pipeline using the framework's
                    comprehensive tooling.</p>

                <h3>Pipeline Purpose</h3>
                <p>This pipeline extracts customer segmentation data from client's Snowflake instance and sends it to
                    their Braze environment for targeted marketing campaigns.</p>
            </div>
        </section>

        <section id="framework-components">
            <div class="framework-components">
                <h2>Framework Components</h2>
                <ol>
                    <li><strong>snaplogic-common-robot</strong> <span class="badge badge-framework">Framework</span>:
                        Tools container with all SnapLogic API keywords</li>
                    <li><strong>Environment Configuration</strong> <span class="badge badge-framework">Framework</span>:
                        Centralized <code>.env</code> file for all settings</li>
                    <li><strong>Docker-based Groundplex</strong> <span class="badge badge-docker">Docker</span>: Started
                        automatically by the tools container</li>
                </ol>
                <p><strong>The framework handles all infrastructure setup - developers focus on writing tests.</strong>
                </p>
            </div>
        </section>

        <section id="env-config">
            <h2>Environment Configuration (.env file)</h2>
            <p>All test configurations are managed through a single <code>.env</code> file:</p>

            <div class="env-config">
                <pre><code><span class="robot-comment"># .env - Complete test configuration</span>
<span class="robot-comment"># SnapLogic Platform</span>
<span class="yaml-key">SNAPLOGIC_ORG</span>=<span class="yaml-value">DEMO-test</span>
<span class="yaml-key">SNAPLOGIC_USERNAME</span>=<span class="yaml-value">automation@DEMO.com</span>
<span class="yaml-key">SNAPLOGIC_PASSWORD</span>=<span class="yaml-value">encrypted-password</span>
<span class="yaml-key">GROUNDPLEX_NAME</span>=<span class="yaml-value">test-automation-plex</span>

<span class="robot-comment"># Test Project Structure</span>
<span class="yaml-key">PROJECT_PATH</span>=<span class="yaml-value">/DEMO-test/QA/Marketing</span>
<span class="yaml-key">ACCOUNT_PAYLOAD_PATH</span>=<span class="yaml-value">test/resources/accounts</span>

<span class="robot-comment"># Client's Snowflake</span>
<span class="yaml-key">SNOWFLAKE_ACCOUNT</span>=<span class="yaml-value">DEMO-test.snowflakecomputing.com</span>
<span class="yaml-key">SNOWFLAKE_WAREHOUSE</span>=<span class="yaml-value">MARKETING_TEST_WH</span>
<span class="yaml-key">SNOWFLAKE_DATABASE</span>=<span class="yaml-value">TEST_DATA</span>
<span class="yaml-key">SNOWFLAKE_SCHEMA</span>=<span class="yaml-value">CUSTOMER_SEGMENTS</span>
<span class="yaml-key">SNOWFLAKE_USER</span>=<span class="yaml-value">svc_snaplogic_test</span>
<span class="yaml-key">SNOWFLAKE_PASSWORD</span>=<span class="yaml-value">encrypted-sf-password</span>

<span class="robot-comment"># Client's Braze</span>
<span class="yaml-key">BRAZE_ENDPOINT</span>=<span class="yaml-value">https://rest.iad-01.braze.com</span>
<span class="yaml-key">BRAZE_API_KEY</span>=<span class="yaml-value">test-api-key-xxxx</span>
<span class="yaml-key">BRAZE_APP_ID</span>=<span class="yaml-value">test-app-id-yyyy</span>

<span class="robot-comment"># Test Data Configuration</span>
<span class="yaml-key">TEST_CUSTOMER_PREFIX</span>=<span class="yaml-value">TEST_</span>
<span class="yaml-key">TEST_RECORD_COUNT</span>=<span class="yaml-value">50</span></code></pre>
            </div>
        </section>

        <section id="test-implementation">
            <h2>Test Implementation Using snaplogic-common-robot</h2>

            <h3>Robot Framework Test File: <code>snowflake_to_braze_test.robot</code></h3>

            <div class="robot-code">
                <pre><code><span class="robot-section">*** Settings ***</span>
<span class="robot-keyword">Documentation</span>    Test Snowflake to Braze Pipeline Using Framework APIs
<span class="robot-keyword">Resource</span>         snaplogic_common_robot/snaplogic_apis_keywords.resource
<span class="robot-keyword">Resource</span>         snaplogic_common_robot/account_keywords.resource
<span class="robot-keyword">Resource</span>         snaplogic_common_robot/pipeline_keywords.resource
<span class="robot-keyword">Library</span>          DatabaseLibrary

<span class="robot-comment"># Suite setup handled by framework - Groundplex already running</span>

<span class="robot-section">*** Variables ***</span>
<span class="robot-comment"># All variables loaded from .env file</span>
<span class="robot-variable">${PIPELINE_NAME}</span>            snowflake_to_braze_segments
<span class="robot-variable">${PIPELINE_FILE}</span>            pipelines/snowflake_to_braze.slp

<span class="robot-section">*** Test Cases ***</span>
<span class="robot-keyword">Create Snowflake and Braze Accounts</span>
    [<span class="robot-keyword">Documentation</span>]    Use framework APIs to create accounts
    [<span class="robot-keyword">Tags</span>]    setup    accounts
    
    <span class="robot-comment"># Create Snowflake account using framework API</span>
    <span class="robot-variable">${sf_payload}</span>=    <span class="robot-keyword">Load Account Payload</span>    
    ...    <span class="robot-variable">${ACCOUNT_PAYLOAD_PATH}</span>/snowflake_account.json
    
    <span class="robot-variable">${sf_account}</span>=    <span class="robot-keyword">Create Account</span>    
    ...    payload=<span class="robot-variable">${sf_payload}</span>
    ...    account_name=<span class="robot-string">snowflake-test</span>
    
    <span class="robot-comment"># Create Braze account</span>
    <span class="robot-variable">${braze_payload}</span>=    <span class="robot-keyword">Load Account Payload</span>    
    ...    <span class="robot-variable">${ACCOUNT_PAYLOAD_PATH}</span>/braze_account.json
    
    <span class="robot-variable">${braze_account}</span>=    <span class="robot-keyword">Create Account</span>    
    ...    payload=<span class="robot-variable">${braze_payload}</span>
    ...    account_name=<span class="robot-string">braze-test</span>
    
    <span class="robot-keyword">Log</span>    <span class="robot-string">Accounts created successfully</span>
    <span class="robot-keyword">Set Suite Variable</span>    <span class="robot-variable">${SF_ACCOUNT_ID}</span>    <span class="robot-variable">${sf_account.id}</span>
    <span class="robot-keyword">Set Suite Variable</span>    <span class="robot-variable">${BRAZE_ACCOUNT_ID}</span>    <span class="robot-variable">${braze_account.id}</span>

<span class="robot-keyword">Import and Configure Pipeline</span>
    [<span class="robot-keyword">Documentation</span>]    Import pipeline using framework APIs
    [<span class="robot-keyword">Tags</span>]    pipeline    import
    
    <span class="robot-comment"># Import pipeline</span>
    <span class="robot-variable">${pipeline}</span>=    <span class="robot-keyword">Import Pipeline</span>    
    ...    file=<span class="robot-variable">${PIPELINE_FILE}</span>
    ...    project_path=<span class="robot-variable">${PROJECT_PATH}</span>
    ...    unique_id=<span class="robot-variable">${TEST_RUN_ID}</span>
    
    <span class="robot-comment"># Update pipeline to use test accounts</span>
    <span class="robot-keyword">Update Pipeline Accounts</span>    
    ...    pipeline_id=<span class="robot-variable">${pipeline.id}</span>
    ...    snowflake_account=<span class="robot-variable">${SF_ACCOUNT_ID}</span>
    ...    braze_account=<span class="robot-variable">${BRAZE_ACCOUNT_ID}</span>
    
    <span class="robot-keyword">Set Suite Variable</span>    <span class="robot-variable">${PIPELINE_ID}</span>    <span class="robot-variable">${pipeline.id}</span>

<span class="robot-keyword">Check Available Test Data</span>
    [<span class="robot-keyword">Documentation</span>]    Connect to client's Snowflake to verify test data
    [<span class="robot-keyword">Tags</span>]    data_discovery
    
    <span class="robot-comment"># Framework provides connection using .env credentials</span>
    <span class="robot-keyword">Connect To Snowflake Using Config</span>
    
    <span class="robot-variable">${row_count}</span>=    <span class="robot-keyword">Query</span>    
    ...    <span class="robot-string">SELECT COUNT(*) FROM ${SNOWFLAKE_SCHEMA}.CUSTOMER_SEGMENTS_TEST</span>
    
    <span class="robot-keyword">Log</span>    <span class="robot-string">Found ${row_count} test records in Snowflake</span>
    <span class="robot-keyword">Should Be True</span>    <span class="robot-variable">${row_count}</span> > 0    <span class="robot-string">No test data available</span>
    
    <span class="robot-keyword">Set Suite Variable</span>    <span class="robot-variable">${AVAILABLE_TEST_RECORDS}</span>    <span class="robot-variable">${row_count}</span></code></pre>
            </div>
        </section>

        <section id="test-flow">
            <div class="test-flow">
                <h2><span class="step-number">1</span>Test Execution Flow</h2>

                <h3>Prepare Test Execution</h3>
                <div class="robot-code">
                    <pre><code><span class="robot-keyword">Prepare Test Execution</span>
    [<span class="robot-keyword">Documentation</span>]    Set up test execution based on client's data
    [<span class="robot-keyword">Tags</span>]    setup
    
    <span class="robot-comment"># Option 1: Client has dedicated test records</span>
    <span class="robot-variable">${test_records}</span>=    <span class="robot-keyword">Query</span>    
    ...    <span class="robot-string">SELECT customer_id, email, segment, ltv_score 
    ...    FROM ${CLIENT_SF_TABLE}
    ...    WHERE customer_id LIKE 'TEST_%'
    ...    OR email LIKE '%@test.example.com'
    ...    LIMIT 100</span>
    
    <span class="robot-variable">${test_count}</span>=    <span class="robot-keyword">Get Length</span>    <span class="robot-variable">${test_records}</span>
    
    <span class="robot-keyword">Run Keyword If</span>    <span class="robot-variable">${test_count}</span> == 0
    ...    <span class="robot-keyword">Log</span>    <span class="robot-string">WARN: No dedicated test records found. Will use all available data.</span>
    
    <span class="robot-comment"># Store record IDs for validation later</span>
    <span class="robot-variable">@{test_customer_ids}</span>=    <span class="robot-keyword">Create List</span>
    <span class="robot-keyword">FOR</span>    <span class="robot-variable">${record}</span>    <span class="robot-keyword">IN</span>    <span class="robot-variable">@{test_records}</span>
        <span class="robot-keyword">Append To List</span>    <span class="robot-variable">${test_customer_ids}</span>    <span class="robot-variable">${record[0]}</span>
    <span class="robot-keyword">END</span>
    
    <span class="robot-keyword">Set Suite Variable</span>    <span class="robot-variable">@{TEST_CUSTOMER_IDS}</span>    <span class="robot-variable">@{test_customer_ids}</span>
    <span class="robot-keyword">Log</span>    <span class="robot-string">Will track ${test_count} records through pipeline</span></code></pre>
                </div>
            </div>
        </section>

        <section id="pipeline-execution">
            <div class="test-flow">
                <h2><span class="step-number">2</span>Pipeline Execution</h2>

                <div class="robot-code">
                    <pre><code><span class="robot-keyword">Execute Snowflake To Braze Pipeline</span>
    [<span class="robot-keyword">Documentation</span>]    Execute pipeline using framework APIs
    [<span class="robot-keyword">Tags</span>]    pipeline_execution
    
    <span class="robot-comment"># Create triggered task using framework API</span>
    <span class="robot-variable">${task}</span>=    <span class="robot-keyword">Create Triggered Task</span>    
    ...    pipeline_id=<span class="robot-variable">${PIPELINE_ID}</span>
    ...    task_name=<span class="robot-string">sf_to_braze_task</span>
    ...    groundplex=<span class="robot-variable">${GROUNDPLEX_NAME}</span>
    
    <span class="robot-comment"># Execute task with parameters</span>
    <span class="robot-variable">${execution}</span>=    <span class="robot-keyword">Execute Task</span>    
    ...    task_id=<span class="robot-variable">${task.snode_id}</span>
    ...    parameters=&{
    ...        <span class="robot-string">"source_table"</span>: <span class="robot-string">"CUSTOMER_SEGMENTS_TEST"</span>,
    ...        <span class="robot-string">"batch_size"</span>: <span class="robot-string">"1000"</span>
    ...    }
    
    <span class="robot-comment"># Monitor execution using framework APIs</span>
    <span class="robot-variable">${status}</span>=    <span class="robot-keyword">Wait Until Pipeline Complete</span>    
    ...    execution_id=<span class="robot-variable">${execution.id}</span>
    ...    timeout=<span class="robot-string">600s</span>
    ...    check_interval=<span class="robot-string">10s</span>
    
    <span class="robot-comment"># Get execution statistics</span>
    <span class="robot-variable">${stats}</span>=    <span class="robot-keyword">Get Execution Statistics</span>    <span class="robot-variable">${execution.id}</span>
    <span class="robot-keyword">Log</span>    <span class="robot-string">Pipeline Statistics: ${stats}</span>
    
    <span class="robot-keyword">Should Be Equal</span>    <span class="robot-variable">${status.state}</span>    <span class="robot-string">COMPLETED</span>
    <span class="robot-keyword">Should Be Equal As Numbers</span>    <span class="robot-variable">${stats.error_count}</span>    <span class="robot-string">0</span></code></pre>
                </div>
            </div>
        </section>

        <section id="validation">
            <div class="test-flow">
                <h2><span class="step-number">3</span>Validation Using Framework APIs</h2>

                <div class="robot-code">
                    <pre><code><span class="robot-keyword">Validate Data Transfer To Braze</span>
    [<span class="robot-keyword">Documentation</span>]    Verify data using framework validation tools
    [<span class="robot-keyword">Tags</span>]    validation
    
    <span class="robot-comment"># Use framework's Braze validation keywords</span>
    <span class="robot-variable">${braze_session}</span>=    <span class="robot-keyword">Create Braze Session</span>    
    ...    endpoint=<span class="robot-variable">${BRAZE_ENDPOINT}</span>
    ...    api_key=<span class="robot-variable">${BRAZE_API_KEY}</span>
    
    <span class="robot-comment"># Check sample of records</span>
    <span class="robot-variable">${validation_count}</span>=    <span class="robot-keyword">Set Variable</span>    <span class="robot-string">10</span>
    <span class="robot-variable">${validated}</span>=    <span class="robot-keyword">Set Variable</span>    <span class="robot-string">0</span>
    <span class="robot-variable">${failed}</span>=    <span class="robot-keyword">Set Variable</span>    <span class="robot-string">0</span>
    
    <span class="robot-keyword">FOR</span>    <span class="robot-variable">${i}</span>    <span class="robot-keyword">IN RANGE</span>    <span class="robot-variable">${validation_count}</span>
        <span class="robot-variable">${customer_id}</span>=    <span class="robot-keyword">Set Variable</span>    <span class="robot-string">${TEST_CUSTOMER_PREFIX}${i:05d}</span>
        
        <span class="robot-variable">${found}</span>=    <span class="robot-keyword">Check User In Braze</span>    
        ...    session=<span class="robot-variable">${braze_session}</span>
        ...    external_id=<span class="robot-variable">${customer_id}</span>
        
        <span class="robot-keyword">Run Keyword If</span>    <span class="robot-variable">${found}</span>    
        ...    <span class="robot-keyword">Set Variable</span>    <span class="robot-variable">${validated}</span>    <span class="robot-variable">${validated + 1}</span>
        ...    <span class="robot-keyword">ELSE</span>    
        ...    <span class="robot-keyword">Set Variable</span>    <span class="robot-variable">${failed}</span>    <span class="robot-variable">${failed + 1}</span>
    <span class="robot-keyword">END</span>
    
    <span class="robot-variable">${success_rate}</span>=    <span class="robot-keyword">Evaluate</span>    <span class="robot-variable">${validated}</span> / <span class="robot-variable">${validation_count}</span> * 100
    <span class="robot-keyword">Log</span>    <span class="robot-string">Validation Success Rate: ${success_rate}%</span>
    
    <span class="robot-keyword">Should Be True</span>    <span class="robot-variable">${success_rate}</span> >= 90    
    ...    <span class="robot-string">Success rate too low: ${success_rate}%</span></code></pre>
                </div>
            </div>
        </section>

        <section id="architecture">
            <h2>Framework Architecture with snaplogic-common-robot</h2>

            <div class="architecture-diagram">
                <pre>
┌─────────────────────────────────────────────────────┐
│                    CI/CD Pipeline                    │
├─────────────────────────────────────────────────────┤
│  1. Load .env file with all configurations          │
│  2. Start Docker Compose                             │
└────────────────────────┬────────────────────────────┘
                         │
┌────────────────────────▼────────────────────────────┐
│              Docker Infrastructure                   │
├─────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────┐   │
│  │     Tools Container (snaplogic-common-robot) │   │
│  │  • SnapLogic API Keywords                   │   │
│  │  • Account Management APIs                  │   │
│  │  • Pipeline Import/Export                   │   │
│  │  • Task Execution APIs                      │   │
│  │  • Validation Utilities                     │   │
│  └──────────────────┬──────────────────────────┘   │
│                     │                                │
│  ┌──────────────────▼──────────────────────────┐   │
│  │       Local Groundplex Container             │   │
│  │  • Managed by tools container               │   │
│  │  • Executes pipelines                       │   │
│  │  • Connects to client systems               │   │
│  └─────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────┘
                         │
                         │ Network Connections
                         ▼
┌─────────────────────────────────────────────────────┐
│              Client Test Systems                     │
├─────────────────────────────────────────────────────┤
│  • Snowflake Test Account (from .env)               │
│  • Kafka Test Cluster (from .env)                   │
│  • Braze Test Workspace (from .env)                 │
│  • Other configured systems                         │
└─────────────────────────────────────────────────────┘
                </pre>
            </div>
        </section>

        <section id="cicd-integration">
            <h2>CI/CD Integration</h2>

            <div class="yaml-code">
                <pre><code><span class="robot-comment"># .travis.yml</span>
<span class="yaml-key">stages</span>:
  - <span class="yaml-value">setup</span>
  - <span class="yaml-value">test</span>
  - <span class="yaml-value">teardown</span>

<span class="robot-comment"># Start infrastructure once before all tests</span>
<span class="yaml-key">start_test_infrastructure</span>:
  <span class="yaml-key">stage</span>: <span class="yaml-value">setup</span>
  <span class="yaml-key">script</span>:
    - <span class="yaml-value">docker-compose -f docker/docker-compose.yml up -d</span>
    - <span class="yaml-value">./scripts/wait-for-groundplex.sh</span>
    - <span class="yaml-value">echo "Test infrastructure ready"</span>
  <span class="yaml-key">artifacts</span>:
    <span class="yaml-key">paths</span>:
      - <span class="yaml-value">.test-infra-ready</span>

<span class="robot-comment"># Run all pipeline tests</span>
<span class="yaml-key">test_all_pipelines</span>:
  <span class="yaml-key">stage</span>: <span class="yaml-value">test</span>
  <span class="yaml-key">dependencies</span>:
    - <span class="yaml-value">start_test_infrastructure</span>
  <span class="yaml-key">script</span>:
    <span class="robot-comment"># Load all client credentials</span>
    - <span class="yaml-value">source ./scripts/load-client-credentials.sh</span>
    <span class="robot-comment"># Run entire test suite</span>
    - <span class="yaml-value">robot --outputdir results tests/</span>
  <span class="yaml-key">artifacts</span>:
    <span class="yaml-key">reports</span>:
      <span class="yaml-key">junit</span>: <span class="yaml-value">results/output.xml</span>
    <span class="yaml-key">paths</span>:
      - <span class="yaml-value">results/</span>

<span class="robot-comment"># Cleanup after all tests complete</span>
<span class="yaml-key">cleanup_infrastructure</span>:
  <span class="yaml-key">stage</span>: <span class="yaml-value">teardown</span>
  <span class="yaml-key">when</span>: <span class="yaml-value">always</span>
  <span class="yaml-key">script</span>:
    - <span class="yaml-value">docker-compose -f docker/docker-compose.yml down</span>
    - <span class="yaml-value">echo "Test infrastructure cleaned up"</span></code></pre>
            </div>
        </section>

        <section id="benefits">
            <div class="benefits-list">
                <h3>Key Benefits of snaplogic-common-robot</h3>
                <ul>
                    <li><strong>Unified API Interface</strong>: All SnapLogic operations through consistent keywords
                    </li>
                    <li><strong>Account Abstraction</strong>: Create/manage accounts without manual configuration</li>
                    <li><strong>Pipeline Lifecycle</strong>: Import, configure, execute, and validate pipelines</li>
                    <li><strong>Environment Management</strong>: Single .env file controls entire test environment</li>
                    <li><strong>Reusable Components</strong>: Common operations packaged as Robot keywords</li>
                </ul>
            </div>
        </section>

        <section id="sample-env">
            <h2>Complete Sample .env Configuration</h2>

            <div class="env-config">
                <pre><code><span class="robot-comment"># Complete test environment configuration</span>
<span class="yaml-key">SNAPLOGIC_ORG</span>=<span class="yaml-value">DEMO-test</span>
<span class="yaml-key">SNAPLOGIC_USERNAME</span>=<span class="yaml-value">automation@DEMO.com</span>
<span class="yaml-key">SNAPLOGIC_PASSWORD</span>=<span class="yaml-value">encrypted-password</span>

<span class="robot-comment"># Groundplex Configuration</span>
<span class="yaml-key">GROUNDPLEX_NAME</span>=<span class="yaml-value">test-automation-plex</span>
<span class="yaml-key">GROUNDPLEX_MEMORY</span>=<span class="yaml-value">4096</span>
<span class="yaml-key">GROUNDPLEX_WORKERS</span>=<span class="yaml-value">2</span>

<span class="robot-comment"># Client Systems (all credentials centralized)</span>
<span class="yaml-key">KAFKA_BROKERS</span>=<span class="yaml-value">kafka-test.DEMO.com:9092</span>
<span class="yaml-key">SNOWFLAKE_ACCOUNT</span>=<span class="yaml-value">DEMO-test</span>
<span class="yaml-key">BRAZE_API_KEY</span>=<span class="yaml-value">test-key-xxxx</span>

<span class="robot-comment"># Test Configuration</span>
<span class="yaml-key">TEST_TIMEOUT</span>=<span class="yaml-value">300</span>
<span class="yaml-key">RETRY_COUNT</span>=<span class="yaml-value">3</span>
<span class="yaml-key">LOG_LEVEL</span>=<span class="yaml-value">DEBUG</span></code></pre>
            </div>

            <div class="info-box">
                <p><strong>Note:</strong> This architecture ensures all test configuration is centralized, making it
                    easy to manage different environments and client configurations.</p>
            </div>
        </section>
    </div>
</body>

</html>